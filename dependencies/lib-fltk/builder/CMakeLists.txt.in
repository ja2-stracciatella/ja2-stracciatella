# \file dependencies/lib-fltk/builder/CMakeLists.txt.in
# Configured by @CMAKE_CURRENT_LIST_FILE@
#
# @ONLY variables:
#  * CMAKE_GENERATOR - which generator to use
#  * CACHE_FILE - initial cache of the external project
#  * INSTALL_PREFIX - where to install the files generated by the external project

cmake_minimum_required(VERSION 3.18...3.25)

project(builder NONE)

include(ExternalProject)
externalproject_add(fltk
    URL "https://github.com/fltk/fltk/releases/download/release-1.3.11/fltk-1.3.11-source.tar.gz"
    URL_MD5 "75b2fd1aa2433e13abcbb311043eaee0"
    CMAKE_ARGS
        "-G@CMAKE_GENERATOR@"
        "-C@CACHE_FILE@"
        "-DCMAKE_INSTALL_PREFIX=@INSTALL_PREFIX@"
        "-DCMAKE_SYSTEM_VERSION=@CMAKE_SYSTEM_VERSION@"
        "-DCMAKE_C_COMPILER_LAUNCHER=@CMAKE_C_COMPILER_LAUNCHER@"
        "-DCMAKE_CXX_COMPILER_LAUNCHER=@CMAKE_CXX_COMPILER_LAUNCHER@"
        "-DCMAKE_CXX_FLAGS=@CMAKE_CXX_FLAGS@ -DNO_TRACK_MOUSE"
        -DCMAKE_BUILD_TYPE=RelWithDebInfo
        -DOPTION_USE_GL=OFF
        -DOPTION_USE_SYSTEM_ZLIB=OFF
        -DOPTION_USE_SYSTEM_LIBJPEG=OFF
        -DOPTION_USE_SYSTEM_LIBPNG=OFF
        -DOPTION_USE_XINERAMA=OFF
        -DOPTION_USE_XFIXES=OFF
        -DOPTION_USE_XCURSOR=OFF
        -DOPTION_USE_XFT=OFF
        -DOPTION_USE_XRENDER=OFF
        -DOPTION_USE_XDBE=OFF
        -DFLTK_BUILD_TEST=OFF
    BUILD_COMMAND ${CMAKE_COMMAND} --build . --config RelWithDebInfo
    INSTALL_COMMAND ${CMAKE_COMMAND} --build . --config RelWithDebInfo --target install
    BUILD_ALWAYS 1
)
