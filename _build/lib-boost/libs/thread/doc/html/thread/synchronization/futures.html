<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Futures</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Thread 4.7.0">
<link rel="up" href="../synchronization.html" title="Synchronization">
<link rel="prev" href="executors.html" title="Executors and Schedulers -- EXPERIMENTAL">
<link rel="next" href="../thread_local_storage.html" title="Thread Local Storage">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="executors.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../synchronization.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../thread_local_storage.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="thread.synchronization.futures"></a><a class="link" href="futures.html" title="Futures">Futures</a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.overview">Overview</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.creating">Creating asynchronous
        values</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.lazy_futures">Wait Callbacks
        and Lazy Futures</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.at_thread_exit">Handling
        Detached Threads and Thread Specific Variables</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.async">Executing asynchronously</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.shared">Shared Futures</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.make_ready_future">Making
        immediate futures easier</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.then">Associating future
        continuations</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference">Futures Reference</a></span></dt>
<dd><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_state">Enumeration
          <code class="computeroutput"><span class="identifier">state</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_errc">Enumeration
          <code class="computeroutput"><span class="identifier">future_errc</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.launch">Enumeration
          <code class="computeroutput"><span class="identifier">launch</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.is_error_code_enum">Specialization
          <code class="computeroutput"><span class="identifier">is_error_code_enum</span><span class="special">&lt;</span><span class="identifier">future_errc</span><span class="special">&gt;</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_error_code">Non-member
          function <code class="computeroutput"><span class="identifier">make_error_code</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_error_condition">Non-member
          function <code class="computeroutput"><span class="identifier">make_error_condition</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_category">Non-member
          function <code class="computeroutput"><span class="identifier">future_category</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error">Class
          <code class="computeroutput"><span class="identifier">future_error</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_status">Enumeration
          <code class="computeroutput"><span class="identifier">future_status</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error0">Class
          <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code> EXPERIMENTAL</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future"><code class="computeroutput"><span class="identifier">future</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future"><code class="computeroutput"><span class="identifier">shared_future</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise"><code class="computeroutput"><span class="identifier">promise</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task"><code class="computeroutput"><span class="identifier">packaged_task</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.decay_copy">Non-member
          function <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.async">Non-member
          function <code class="computeroutput"><span class="identifier">async</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.wait_for_any">Non-member
          function <code class="computeroutput"><span class="identifier">wait_for_any</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.wait_for_all">Non-member
          function <code class="computeroutput"><span class="identifier">wait_for_all</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.when_all">Non-member
          function <code class="computeroutput"><span class="identifier">when_all</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.when_any">Non-member
          function <code class="computeroutput"><span class="identifier">when_any</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_ready_future">Non-member
          function <code class="computeroutput"><span class="identifier">make_ready_future</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_exceptional">Non-member
          function <code class="computeroutput"><span class="identifier">make_exceptional</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_future">Non-member
          function <code class="computeroutput"><span class="identifier">make_future</span><span class="special">()</span></code>
          DEPRECATED</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_shared_future">Non-member
          function <code class="computeroutput"><span class="identifier">make_shared_future</span><span class="special">()</span></code> DEPRECATED</a></span></dt>
</dl></dd>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.overview"></a><a class="link" href="futures.html#thread.synchronization.futures.overview" title="Overview">Overview</a>
</h4></div></div></div>
<p>
          The futures library provides a means of handling synchronous future values,
          whether those values are generated by another thread, or on a single thread
          in response to external stimuli, or on-demand.
        </p>
<p>
          This is done through the provision of four class templates: <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> and <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a> which are used to
          retrieve the asynchronous results, and <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> and <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> which are used to
          generate the asynchronous results.
        </p>
<p>
          An instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> holds the one and only
          reference to a result. Ownership can be transferred between instances using
          the move constructor or move-assignment operator, but at most one instance
          holds a reference to a given asynchronous result. When the result is ready,
          it is returned from <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get" title="Member function get()"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code></a>
          by rvalue-reference to allow the result to be moved or copied as appropriate
          for the type.
        </p>
<p>
          On the other hand, many instances of <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a> may reference the
          same result. Instances can be freely copied and assigned, and <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get" title="Member function get()"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code></a>
          returns a <code class="computeroutput"><span class="keyword">const</span></code> reference
          so that multiple calls to <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get" title="Member function get()"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code></a>
          are safe. You can move an instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> into an instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a>, thus transferring
          ownership of the associated asynchronous result, but not vice-versa.
        </p>
<p>
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">async</span></code> is a simple way of running asynchronous
          tasks. A call to <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">async</span></code>
          returns a <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> that will contain the result
          of the task.
        </p>
<p>
          You can wait for futures either individually or with one of the <a class="link" href="futures.html#thread.synchronization.futures.reference.wait_for_any" title="Non-member function wait_for_any() - EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">wait_for_any</span><span class="special">()</span></code></a>
          and <a class="link" href="futures.html#thread.synchronization.futures.reference.wait_for_all" title="Non-member function wait_for_all() - EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">wait_for_all</span><span class="special">()</span></code></a>
          functions.
        </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.creating"></a><a class="link" href="futures.html#thread.synchronization.futures.creating" title="Creating asynchronous values">Creating asynchronous
        values</a>
</h4></div></div></div>
<p>
          You can set the value in a future with either a <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> or a <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>. A <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> is a callable object
          that wraps a function or callable object. When the packaged task is invoked,
          it invokes the contained function in turn, and populates a future with
          the return value. This is an answer to the perennial question: "how
          do I return a value from a thread?": package the function you wish
          to run as a <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> and pass the packaged
          task to the thread constructor. The future retrieved from the packaged
          task can then be used to obtain the return value. If the function throws
          an exception, that is stored in the future in place of the return value.
        </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">calculate_the_answer_to_life_the_universe_and_everything</span><span class="special">()</span>
<span class="special">{</span>
    <span class="keyword">return</span> <span class="number">42</span><span class="special">;</span>
<span class="special">}</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">pt</span><span class="special">(</span><span class="identifier">calculate_the_answer_to_life_the_universe_and_everything</span><span class="special">);</span>
<span class="identifier">boost</span><span class="special">::</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">fi</span><span class="special">=</span><span class="identifier">pt</span><span class="special">.</span><span class="identifier">get_future</span><span class="special">();</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread</span> <span class="identifier">task</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">pt</span><span class="special">));</span> <span class="comment">// launch task on a thread</span>

<span class="identifier">fi</span><span class="special">.</span><span class="identifier">wait</span><span class="special">();</span> <span class="comment">// wait for it to finish</span>

<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">is_ready</span><span class="special">());</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">has_value</span><span class="special">());</span>
<span class="identifier">assert</span><span class="special">(!</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">has_exception</span><span class="special">());</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">get_state</span><span class="special">()==</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">get</span><span class="special">()==</span><span class="number">42</span><span class="special">);</span>
</pre>
<p>
          A <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> is a bit more low level:
          it just provides explicit functions to store a value or an exception in
          the associated future. A promise can therefore be used where the value
          may come from more than one possible source, or where a single operation
          may produce multiple values.
        </p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">pi</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">fi</span><span class="special">;</span>
<span class="identifier">fi</span><span class="special">=</span><span class="identifier">pi</span><span class="special">.</span><span class="identifier">get_future</span><span class="special">();</span>

<span class="identifier">pi</span><span class="special">.</span><span class="identifier">set_value</span><span class="special">(</span><span class="number">42</span><span class="special">);</span>

<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">is_ready</span><span class="special">());</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">has_value</span><span class="special">());</span>
<span class="identifier">assert</span><span class="special">(!</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">has_exception</span><span class="special">());</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">get_state</span><span class="special">()==</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span><span class="special">);</span>
<span class="identifier">assert</span><span class="special">(</span><span class="identifier">fi</span><span class="special">.</span><span class="identifier">get</span><span class="special">()==</span><span class="number">42</span><span class="special">);</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.lazy_futures"></a><a class="link" href="futures.html#thread.synchronization.futures.lazy_futures" title="Wait Callbacks and Lazy Futures">Wait Callbacks
        and Lazy Futures</a>
</h4></div></div></div>
<p>
          Both <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> and <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> support <span class="emphasis"><em>wait
          callbacks</em></span> that are invoked when a thread blocks in a call to
          <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code>
          or <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
          on a future that is waiting for the result from the <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>, in the thread that
          is doing the waiting. These can be set using the <code class="computeroutput"><span class="identifier">set_wait_callback</span><span class="special">()</span></code> member function on the <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> in question.
        </p>
<p>
          This allows <span class="emphasis"><em>lazy futures</em></span> where the result is not actually
          computed until it is needed by some thread. In the example below, the call
          to <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>
          invokes the callback <code class="computeroutput"><span class="identifier">invoke_lazy_task</span></code>,
          which runs the task to set the value. If you remove the call to <code class="computeroutput"><span class="identifier">f</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>, the task is not ever run.
        </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">calculate_the_answer_to_life_the_universe_and_everything</span><span class="special">()</span>
<span class="special">{</span>
    <span class="keyword">return</span> <span class="number">42</span><span class="special">;</span>
<span class="special">}</span>

<span class="keyword">void</span> <span class="identifier">invoke_lazy_task</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;&amp;</span> <span class="identifier">task</span><span class="special">)</span>
<span class="special">{</span>
    <span class="keyword">try</span>
    <span class="special">{</span>
        <span class="identifier">task</span><span class="special">();</span>
    <span class="special">}</span>
    <span class="keyword">catch</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_already_started</span><span class="special">&amp;)</span>
    <span class="special">{}</span>
<span class="special">}</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">task</span><span class="special">(</span><span class="identifier">calculate_the_answer_to_life_the_universe_and_everything</span><span class="special">);</span>
    <span class="identifier">task</span><span class="special">.</span><span class="identifier">set_wait_callback</span><span class="special">(</span><span class="identifier">invoke_lazy_task</span><span class="special">);</span>
    <span class="identifier">boost</span><span class="special">::</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">f</span><span class="special">(</span><span class="identifier">task</span><span class="special">.</span><span class="identifier">get_future</span><span class="special">());</span>

    <span class="identifier">assert</span><span class="special">(</span><span class="identifier">f</span><span class="special">.</span><span class="identifier">get</span><span class="special">()==</span><span class="number">42</span><span class="special">);</span>
<span class="special">}</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.at_thread_exit"></a><a class="link" href="futures.html#thread.synchronization.futures.at_thread_exit" title="Handling Detached Threads and Thread Specific Variables">Handling
        Detached Threads and Thread Specific Variables</a>
</h4></div></div></div>
<p>
          Detached threads pose a problem for objects with thread storage duration.
          If we use a mechanism other than <code class="computeroutput"><span class="identifier">thread</span><span class="special">::</span><span class="identifier">__join</span></code>
          to wait for a <a class="link" href="../thread_management/thread.html" title="Class thread"><code class="computeroutput"><span class="identifier">thread</span></code></a> to complete its work -
          such as waiting for a future to be ready - then the destructors of thread
          specific variables will still be running after the waiting thread has resumed.
          This section explain how the standard mechanism can be used to make such
          synchronization safe by ensuring that the objects with thread storage duration
          are destroyed prior to the future being made ready. e.g.
        </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">find_the_answer</span><span class="special">();</span> <span class="comment">// uses thread specific objects</span>
<span class="keyword">void</span> <span class="identifier">thread_func</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">p</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">p</span><span class="special">.</span><span class="identifier">set_value_at_thread_exit</span><span class="special">(</span><span class="identifier">find_the_answer</span><span class="special">());</span>
<span class="special">}</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">p</span><span class="special">;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread</span> <span class="identifier">t</span><span class="special">(</span><span class="identifier">thread_func</span><span class="special">,</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">p</span><span class="special">));</span>
    <span class="identifier">t</span><span class="special">.</span><span class="identifier">detach</span><span class="special">();</span> <span class="comment">// we're going to wait on the future</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">&lt;&lt;</span><span class="identifier">p</span><span class="special">.</span><span class="identifier">get_future</span><span class="special">().</span><span class="identifier">get</span><span class="special">()&lt;&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          When the call to <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>
          returns, we know that not only is the future value ready, but the thread
          specific variables on the other thread have also been destroyed.
        </p>
<p>
          Such mechanisms are provided for <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">condition_variable</span></code>,
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code> and <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code>.
          e.g.
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">task_executor</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">(</span><span class="keyword">int</span><span class="special">)&gt;</span> <span class="identifier">task</span><span class="special">,</span><span class="keyword">int</span> <span class="identifier">param</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">task</span><span class="special">.</span><span class="identifier">make_ready_at_thread_exit</span><span class="special">(</span><span class="identifier">param</span><span class="special">);</span> <span class="comment">// execute stored task</span>
<span class="special">}</span> <span class="comment">// destroy thread specific and wake threads waiting on futures from task</span>
</pre>
<p>
          Other threads can wait on a future obtained from the task without having
          to worry about races due to the execution of destructors of the thread
          specific objects from the task's thread.
        </p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">condition_variable</span> <span class="identifier">cv</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">mutex</span> <span class="identifier">m</span><span class="special">;</span>
<span class="identifier">complex_type</span> <span class="identifier">the_data</span><span class="special">;</span>
<span class="keyword">bool</span> <span class="identifier">data_ready</span><span class="special">;</span>

<span class="keyword">void</span> <span class="identifier">thread_func</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">unique_lock</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">mutex</span><span class="special">&gt;</span> <span class="identifier">lk</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
    <span class="identifier">the_data</span><span class="special">=</span><span class="identifier">find_the_answer</span><span class="special">();</span>
    <span class="identifier">data_ready</span><span class="special">=</span><span class="keyword">true</span><span class="special">;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">notify_all_at_thread_exit</span><span class="special">(</span><span class="identifier">cv</span><span class="special">,</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">lk</span><span class="special">));</span>
<span class="special">}</span> <span class="comment">// destroy thread specific objects, notify cv, unlock mutex</span>

<span class="keyword">void</span> <span class="identifier">waiting_thread</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">unique_lock</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">mutex</span><span class="special">&gt;</span> <span class="identifier">lk</span><span class="special">(</span><span class="identifier">m</span><span class="special">);</span>
    <span class="keyword">while</span><span class="special">(!</span><span class="identifier">data_ready</span><span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">cv</span><span class="special">.</span><span class="identifier">wait</span><span class="special">(</span><span class="identifier">lk</span><span class="special">);</span>
    <span class="special">}</span>
    <span class="identifier">process</span><span class="special">(</span><span class="identifier">the_data</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
          The waiting thread is guaranteed that the thread specific objects used
          by <code class="computeroutput"><span class="identifier">thread_func</span><span class="special">()</span></code>
          have been destroyed by the time <code class="computeroutput"><span class="identifier">process</span><span class="special">(</span><span class="identifier">the_data</span><span class="special">)</span></code> is called. If the lock on <code class="computeroutput"><span class="identifier">m</span></code> is released and re-acquired after setting
          <code class="computeroutput"><span class="identifier">data_ready</span></code> and before calling
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">notify_all_at_thread_exit</span><span class="special">()</span></code>
          then this does NOT hold, since the thread may return from the wait due
          to a spurious wake-up.
        </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.async"></a><a class="link" href="futures.html#thread.synchronization.futures.async" title="Executing asynchronously">Executing asynchronously</a>
</h4></div></div></div>
<p>
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">async</span></code> is a simple way of running asynchronous
          tasks to make use of the available hardware concurrency. A call to <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">async</span></code> returns a <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span></code>
          that will contain the result of the task. Depending on the launch policy,
          the task is either run asynchronously on its own thread or synchronously
          on whichever thread calls the <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code> or <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code> member functions on that <code class="computeroutput"><span class="identifier">future</span></code>.
        </p>
<p>
          A launch policy of either boost::launch::async, which asks the runtime
          to create an asynchronous thread, or boost::launch::deferred, which indicates
          you simply want to defer the function call until a later time (lazy evaluation).
          This argument is optional - if you omit it your function will use the default
          policy.
        </p>
<p>
          For example, consider computing the sum of a very large array. The first
          task is to not compute asynchronously when the overhead would be significant.
          The second task is to split the work into two pieces, one executed by the
          host thread and one executed asynchronously.
        </p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">parallel_sum</span><span class="special">(</span><span class="keyword">int</span><span class="special">*</span> <span class="identifier">data</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">size</span><span class="special">)</span>
<span class="special">{</span>
  <span class="keyword">int</span> <span class="identifier">sum</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
  <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">size</span> <span class="special">&lt;</span> <span class="number">1000</span> <span class="special">)</span>
    <span class="keyword">for</span> <span class="special">(</span> <span class="keyword">int</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">size</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span> <span class="special">)</span>
      <span class="identifier">sum</span> <span class="special">+=</span> <span class="identifier">data</span><span class="special">[</span><span class="identifier">i</span><span class="special">];</span>
  <span class="keyword">else</span> <span class="special">{</span>
    <span class="keyword">auto</span> <span class="identifier">handle</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">async</span><span class="special">(</span><span class="identifier">parallel_sum</span><span class="special">,</span> <span class="identifier">data</span><span class="special">+</span><span class="identifier">size</span><span class="special">/</span><span class="number">2</span><span class="special">,</span> <span class="identifier">size</span><span class="special">-</span><span class="identifier">size</span><span class="special">/</span><span class="number">2</span><span class="special">);</span>
    <span class="identifier">sum</span> <span class="special">+=</span> <span class="identifier">parallel_sum</span><span class="special">(</span><span class="identifier">data</span><span class="special">,</span> <span class="identifier">size</span><span class="special">/</span><span class="number">2</span><span class="special">);</span>
    <span class="identifier">sum</span> <span class="special">+=</span> <span class="identifier">handle</span><span class="special">.</span><span class="identifier">get</span><span class="special">();</span>
  <span class="special">}</span>
  <span class="keyword">return</span> <span class="identifier">sum</span><span class="special">;</span>
<span class="special">}</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.shared"></a><a class="link" href="futures.html#thread.synchronization.futures.shared" title="Shared Futures">Shared Futures</a>
</h4></div></div></div>
<p>
          <code class="computeroutput"><span class="identifier">shared_future</span></code> is designed
          to be shared between threads, that is to allow multiple concurrent get
          operations.
        </p>
<h6>
<a name="thread.synchronization.futures.shared.h0"></a>
          <span><a name="thread.synchronization.futures.shared.multiple_get"></a></span><a class="link" href="futures.html#thread.synchronization.futures.shared.multiple_get">Multiple get</a>
        </h6>
<p>
          The second <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>
          call in the following example is undefined.
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">bad_second_use</span><span class="special">(</span> <span class="identifier">type</span> <span class="identifier">arg</span> <span class="special">)</span> <span class="special">{</span>

  <span class="keyword">auto</span> <span class="identifier">ftr</span> <span class="special">=</span> <span class="identifier">async</span><span class="special">(</span> <span class="special">[=]{</span> <span class="keyword">return</span> <span class="identifier">work</span><span class="special">(</span> <span class="identifier">arg</span> <span class="special">);</span> <span class="special">}</span> <span class="special">);</span>
    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">cond1</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">use1</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span> <span class="keyword">else</span>
    <span class="special">{</span>
        <span class="identifier">use2</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span>
    <span class="identifier">use3</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span> <span class="comment">// second use is undefined</span>
<span class="special">}</span>
</pre>
<p>
          Using a <code class="computeroutput"><span class="identifier">shared_future</span></code> solves
          the issue
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">good_second_use</span><span class="special">(</span> <span class="identifier">type</span> <span class="identifier">arg</span> <span class="special">)</span> <span class="special">{</span>

   <span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">type</span><span class="special">&gt;</span> <span class="identifier">ftr</span> <span class="special">=</span> <span class="identifier">async</span><span class="special">(</span> <span class="special">[=]{</span> <span class="keyword">return</span> <span class="identifier">work</span><span class="special">(</span> <span class="identifier">arg</span> <span class="special">);</span> <span class="special">}</span> <span class="special">);</span>
    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">cond1</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">use1</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span> <span class="keyword">else</span>
    <span class="special">{</span>
        <span class="identifier">use2</span><span class="special">(</span>  <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span>
    <span class="identifier">use3</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span> <span class="comment">// second use is defined</span>
<span class="special">}</span>
</pre>
<h6>
<a name="thread.synchronization.futures.shared.h1"></a>
          <span><a name="thread.synchronization.futures.shared.share__"></a></span><a class="link" href="futures.html#thread.synchronization.futures.shared.share__">share()</a>
        </h6>
<p>
          Naming the return type when declaring the <code class="computeroutput"><span class="identifier">shared_future</span></code>
          is needed; auto is not available within template argument lists. Here
          <code class="computeroutput"><span class="identifier">share</span><span class="special">()</span></code>
          could be used to simplify the code
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">better_second_use</span><span class="special">(</span> <span class="identifier">type</span> <span class="identifier">arg</span> <span class="special">)</span> <span class="special">{</span>

   <span class="keyword">auto</span> <span class="identifier">ftr</span> <span class="special">=</span> <span class="identifier">async</span><span class="special">(</span> <span class="special">[=]{</span> <span class="keyword">return</span> <span class="identifier">work</span><span class="special">(</span> <span class="identifier">arg</span> <span class="special">);</span> <span class="special">}</span> <span class="special">).</span><span class="identifier">share</span><span class="special">();</span>
    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">cond1</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">use1</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span> <span class="keyword">else</span>
    <span class="special">{</span>
        <span class="identifier">use2</span><span class="special">(</span>  <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span>
    <span class="identifier">use3</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span> <span class="comment">// second use is defined</span>
<span class="special">}</span>
</pre>
<h6>
<a name="thread.synchronization.futures.shared.h2"></a>
          <span><a name="thread.synchronization.futures.shared.writing_on_get__"></a></span><a class="link" href="futures.html#thread.synchronization.futures.shared.writing_on_get__">Writing
          on get()</a>
        </h6>
<p>
          The user can either read or write the future variable.
        </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">write_to_get</span><span class="special">(</span> <span class="identifier">type</span> <span class="identifier">arg</span> <span class="special">)</span> <span class="special">{</span>

   <span class="keyword">auto</span> <span class="identifier">ftr</span> <span class="special">=</span> <span class="identifier">async</span><span class="special">(</span> <span class="special">[=]{</span> <span class="keyword">return</span> <span class="identifier">work</span><span class="special">(</span> <span class="identifier">arg</span> <span class="special">);</span> <span class="special">}</span> <span class="special">).</span><span class="identifier">share</span><span class="special">();</span>
    <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">cond1</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="identifier">use1</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
    <span class="special">}</span> <span class="keyword">else</span>
    <span class="special">{</span>
      <span class="keyword">if</span> <span class="special">(</span> <span class="identifier">cond2</span> <span class="special">)</span>
        <span class="identifier">use2</span><span class="special">(</span>  <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span>
      <span class="keyword">else</span>
        <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">=</span> <span class="identifier">something</span><span class="special">();</span> <span class="comment">// assign to non-const reference.  </span>
    <span class="special">}</span>
    <span class="identifier">use3</span><span class="special">(</span> <span class="identifier">ftr</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span> <span class="special">);</span> <span class="comment">// second use is defined</span>
<span class="special">}</span>
</pre>
<p>
          This works because the <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;&gt;::</span><span class="identifier">get</span><span class="special">()</span></code> function returns a non-const reference
          to the appropriate storage. Of course the access to this storage must be
          ensured by the user. The library doesn't ensure the access to the internal
          storage is thread safe.
        </p>
<p>
          There has been some work by the C++ standard committee on an <code class="computeroutput"><span class="identifier">atomic_future</span></code> that behaves as an <code class="computeroutput"><span class="identifier">atomic</span></code> variable, that is thread_safe,
          and a <code class="computeroutput"><span class="identifier">shared_future</span></code> that
          can be shared between several threads, but there were not enough consensus
          and time to get it ready for C++11.
        </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.make_ready_future"></a><a class="link" href="futures.html#thread.synchronization.futures.make_ready_future" title="Making immediate futures easier">Making
        immediate futures easier</a>
</h4></div></div></div>
<p>
          Some functions may know the value at the point of construction. In these
          cases the value is immediately available, but needs to be returned as a
          future or shared_future. By using make_ready_future a future can be created
          which holds a pre-computed result in its shared state.
        </p>
<p>
          Without these features it is non-trivial to create a future directly from
          a value. First a promise must be created, then the promise is set, and
          lastly the future is retrieved from the promise. This can now be done with
          one operation.
        </p>
<h6>
<a name="thread.synchronization.futures.make_ready_future.h0"></a>
          <span><a name="thread.synchronization.futures.make_ready_future.make_ready_future"></a></span><a class="link" href="futures.html#thread.synchronization.futures.make_ready_future.make_ready_future">make_ready_future</a>
        </h6>
<p>
          This function creates a future for a given value. If no value is given
          then a future&lt;void&gt; is returned. This function is primarily useful
          in cases where sometimes, the return value is immediately available, but
          sometimes it is not. The example below illustrates, that in an error path
          the value is known immediately, however in other paths the function must
          return an eventual value represented as a future.
        </p>
<pre class="programlisting"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">compute</span><span class="special">(</span><span class="keyword">int</span> <span class="identifier">x</span><span class="special">)</span>
<span class="special">{</span>
  <span class="keyword">if</span> <span class="special">(</span><span class="identifier">x</span> <span class="special">==</span> <span class="number">0</span><span class="special">)</span> <span class="keyword">return</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">make_ready_future</span><span class="special">(</span><span class="number">0</span><span class="special">);</span>
  <span class="keyword">if</span> <span class="special">(</span><span class="identifier">x</span> <span class="special">&lt;</span> <span class="number">0</span><span class="special">)</span> <span class="keyword">return</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">make_ready_future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span><span class="special">(</span><span class="string">"Error"</span><span class="special">));</span>
  <span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">f1</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">async</span><span class="special">([]()</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">x</span><span class="special">+</span><span class="number">1</span><span class="special">;</span> <span class="special">});</span>
  <span class="keyword">return</span> <span class="identifier">f1</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          There are two variations of this function. The first takes a value of any
          type, and returns a future of that type. The input value is passed to the
          shared state of the returned future. The second version takes no input
          and returns a future&lt;void&gt;.
        </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.then"></a><a class="link" href="futures.html#thread.synchronization.futures.then" title="Associating future continuations">Associating future
        continuations</a>
</h4></div></div></div>
<p>
          In asynchronous programming, it is very common for one asynchronous operation,
          on completion, to invoke a second operation and pass data to it. The current
          C++ standard does not allow one to register a continuation to a future.
          With <code class="computeroutput"><span class="special">.</span><span class="identifier">then</span></code>,
          instead of waiting for the result, a continuation is "attached"
          to the asynchronous operation, which is invoked when the result is ready.
          Continuations registered using the <code class="computeroutput"><span class="special">.</span><span class="identifier">then</span></code> function will help to avoid blocking
          waits or wasting threads on polling, greatly improving the responsiveness
          and scalability of an application.
        </p>
<p>
          <code class="computeroutput"><span class="identifier">future</span><span class="special">.</span><span class="identifier">then</span><span class="special">()</span></code>
          provides the ability to sequentially compose two futures by declaring one
          to be the continuation of another. With <code class="computeroutput"><span class="special">.</span><span class="identifier">then</span><span class="special">()</span></code>
          the antecedent future is ready (has a value or exception stored in the
          shared state) before the continuation starts as instructed by the lambda
          function.
        </p>
<p>
          In the example below the <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span></code> <code class="computeroutput"><span class="identifier">f2</span></code>
          is registered to be a continuation of <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span></code> <code class="computeroutput"><span class="identifier">f1</span></code>
          using the <code class="computeroutput"><span class="special">.</span><span class="identifier">then</span><span class="special">()</span></code> member function. This operation takes
          a lambda function which describes how <code class="computeroutput"><span class="identifier">f2</span></code>
          should proceed after <code class="computeroutput"><span class="identifier">f1</span></code>
          is ready.
        </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">thread</span><span class="special">/</span><span class="identifier">future</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">;</span>
<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span>
<span class="special">{</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">f1</span> <span class="special">=</span> <span class="identifier">async</span><span class="special">([]()</span> <span class="special">{</span> <span class="keyword">return</span> <span class="number">123</span><span class="special">;</span> <span class="special">});</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span> <span class="identifier">f2</span> <span class="special">=</span> <span class="identifier">f1</span><span class="special">.</span><span class="identifier">then</span><span class="special">([](</span><span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">f</span><span class="special">)</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">f</span><span class="special">.</span><span class="identifier">get</span><span class="special">().</span><span class="identifier">to_string</span><span class="special">();</span> <span class="comment">// here .get() won't block });</span>
<span class="special">}</span>
</pre>
<p>
          One key feature of this function is the ability to chain multiple asynchronous
          operations. In asynchronous programming, it's common to define a sequence
          of operations, in which each continuation executes only when the previous
          one completes. In some cases, the antecedent future produces a value that
          the continuation accepts as input. By using <code class="computeroutput"><span class="identifier">future</span><span class="special">.</span><span class="identifier">then</span><span class="special">()</span></code>, creating a chain of continuations becomes
          straightforward and intuitive:
        </p>
<pre class="programlisting"><span class="identifier">myFuture</span><span class="special">.</span><span class="identifier">then</span><span class="special">(...).</span><span class="identifier">then</span><span class="special">(...).</span><span class="identifier">then</span><span class="special">(...).</span>
</pre>
<p>
          Some points to note are:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
              Each continuation will not begin until the preceding has completed.
            </li>
<li class="listitem">
              If an exception is thrown, the following continuation can handle it
              in a try-catch block
            </li>
</ul></div>
<p>
          Input Parameters:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
              Lambda function: One option which can be considered is to take two
              functions, one for success and one for error handling. However this
              option has not been retained for the moment. The lambda function takes
              a future as its input which carries the exception through. This makes
              propagating exceptions straightforward. This approach also simplifies
              the chaining of continuations.
            </li>
<li class="listitem">
              Executor: Providing an overload to <code class="computeroutput"><span class="special">.</span><span class="identifier">then</span></code>, to take an executor reference
              places great flexibility over the execution of the future in the programmer's
              hand. As described above, often taking a launch policy is not sufficient
              for powerful asynchronous operations. The lifetime of the executor
              must outlive the continuation.
            </li>
<li class="listitem">
              Launch policy: if the additional flexibility that the executor provides
              is not required.
            </li>
</ul></div>
<p>
          Return values: The decision to return a future was based primarily on the
          ability to chain multiple continuations using <code class="computeroutput"><span class="special">.</span><span class="identifier">then</span><span class="special">()</span></code>.
          This benefit of composability gives the programmer incredible control and
          flexibility over their code. Returning a <code class="computeroutput"><span class="identifier">future</span></code>
          object rather than a <code class="computeroutput"><span class="identifier">shared_future</span></code>
          is also a much cheaper operation thereby improving performance. A <code class="computeroutput"><span class="identifier">shared_future</span></code> object is not necessary
          to take advantage of the chaining feature. It is also easy to go from a
          <code class="computeroutput"><span class="identifier">future</span></code> to a <code class="computeroutput"><span class="identifier">shared_future</span></code> when needed using future::share().
        </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="thread.synchronization.futures.reference"></a><a class="link" href="futures.html#thread.synchronization.futures.reference" title="Futures Reference">Futures Reference</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_state">Enumeration
          <code class="computeroutput"><span class="identifier">state</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_errc">Enumeration
          <code class="computeroutput"><span class="identifier">future_errc</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.launch">Enumeration
          <code class="computeroutput"><span class="identifier">launch</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.is_error_code_enum">Specialization
          <code class="computeroutput"><span class="identifier">is_error_code_enum</span><span class="special">&lt;</span><span class="identifier">future_errc</span><span class="special">&gt;</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_error_code">Non-member
          function <code class="computeroutput"><span class="identifier">make_error_code</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_error_condition">Non-member
          function <code class="computeroutput"><span class="identifier">make_error_condition</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_category">Non-member
          function <code class="computeroutput"><span class="identifier">future_category</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error">Class
          <code class="computeroutput"><span class="identifier">future_error</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_status">Enumeration
          <code class="computeroutput"><span class="identifier">future_status</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error0">Class
          <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code> EXPERIMENTAL</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future"><code class="computeroutput"><span class="identifier">future</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future"><code class="computeroutput"><span class="identifier">shared_future</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise"><code class="computeroutput"><span class="identifier">promise</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task"><code class="computeroutput"><span class="identifier">packaged_task</span></code> class template</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.decay_copy">Non-member
          function <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.async">Non-member
          function <code class="computeroutput"><span class="identifier">async</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.wait_for_any">Non-member
          function <code class="computeroutput"><span class="identifier">wait_for_any</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.wait_for_all">Non-member
          function <code class="computeroutput"><span class="identifier">wait_for_all</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.when_all">Non-member
          function <code class="computeroutput"><span class="identifier">when_all</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.when_any">Non-member
          function <code class="computeroutput"><span class="identifier">when_any</span><span class="special">()</span></code>
          - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_ready_future">Non-member
          function <code class="computeroutput"><span class="identifier">make_ready_future</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_exceptional">Non-member
          function <code class="computeroutput"><span class="identifier">make_exceptional</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_future">Non-member
          function <code class="computeroutput"><span class="identifier">make_future</span><span class="special">()</span></code>
          DEPRECATED</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.make_shared_future">Non-member
          function <code class="computeroutput"><span class="identifier">make_shared_future</span><span class="special">()</span></code> DEPRECATED</a></span></dt>
</dl></div>
<pre class="programlisting"><span class="comment">//#include &lt;boost/thread/future.hpp&gt;</span>

<span class="keyword">namespace</span> <span class="identifier">boost</span>
<span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">future_state</span>  <span class="comment">// EXTENSION</span>
  <span class="special">{</span>
    <span class="keyword">enum</span> <span class="identifier">state</span> <span class="special">{</span><span class="identifier">uninitialized</span><span class="special">,</span> <span class="identifier">waiting</span><span class="special">,</span> <span class="identifier">ready</span><span class="special">,</span> <span class="identifier">moved</span><span class="special">};</span>
  <span class="special">}</span>

  <span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">future_errc</span>
  <span class="special">{</span>
    <span class="identifier">broken_promise</span><span class="special">,</span>
    <span class="identifier">future_already_retrieved</span><span class="special">,</span>
    <span class="identifier">promise_already_satisfied</span><span class="special">,</span>
    <span class="identifier">no_state</span>
  <span class="special">};</span>

  <span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">launch</span>
  <span class="special">{</span>
    <span class="identifier">none</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
    <span class="identifier">async</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
    <span class="identifier">deferred</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
    <span class="identifier">executor</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
    <span class="identifier">inherit</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
    <span class="identifier">any</span> <span class="special">=</span> <span class="identifier">async</span> <span class="special">|</span> <span class="identifier">deferred</span>
  <span class="special">};</span>

  <span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">future_status</span> <span class="special">{</span>
    <span class="identifier">ready</span><span class="special">,</span>  <span class="identifier">timeout</span><span class="special">,</span> <span class="identifier">deferred</span>
  <span class="special">};</span>

  <span class="keyword">namespace</span> <span class="identifier">system</span>
  <span class="special">{</span>
    <span class="keyword">template</span> <span class="special">&lt;&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">is_error_code_enum</span><span class="special">&lt;</span><span class="identifier">future_errc</span><span class="special">&gt;</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">true_type</span> <span class="special">{};</span>

    <span class="identifier">error_code</span> <span class="identifier">make_error_code</span><span class="special">(</span><span class="identifier">future_errc</span> <span class="identifier">e</span><span class="special">);</span>

    <span class="identifier">error_condition</span> <span class="identifier">make_error_condition</span><span class="special">(</span><span class="identifier">future_errc</span> <span class="identifier">e</span><span class="special">);</span>
  <span class="special">}</span>

  <span class="keyword">const</span> <span class="identifier">system</span><span class="special">::</span><span class="identifier">error_category</span><span class="special">&amp;</span> <span class="identifier">future_category</span><span class="special">();</span>

  <span class="keyword">class</span> <span class="identifier">future_error</span><span class="special">;</span>

  <span class="keyword">class</span> <span class="identifier">exceptional_ptr</span><span class="special">;</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
  <span class="keyword">class</span> <span class="identifier">promise</span><span class="special">;</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">promise</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&amp;</span> <span class="identifier">x</span><span class="special">,</span> <span class="identifier">promise</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&amp;</span> <span class="identifier">y</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="keyword">namespace</span> <span class="identifier">container</span> <span class="special">{</span>
    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">uses_allocator</span><span class="special">&lt;</span><span class="identifier">promise</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;::</span> <span class="identifier">true_type</span><span class="special">;</span>
  <span class="special">}</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
  <span class="keyword">class</span> <span class="identifier">future</span><span class="special">;</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
  <span class="keyword">class</span> <span class="identifier">shared_future</span><span class="special">;</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">S</span><span class="special">&gt;</span>
  <span class="keyword">class</span> <span class="identifier">packaged_task</span><span class="special">;</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">S</span><span class="special">&gt;</span> <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;&amp;,</span> <span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;&amp;)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">S</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">struct</span> <span class="identifier">uses_allocator</span><span class="special">&lt;</span><span class="identifier">packaged_task</span> <span class="special">&lt;</span><span class="identifier">S</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;;</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">()&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
    <span class="identifier">async</span><span class="special">(</span><span class="identifier">F</span> <span class="identifier">f</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">()&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
    <span class="identifier">async</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span> <span class="identifier">f</span><span class="special">);</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
    <span class="identifier">async</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
    <span class="identifier">async</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
    <span class="identifier">async</span><span class="special">(</span><span class="identifier">Executor</span> <span class="special">&amp;</span><span class="identifier">ex</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iterator</span><span class="special">&gt;</span>
    <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">Iterator</span> <span class="identifier">begin</span><span class="special">,</span><span class="identifier">Iterator</span> <span class="identifier">end</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">FS</span><span class="special">&gt;</span>
    <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">Fs</span><span class="special">&amp;...</span> <span class="identifier">fs</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iterator</span><span class="special">&gt;</span>
    <span class="identifier">Iterator</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">Iterator</span> <span class="identifier">begin</span><span class="special">,</span><span class="identifier">Iterator</span> <span class="identifier">end</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">Fs</span><span class="special">&gt;</span>
    <span class="keyword">unsigned</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">Fs</span><span class="special">&amp;...</span> <span class="identifier">fs</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">InputIterator</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">InputIterator</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">&gt;&gt;</span>
    <span class="identifier">when_all</span><span class="special">(</span><span class="identifier">InputIterator</span> <span class="identifier">first</span><span class="special">,</span> <span class="identifier">InputIterator</span> <span class="identifier">last</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">T</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;...&gt;</span> <span class="identifier">when_all</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;...</span> <span class="identifier">futures</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">InputIterator</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">InputIterator</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">&gt;&gt;</span>
    <span class="identifier">when_any</span><span class="special">(</span><span class="identifier">InputIterator</span> <span class="identifier">first</span><span class="special">,</span> <span class="identifier">InputIterator</span> <span class="identifier">last</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">T</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;...&gt;</span> <span class="identifier">when_any</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;...</span> <span class="identifier">futures</span><span class="special">);</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span> <span class="identifier">make_future</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">value</span><span class="special">);</span>  <span class="comment">// DEPRECATED</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;</span> <span class="identifier">make_future</span><span class="special">();</span>  <span class="comment">// DEPRECATED</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
    <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span> <span class="identifier">make_ready_future</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">value</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;</span> <span class="identifier">make_ready_future</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>

  <span class="identifier">exceptional_ptr</span> <span class="identifier">make_exceptional</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">ex</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
    <span class="identifier">exceptional_ptr</span> <span class="identifier">make_exceptional</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">ex</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
  <span class="identifier">exceptional_ptr</span> <span class="identifier">make_exceptional</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>


  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">shared_future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span> <span class="identifier">make_shared_future</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">value</span><span class="special">);</span>  <span class="comment">// DEPRECATED</span>
  <span class="identifier">shared_future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;</span> <span class="identifier">make_shared_future</span><span class="special">();</span>  <span class="comment">// DEPRECATED</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.future_state"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state">Enumeration
          <code class="computeroutput"><span class="identifier">state</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">future_state</span>
<span class="special">{</span>
  <span class="keyword">enum</span> <span class="identifier">state</span> <span class="special">{</span><span class="identifier">uninitialized</span><span class="special">,</span> <span class="identifier">waiting</span><span class="special">,</span> <span class="identifier">ready</span><span class="special">,</span> <span class="identifier">moved</span><span class="special">};</span>
<span class="special">}</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.future_errc"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_errc" title="Enumeration future_errc">Enumeration
          <code class="computeroutput"><span class="identifier">future_errc</span></code></a>
</h5></div></div></div>
<pre class="programlisting"> <span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">future_errc</span>
 <span class="special">{</span>
   <span class="identifier">broken_promise</span> <span class="special">=</span> <span class="identifier">implementation</span> <span class="identifier">defined</span><span class="special">,</span>
   <span class="identifier">future_already_retrieved</span> <span class="special">=</span> <span class="identifier">implementation</span> <span class="identifier">defined</span><span class="special">,</span>
   <span class="identifier">promise_already_satisfied</span> <span class="special">=</span> <span class="identifier">implementation</span> <span class="identifier">defined</span><span class="special">,</span>
   <span class="identifier">no_state</span> <span class="special">=</span> <span class="identifier">implementation</span> <span class="identifier">defined</span>
 <span class="special">}</span>


<span class="identifier">The</span> <span class="keyword">enum</span> <span class="identifier">values</span> <span class="identifier">of</span> <span class="identifier">future_errc</span> <span class="identifier">are</span> <span class="identifier">distinct</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="identifier">zero</span><span class="special">.</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.launch"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.launch" title="Enumeration launch">Enumeration
          <code class="computeroutput"><span class="identifier">launch</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">launch</span>
<span class="special">{</span>
  <span class="identifier">none</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
  <span class="identifier">async</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
  <span class="identifier">deferred</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
  <span class="identifier">executor</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
  <span class="identifier">inherit</span> <span class="special">=</span> <span class="identifier">unspecified</span><span class="special">,</span>
  <span class="identifier">any</span> <span class="special">=</span> <span class="identifier">async</span> <span class="special">|</span> <span class="identifier">deferred</span>
<span class="special">};</span>
</pre>
<p>
            The enum type launch is a bitmask type with launch::async and launch::deferred
            denoting individual bits.
          </p>
<p>
            A future created with <code class="computeroutput"><span class="identifier">promise</span><span class="special">&lt;&gt;</span></code> or with a <code class="computeroutput"><span class="identifier">packaged_task</span><span class="special">&lt;&gt;</span></code> or with <code class="computeroutput"><span class="identifier">make_ready_future</span></code>/<code class="computeroutput"><span class="identifier">make_exceptional_future</span></code> (has no associated
            launch policy), has an implicit a launch policy of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">none</span></code>.
          </p>
<p>
            A future created by <code class="computeroutput"><span class="identifier">async</span><span class="special">(</span><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span><span class="special">,</span> <span class="special">...)</span></code>
            or <code class="computeroutput"><span class="special">::</span><span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span><span class="special">,</span> <span class="special">...)</span></code>
            has associated a launch policy <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>.
            A future created by <code class="computeroutput"><span class="identifier">async</span><span class="special">(</span><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span><span class="special">,</span> <span class="special">...)</span></code>
            or <code class="computeroutput"><span class="special">::</span><span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span><span class="special">,</span> <span class="special">...)</span></code>
            has associated a launch policy <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>.
            A future created by <code class="computeroutput"><span class="identifier">async</span><span class="special">(</span><span class="identifier">Executor</span><span class="special">,</span> <span class="special">...)</span></code>
            or <code class="computeroutput"><span class="special">::</span><span class="identifier">then</span><span class="special">(</span><span class="identifier">Executor</span><span class="special">,</span> <span class="special">...)</span></code>
            or <code class="computeroutput"><span class="special">::</span><span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span><span class="special">::</span><span class="identifier">executor</span><span class="special">,</span> <span class="special">...)</span></code>
            has associated a launch policy <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">executor</span></code>.
            A future created by <code class="computeroutput"><span class="identifier">async</span><span class="special">(...)</span></code> or <code class="computeroutput"><span class="special">::</span><span class="identifier">then</span><span class="special">(...)</span></code>
            has associated a launch policy <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">none</span></code>.
          </p>
<p>
            A future created by <code class="computeroutput"><span class="special">::</span><span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span><span class="special">::</span><span class="identifier">inherit</span><span class="special">,</span> <span class="special">...)</span></code>
            has associated a launch policy parent future.
          </p>
<p>
            The <code class="computeroutput"><span class="identifier">executor</span></code> and the
            <code class="computeroutput"><span class="identifier">inherit</span></code> launch policies
            have a sense only can be user only on <code class="computeroutput"><span class="identifier">then</span><span class="special">()</span></code>.
          </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.is_error_code_enum"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.is_error_code_enum" title="Specialization is_error_code_enum&lt;future_errc&gt;">Specialization
          <code class="computeroutput"><span class="identifier">is_error_code_enum</span><span class="special">&lt;</span><span class="identifier">future_errc</span><span class="special">&gt;</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">system</span>
<span class="special">{</span>
  <span class="keyword">template</span> <span class="special">&lt;&gt;</span>
  <span class="keyword">struct</span> <span class="identifier">is_error_code_enum</span><span class="special">&lt;</span><span class="identifier">future_errc</span><span class="special">&gt;</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">true_type</span> <span class="special">{};</span>

<span class="special">}</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.make_error_code"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.make_error_code" title="Non-member function make_error_code()">Non-member
          function <code class="computeroutput"><span class="identifier">make_error_code</span><span class="special">()</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">system</span>
<span class="special">{</span>
  <span class="identifier">error_code</span> <span class="identifier">make_error_code</span><span class="special">(</span><span class="identifier">future_errc</span> <span class="identifier">e</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">error_code</span><span class="special">(</span><span class="keyword">static_cast</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;(</span><span class="identifier">e</span><span class="special">),</span>
                  <span class="identifier">future_category</span><span class="special">())</span></code>.
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.make_error_condition"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.make_error_condition" title="Non-member function make_error_condition()">Non-member
          function <code class="computeroutput"><span class="identifier">make_error_condition</span><span class="special">()</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">system</span>
<span class="special">{</span>
  <span class="identifier">error_condition</span> <span class="identifier">make_error_condition</span><span class="special">(</span><span class="identifier">future_errc</span> <span class="identifier">e</span><span class="special">);</span>
<span class="special">}</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">error_condition</span><span class="special">(</span><span class="keyword">static_cast</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;(</span><span class="identifier">e</span><span class="special">),</span> <span class="identifier">future_category</span><span class="special">())</span></code>.
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.future_category"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_category" title="Non-member function future_category()">Non-member
          function <code class="computeroutput"><span class="identifier">future_category</span><span class="special">()</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">const</span> <span class="identifier">system</span><span class="special">::</span><span class="identifier">error_category</span><span class="special">&amp;</span> <span class="identifier">future_category</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  A reference to an object of a type derived from class error_category.
                </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                  The object's <code class="computeroutput"><span class="identifier">default_error_condition</span></code>
                  and equivalent virtual functions behave as specified for the class
                  <code class="computeroutput"><span class="identifier">system</span><span class="special">::</span><span class="identifier">error_category</span></code>. The object's
                  <code class="computeroutput"><span class="identifier">name</span></code> virtual function
                  returns a pointer to the string "future".
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.future_error"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_error" title="Class future_error">Class
          <code class="computeroutput"><span class="identifier">future_error</span></code></a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error.constructor">Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error.code">Member
            function <code class="computeroutput"><span class="identifier">code</span><span class="special">()</span></code></a></span></dt>
</dl></div>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">future_error</span>
    <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">future_error</span><span class="special">(</span><span class="identifier">system</span><span class="special">::</span><span class="identifier">error_code</span> <span class="identifier">ec</span><span class="special">);</span>

    <span class="keyword">const</span> <span class="identifier">system</span><span class="special">::</span><span class="identifier">error_code</span><span class="special">&amp;</span> <span class="identifier">code</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">no_except</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.future_error.constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_error.constructor" title="Constructor">Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">future_error</span><span class="special">(</span><span class="identifier">system</span><span class="special">::</span><span class="identifier">error_code</span> <span class="identifier">ec</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a future_error.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">code</span><span class="special">()==</span><span class="identifier">ec</span></code>
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.future_error.code"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_error.code" title="Member function code()">Member
            function <code class="computeroutput"><span class="identifier">code</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">const</span> <span class="identifier">system</span><span class="special">::</span><span class="identifier">error_code</span><span class="special">&amp;</span> <span class="identifier">code</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">no_except</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    The value of <code class="computeroutput"><span class="identifier">ec</span></code>
                    that was passed to the object's constructor.
                  </p></dd>
</dl>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.future_status"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_status" title="Enumeration future_status">Enumeration
          <code class="computeroutput"><span class="identifier">future_status</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">future_status</span> <span class="special">{</span>
  <span class="identifier">ready</span><span class="special">,</span>  <span class="identifier">timeout</span><span class="special">,</span> <span class="identifier">deferred</span>
<span class="special">};</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.future_error0"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_error0" title="Class exceptional_ptr EXPERIMENTAL">Class
          <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code> EXPERIMENTAL</a>
</h5></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.future_error.constructor0">Constructor</a></span></dt></dl></div>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">exceptional_ptr</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="identifier">exceptional_ptr</span><span class="special">();</span>
  <span class="keyword">explicit</span> <span class="identifier">exceptional_ptr</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">ex</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">E</span><span class="special">&gt;</span>
  <span class="keyword">explicit</span> <span class="identifier">exceptional_ptr</span><span class="special">(</span><span class="identifier">E</span><span class="special">&amp;&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
<span class="special">};</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.future_error.constructor0"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.future_error.constructor0" title="Constructor">Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">exceptional_ptr</span><span class="special">();</span>
<span class="keyword">explicit</span> <span class="identifier">exceptional_ptr</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">ex</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">E</span><span class="special">&gt;</span>
<span class="keyword">explicit</span> <span class="identifier">exceptional_ptr</span><span class="special">(</span><span class="identifier">E</span><span class="special">&amp;&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    The exception that is passed in to the constructor or the current
                    exception if no parameter is moved into the constructed <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code> if it is an
                    rvalue. Otherwise the exception is copied into the constructed
                    <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code>.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span>
                    <span class="special">==</span> <span class="keyword">true</span>
                    <span class="special">&amp;&amp;</span> <span class="identifier">is_ready</span><span class="special">()</span> <span class="special">=</span>
                    <span class="keyword">true</span> <span class="special">&amp;&amp;</span>
                    <span class="identifier">has_value</span><span class="special">()</span>
                    <span class="special">=</span> <span class="keyword">false</span></code>
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.unique_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code> class template</a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.default_constructor">Default
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.destructor">Destructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.move_constructor">Move
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.unwrap_move_constructor">Unwrap
            Move Constructor - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.move_assignment">Move
            Assignment Operator</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.swap">Member
            function <code class="computeroutput"><span class="identifier">swap</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.get">Member
            function <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.get_or">Member
            function <code class="computeroutput"><span class="identifier">get_or</span><span class="special">()</span></code>
            - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.wait">Member
            function <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.timed_wait_duration">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
            DEPRECATED SINCE V3.0.0</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.timed_wait_absolute">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
            DEPRECATED SINCE V3.0.0</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.wait_for">Member
            function <code class="computeroutput"><span class="identifier">wait_for</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.wait_until">Member
            function <code class="computeroutput"><span class="identifier">wait_until</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.valid">Member
            function <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready">Member
            function <code class="computeroutput"><span class="identifier">is_ready</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.has_value">Member
            function <code class="computeroutput"><span class="identifier">has_value</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.has_exception">Member
            function <code class="computeroutput"><span class="identifier">has_exception</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.get_exception_ptr">Member
            function <code class="computeroutput"><span class="identifier">get_exception_ptr</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.get_state">Member
            function <code class="computeroutput"><span class="identifier">get_state</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.share">Member
            function <code class="computeroutput"><span class="identifier">share</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.then">Member
            function <code class="computeroutput"><span class="identifier">then</span><span class="special">()</span></code>
            - EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.unique_future.unwrap">Member
            function <code class="computeroutput"><span class="identifier">unwrap</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
</dl></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
<span class="keyword">class</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a>
<span class="special">{</span>

<span class="keyword">public</span><span class="special">:</span>
  <span class="keyword">typedef</span> <span class="identifier">R</span> <span class="identifier">value_type</span><span class="special">;</span>  <span class="comment">// EXTENSION</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">rhs</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">rhs</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">()</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="special">~</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">();</span>

  <span class="comment">// move support</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&gt;&amp;&amp;</span> <span class="identifier">rhs</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="comment">// factories</span>
  <span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">share</span><span class="special">();</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">then</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">S</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">then</span><span class="special">(</span><span class="identifier">Ex</span><span class="special">&amp;</span> <span class="identifier">executor</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

  <span class="identifier">see</span> <span class="identifier">below</span> <span class="identifier">unwrap</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="identifier">fallback_to</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>

  <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="comment">// retrieving the value</span>
  <span class="identifier">see</span> <span class="identifier">below</span> <span class="identifier">get</span><span class="special">();</span>
  <span class="identifier">see</span> <span class="identifier">below</span> <span class="identifier">get_or</span><span class="special">(</span><span class="identifier">see</span> <span class="identifier">below</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>

  <span class="identifier">exception_ptr</span> <span class="identifier">get_exception_ptr</span><span class="special">();</span> <span class="comment">// EXTENSION</span>

  <span class="comment">// functions to check state</span>
  <span class="keyword">bool</span> <span class="identifier">valid</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">bool</span> <span class="identifier">is_ready</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">bool</span> <span class="identifier">has_exception</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">bool</span> <span class="identifier">has_value</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>

  <span class="comment">// waiting for the result to be ready</span>
  <span class="keyword">void</span> <span class="identifier">wait</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
  <span class="identifier">future_status</span> <span class="identifier">wait_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
  <span class="identifier">future_status</span> <span class="identifier">wait_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>

<span class="preprocessor">#if</span> <span class="identifier">defined</span> <span class="identifier">BOOST_THREAD_USES_DATE_TIME</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
  <span class="keyword">bool</span> <span class="identifier">timed_wait</span><span class="special">(</span><span class="identifier">Duration</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">rel_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// DEPRECATED SINCE V3.0.0</span>
  <span class="keyword">bool</span> <span class="identifier">timed_wait_until</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">system_time</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">abs_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// DEPRECATED SINCE V3.0.0</span>
<span class="preprocessor">#endif</span>
  <span class="keyword">typedef</span> <span class="identifier">future_state</span><span class="special">::</span><span class="identifier">state</span> <span class="identifier">state</span><span class="special">;</span>  <span class="comment">// EXTENSION</span>
  <span class="identifier">state</span> <span class="identifier">get_state</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>  <span class="comment">// EXTENSION</span>
<span class="special">};</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.default_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.default_constructor" title="Default Constructor">Default
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs an uninitialized <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a>.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span></code></a> returns <code class="computeroutput"><span class="keyword">false</span></code>. <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.destructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.destructor" title="Destructor">Destructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="special">~</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Destroys <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.move_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.move_constructor" title="Move Constructor">Move
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a>, and transfers
                    ownership of the shared state associated with <code class="computeroutput"><span class="identifier">other</span></code>
                    to <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns the value of <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code> prior to the call. <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a>. If <code class="computeroutput"><span class="identifier">other</span></code> was associated with a
                    shared state, that result is now associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                    <code class="computeroutput"><span class="identifier">other</span></code> is not
                    associated with any shared state.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.unwrap_move_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.unwrap_move_constructor" title="Unwrap Move Constructor - EXTENSION">Unwrap
            Move Constructor - EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
                This constructor is experimental and subject to change in future
                versions. There are not too much tests yet, so it is possible that
                you can find out some trivial bugs :(
              </p></td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Requires:</span></dt>
<dd>
<p>
                    <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">valid</span><span class="special">()</span></code>.
                  </p>
<p>
                    [Effects:
                  </p>
<p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a>, and transfers
                    ownership of the shared state associated with <code class="computeroutput"><span class="identifier">other</span></code>
                    and unwrapping the inner future (see <code class="computeroutput"><span class="identifier">unwrap</span><span class="special">()</span></code>).
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns the value of <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code> prior to the call. <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a>. The associated
                    shared state is now unwrapped and the inner future shared state
                    is associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>. <code class="computeroutput"><span class="identifier">other</span></code>
                    is not associated with any shared state, <code class="computeroutput"><span class="special">!</span>
                    <span class="identifier">other</span><span class="special">.</span><span class="identifier">valid</span><span class="special">()</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.move_assignment"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.move_assignment" title="Move Assignment Operator">Move
            Assignment Operator</a>
</h6></div></div></div>
<pre class="programlisting"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Transfers ownership of the shared state associated with <code class="computeroutput"><span class="identifier">other</span></code> to <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns the value of <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code> prior to the call. <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a>. If <code class="computeroutput"><span class="identifier">other</span></code> was associated with a
                    shared state, that result is now associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                    <code class="computeroutput"><span class="identifier">other</span></code> is not
                    associated with any shared state. If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> was associated with an asynchronous
                    result prior to the call, that result no longer has an associated
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> instance.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.swap"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.swap" title="Member function swap()">Member
            function <code class="computeroutput"><span class="identifier">swap</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> <span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">no_except</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Swaps ownership of the shared states associated with <code class="computeroutput"><span class="identifier">other</span></code> and <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns the value of <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code> prior to the call. <code class="computeroutput"><span class="identifier">other</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code>
                    returns the value of <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code> prior to the call. If <code class="computeroutput"><span class="identifier">other</span></code> was associated with a
                    shared state, that result is now associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    otherwise <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    has no associated result. If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> was associated with a shared
                    state, that result is now associated with <code class="computeroutput"><span class="identifier">other</span></code>,
                    otherwise <code class="computeroutput"><span class="identifier">other</span></code>
                    has no associated result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.get"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get" title="Member function get()">Member
            function <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">R</span> <span class="identifier">get</span><span class="special">();</span>
<span class="identifier">R</span><span class="special">&amp;</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">get</span><span class="special">();</span>
<span class="keyword">void</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready as-if by a call to <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.wait" title="Member function wait()"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">wait</span><span class="special">()</span></code></a>,
                    and retrieves the result (whether that is a value or an exception).
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">get</span><span class="special">()</span></code>
                    return the stored reference.
                  </p>
<p>
                    - <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code>,
                    there is no return value.
                  </p>
<p>
                    - <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code>
                    returns an rvalue-reference to the value stored in the shared
                    state.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code>. <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception stored in the shared state in place of a value.
                  </p>
</dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.get_or"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_or" title="Member function get_or() - EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">get_or</span><span class="special">()</span></code>
            - EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">R</span> <span class="identifier">get_or</span><span class="special">(</span><span class="identifier">R</span><span class="special">&amp;&amp;</span> <span class="identifier">v</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
<span class="identifier">R</span> <span class="identifier">get_or</span><span class="special">(</span><span class="identifier">R</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">v</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
<span class="identifier">R</span><span class="special">&amp;</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">get_or</span><span class="special">(</span><span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">v</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
<span class="keyword">void</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">get_or</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are experimental and subject to change in future
                versions. There are not too much tests yet, so it is possible that
                you can find out some trivial bugs :(
              </p></td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready as-if by a call to <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.wait" title="Member function wait()"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">wait</span><span class="special">()</span></code></a>,
                    and depending on whether the shared state <code class="computeroutput"><span class="identifier">has_value</span><span class="special">()</span></code> the retrieves the result.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">get_or</span><span class="special">(</span><span class="identifier">v</span><span class="special">)</span></code>
                    return the stored reference if has_value() and the passes parameter
                    otherwise.
                  </p>
<p>
                    - <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">get_or</span><span class="special">()</span></code>,
                    there is no return value, but the function doesn't throws even
                    if the shared state contained an exception.
                  </p>
<p>
                    - <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">get_or</span><span class="special">(</span><span class="identifier">v</span><span class="special">)</span></code>
                    returns an rvalue-reference to the value stored in the shared
                    state if <code class="computeroutput"><span class="identifier">has_value</span><span class="special">()</span></code> and an rvalue-reference build
                    with the parameter <code class="computeroutput"><span class="identifier">v</span></code>.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code>. <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">get_or</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.wait"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.wait" title="Member function wait()">Member
            function <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">wait</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready. If the result is not ready on entry, and the result has
                    a <span class="emphasis"><em>wait callback</em></span> set, that callback is invoked
                    prior to waiting.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code>. <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.timed_wait_duration"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.timed_wait_duration" title="Member function timed_wait() DEPRECATED SINCE V3.0.0">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
            DEPRECATED SINCE V3.0.0</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
<span class="keyword">bool</span> <span class="identifier">timed_wait</span><span class="special">(</span><span class="identifier">Duration</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">wait_duration</span><span class="special">);</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top">
<p>
                DEPRECATED since 3.00.
              </p>
<p>
                Use instead <a class="link" href="condvar_ref.html#thread.synchronization.condvar_ref.condition_variable.wait_for" title="template &lt;class Rep, class Period&gt; cv_status wait_for(boost::unique_lock&lt;boost::mutex&gt;&amp; lock, const chrono::duration&lt;Rep, Period&gt;&amp; rel_time)"><code class="computeroutput"><span class="identifier">wait_for</span></code></a>.
              </p>
</td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time specified by <code class="computeroutput"><span class="identifier">wait_duration</span></code>
                    has elapsed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, and that result is ready before
                    the specified time has elapsed, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>. <code class="computeroutput"><span class="identifier">Duration</span></code> must be a type that
                    meets the Boost.DateTime time duration requirements.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.timed_wait_absolute"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.timed_wait_absolute" title="Member function timed_wait() DEPRECATED SINCE V3.0.0">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
            DEPRECATED SINCE V3.0.0</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">timed_wait</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">system_time</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">wait_timeout</span><span class="special">);</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top">
<p>
                DEPRECATED since 3.00.
              </p>
<p>
                Use instead <a class="link" href="condvar_ref.html#thread.synchronization.condvar_ref.condition_variable.wait_until" title="template &lt;class Clock, class Duration&gt; cv_status wait_until(boost::unique_lock&lt;boost::mutex&gt;&amp; lock, const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time)"><code class="computeroutput"><span class="identifier">wait_until</span></code></a>.
              </p>
</td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time point specified by <code class="computeroutput"><span class="identifier">wait_timeout</span></code>
                    has passed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, and that result is ready before
                    the specified time has passed, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.wait_for"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.wait_for" title="Member function wait_for()">Member
            function <code class="computeroutput"><span class="identifier">wait_for</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
<span class="identifier">future_status</span> <span class="identifier">wait_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time specified by <code class="computeroutput"><span class="identifier">wait_duration</span></code>
                    has elapsed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    if the shared state contains a deferred function. (Not implemented
                    yet)
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">ready</span></code>
                    if the shared state is ready.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">timeout</span></code>
                    if the function is returning because the relative timeout specified
                    by <code class="computeroutput"><span class="identifier">rel_time</span></code> has
                    expired.
                  </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">wait_for</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>. <code class="computeroutput"><span class="identifier">Duration</span></code> must be a type that
                    meets the Boost.DateTime time duration requirements.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.wait_until"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.wait_until" title="Member function wait_until()">Member
            function <code class="computeroutput"><span class="identifier">wait_until</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
<span class="identifier">future_status</span> <span class="identifier">wait_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time point specified by <code class="computeroutput"><span class="identifier">wait_timeout</span></code>
                    has passed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    if the shared state contains a deferred function. (Not implemented
                    yet)
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">ready</span></code>
                    if the shared state is ready.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">timeout</span></code>
                    if the function is returning because the absolute timeout specified
                    by <code class="computeroutput"><span class="identifier">absl_time</span></code>
                    has reached.
                  </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">wait_until</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.valid"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.valid" title="Member function valid()">Member
            function <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">valid</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                    The result of this function is not stable and that the future
                    could become invalid even if the function returned true or vice-versa.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.is_ready"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.is_ready" title="Member function is_ready() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">is_ready</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">is_ready</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state and that result is ready for
                    retrieval, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                    The result of this function is not stable and that the future
                    could become not ready even if the function returned true or
                    vice-versa.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.has_value"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.has_value" title="Member function has_value() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">has_value</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">has_value</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, that result is ready for retrieval,
                    and the result is a stored value, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                    The result of this function is not stable and the future could
                    lost its value even if the function returned true or vice-versa.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.has_exception"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.has_exception" title="Member function has_exception() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">has_exception</span><span class="special">()</span></code> EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">has_exception</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, that result is ready for retrieval,
                    and the result is a stored exception, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                    The result of this function is not stable and the future could
                    lost its exception even if the function returned true or vice-versa.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.get_exception_ptr"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_exception_ptr" title="Member function get_exception_ptr() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">get_exception_ptr</span><span class="special">()</span></code> EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">exception_ptr</span> <span class="identifier">get_exception_ptr</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready. If the result is not ready on entry, and the result has
                    a <span class="emphasis"><em>wait callback</em></span> set, that callback is invoked
                    prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    an exception_ptr, storing or not an exception.
                  </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                    The result of this function is not stable and the future could
                    lost its exception even if the function returned a valid <code class="computeroutput"><span class="identifier">exception_ptr</span></code> or vice-versa.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Whatever <code class="computeroutput"><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">lock</span><span class="special">()/</span><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">unlock</span><span class="special">()</span></code> can throw.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.get_state"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.get_state" title="Member function get_state() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">get_state</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">state</span> <span class="identifier">get_state</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Determine the state of the shared state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    if any.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state. <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a> if the shared
                    state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is ready for retrieval,
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">waiting</span></code></a> otherwise.
                  </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                    The result of this function is not stable.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.share"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.share" title="Member function share()">Member
            function <code class="computeroutput"><span class="identifier">share</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">share</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">move</span><span class="special">(*</span><span class="keyword">this</span><span class="special">))</span></code>.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">valid</span><span class="special">()</span>
                    <span class="special">==</span> <span class="keyword">false</span></code>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.then"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.then" title="Member function then() - EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">then</span><span class="special">()</span></code>
            - EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="identifier">then</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">S</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="identifier">then</span><span class="special">(</span><span class="identifier">Ex</span><span class="special">&amp;</span> <span class="identifier">executor</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are experimental and subject to change in future
                versions. There are not too much tests yet, so it is possible that
                you can find out some trivial bugs :(
              </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are based on the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3634.pdf" target="_top"><span class="bold"><strong>N3634 - Improvements to std::future&lt;T&gt; and related
                APIs</strong></span></a> C++1y proposal by N. Gustafsson, A. Laksberg,
                H. Sutter, S. Mithani.
              </p></td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    The three functions differ only by input parameters. The first
                    only takes a callable object which accepts a future object as
                    a parameter. The second function takes an executor as the first
                    parameter and a callable object as the second parameter. The
                    third function takes a launch policy as the first parameter and
                    a callable object as the second parameter.
                  </p></dd>
<dt><span class="term">Requires:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">INVOKE</span><span class="special">(</span><span class="identifier">DECAY_COPY</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">func</span><span class="special">)),</span>
                    <span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(*</span><span class="keyword">this</span><span class="special">))</span></code>
                    shall be a valid expression.
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                    All the functions create a shared state that is associated with
                    the returned future object. Additionally,
                  </p>
<p>
                    - When the object's shared state is ready, the continuation
                    <code class="computeroutput"><span class="identifier">INVOKE</span><span class="special">(</span><span class="identifier">DECAY_COPY</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">func</span><span class="special">)),</span>
                    <span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(*</span><span class="keyword">this</span><span class="special">))</span></code>
                    is called depending on the overload (see below) with the call
                    to DECAY_COPY() being evaluated in the thread that called then.
                  </p>
<p>
                    - Any value returned from the continuation is stored as the result
                    in the shared state of the resulting <code class="computeroutput"><span class="identifier">future</span></code>.
                    Any exception propagated from the execution of the continuation
                    is stored as the exceptional result in the shared state of the
                    resulting <code class="computeroutput"><span class="identifier">future</span></code>.
                  </p>
<p>
                    The continuation launches according to the specified policy or
                    executor or noting.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">none</span></code>
                    the continuation is called on an unspecified thread of execution.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                    the continuation is called on a new thread of execution.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    the continuation is called on demand.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">executor</span></code>
                    the continuation is called on one of the thread of execution
                    of the executor.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">inherit</span></code>
                    the continuation inherits the parent's launch policy or executor.
                  </p>
<p>
                    - When the executor or launch policy is not provided (first overload)
                    is if as if launch::none was specified.
                  </p>
<p>
                    - When the executor is provided (second overload) the continuation
                    is called on one of the thread of execution of the executor.
                  </p>
<p>
                    - If the parent has a policy of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    and the continuation does not have a specified launch policy
                    executor, then the parent is filled by immediately calling <code class="computeroutput"><span class="special">.</span><span class="identifier">wait</span><span class="special">()</span></code>, and the policy of the antecedent
                    is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>.
                  </p>
</dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    An object of type <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">)&gt;</span></code>
                    that refers to the shared state created by the continuation.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd>
<p>
                    - Note that nested futures are not implicitly unwrapped yet.
                    This could be subject to change in future versions.
                  </p>
<p>
                    - The returned futures behave as the ones returned from boost::async,
                    the destructor of the future object returned from then will block.
                    This could be subject to change in future versions.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd>
<p>
                    - The <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a></code> object
                    passed to the parameter of the continuation function is a copy
                    of the original <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a></code>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span>
                    <span class="special">==</span> <span class="keyword">false</span></code>
                    on original future; <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span> <span class="special">==</span>
                    <span class="keyword">true</span></code> on the <code class="computeroutput"><span class="identifier">future</span></code> returned from then.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.unique_future.unwrap"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.unwrap" title="Member function unwrap() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">unwrap</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R2</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R2</span><span class="special">&gt;</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R2</span><span class="special">&gt;&gt;::</span><span class="identifier">unwrap</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R2</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a><span class="special">&lt;</span><span class="identifier">R2</span><span class="special">&gt;</span>  <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a><span class="special">&lt;</span><span class="identifier">R2</span><span class="special">&gt;&gt;::</span><span class="identifier">unwrap</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are experimental and subject to change in future
                versions. There are not too much tests yet, so it is possible that
                you can find out some trivial bugs :(
              </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are based on the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3634.pdf" target="_top"><span class="bold"><strong>N3634 - Improvements to std::future&lt;T&gt; and related
                APIs</strong></span></a> C++1y proposal by N. Gustafsson, A. Laksberg,
                H. Sutter, S. Mithani.
              </p></td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    Removes the outermost future and returns a future with the associated
                    state been a proxy of the outer future.
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    - Returns a future that becomes ready when the shared state of
                    the outer and inner future is ready. The validity of the future
                    returned from <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code> applied on the outer future
                    cannot be established a priori. If it is not valid, this future
                    is forced to be valid and becomes ready with an exception of
                    type <code class="computeroutput"><span class="identifier">future_error</span></code>,
                    with an error code of <code class="computeroutput"><span class="identifier">future_errc</span><span class="special">::</span><span class="identifier">broken_promise</span></code>.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    An object of type future with the associated state been a proxy
                    of outer future.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    - The returned future has <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span> <span class="special">==</span>
                    <span class="keyword">true</span></code>.
                  </p></dd>
</dl>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.shared_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">shared_future</span></code> class template</a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.default_constructor">Default
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.get">Member
            function <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.wait">Member
            function <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.timed_wait_duration">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.timed_wait_absolute">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.wait_for">Member
            function <code class="computeroutput"><span class="identifier">wait_for</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.wait_until">Member
            function <code class="computeroutput"><span class="identifier">wait_until</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.valid">Member
            function <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready">Member
            function <code class="computeroutput"><span class="identifier">is_ready</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.has_value">Member
            function <code class="computeroutput"><span class="identifier">has_value</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.has_exception">Member
            function <code class="computeroutput"><span class="identifier">has_exception</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.get_exception_ptr">Member
            function <code class="computeroutput"><span class="identifier">get_exception_ptr</span><span class="special">()</span></code> EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.get_state">Member
            function <code class="computeroutput"><span class="identifier">get_state</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.shared_future.then">Member
            function <code class="computeroutput"><span class="identifier">then</span><span class="special">()</span></code>
            EXTENSION</a></span></dt>
</dl></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">shared_future</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="keyword">typedef</span> <span class="identifier">future_state</span><span class="special">::</span><span class="identifier">state</span> <span class="identifier">state</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">typedef</span> <span class="identifier">R</span> <span class="identifier">value_type</span><span class="special">;</span>  <span class="comment">// EXTENSION</span>

  <span class="identifier">shared_future</span><span class="special">()</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="special">~</span><span class="identifier">shared_future</span><span class="special">();</span>

  <span class="comment">// copy support</span>
  <span class="identifier">shared_future</span><span class="special">(</span><span class="identifier">shared_future</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>
  <span class="identifier">shared_future</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">shared_future</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>

  <span class="comment">// move support</span>
  <span class="identifier">shared_future</span><span class="special">(</span><span class="identifier">shared_future</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="identifier">shared_future</span><span class="special">(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="identifier">shared_future</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">shared_future</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="identifier">shared_future</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="comment">// factories</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">then</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">S</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">then</span><span class="special">(</span><span class="identifier">S</span><span class="special">&amp;</span> <span class="identifier">scheduler</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>

  <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>

  <span class="comment">// retrieving the value</span>
  <span class="identifier">see</span> <span class="identifier">below</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>

  <span class="identifier">exception_ptr</span> <span class="identifier">get_exception_ptr</span><span class="special">();</span> <span class="comment">// EXTENSION</span>

  <span class="comment">// functions to check state, and wait for ready</span>
  <span class="keyword">bool</span> <span class="identifier">valid</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="keyword">bool</span> <span class="identifier">is_ready</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">bool</span> <span class="identifier">has_exception</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
  <span class="keyword">bool</span> <span class="identifier">has_value</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span> <span class="comment">// EXTENSION</span>

  <span class="comment">// waiting for the result to be ready</span>
  <span class="keyword">void</span> <span class="identifier">wait</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
  <span class="identifier">future_status</span> <span class="identifier">wait_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
  <span class="identifier">future_status</span> <span class="identifier">wait_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>

<span class="preprocessor">#if</span> <span class="identifier">defined</span> <span class="identifier">BOOST_THREAD_USES_DATE_TIME</span> <span class="special">||</span> <span class="identifier">defined</span> <span class="identifier">BOOST_THREAD_DONT_USE_CHRONO</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
  <span class="keyword">bool</span> <span class="identifier">timed_wait</span><span class="special">(</span><span class="identifier">Duration</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">rel_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>  <span class="comment">// DEPRECATED SINCE V3.0.0</span>
  <span class="keyword">bool</span> <span class="identifier">timed_wait_until</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">system_time</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">abs_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>  <span class="comment">// DEPRECATED SINCE V3.0.0</span>
<span class="preprocessor">#endif</span>
  <span class="identifier">state</span> <span class="identifier">get_state</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>  <span class="comment">// EXTENSION</span>

<span class="special">};</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.default_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.default_constructor" title="Default Constructor">Default
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">shared_future</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs an uninitialized shared_future.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span></code></a> returns <code class="computeroutput"><span class="keyword">false</span></code>. <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.get"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get" title="Member function get()">Member
            function <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">const</span> <span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
<span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
<span class="keyword">void</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready as-if by a call to <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.wait" title="Member function wait()"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">wait</span><span class="special">()</span></code></a>,
                    and returns a <code class="computeroutput"><span class="keyword">const</span></code>
                    reference to the result.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">get</span><span class="special">()</span></code> return the stored reference.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code>, there is no return value.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">()</span></code> returns a <code class="computeroutput"><span class="keyword">const</span></code>
                    reference to the value stored in the shared state.
                  </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
</dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.wait"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.wait" title="Member function wait()">Member
            function <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">wait</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready. If the result is not ready on entry, and the result has
                    a <span class="emphasis"><em>wait callback</em></span> set, that callback is invoked
                    prior to waiting.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code>. <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.timed_wait_duration"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.timed_wait_duration" title="Member function timed_wait()">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
<span class="keyword">bool</span> <span class="identifier">timed_wait</span><span class="special">(</span><span class="identifier">Duration</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">wait_duration</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time specified by <code class="computeroutput"><span class="identifier">wait_duration</span></code>
                    has elapsed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, and that result is ready before
                    the specified time has elapsed, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>. <code class="computeroutput"><span class="identifier">Duration</span></code> must be a type that
                    meets the Boost.DateTime time duration requirements.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.timed_wait_absolute"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.timed_wait_absolute" title="Member function timed_wait()">Member
            function <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">timed_wait</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">system_time</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">wait_timeout</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time point specified by <code class="computeroutput"><span class="identifier">wait_timeout</span></code>
                    has passed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, and that result is ready before
                    the specified time has passed, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.wait_for"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.wait_for" title="Member function wait_for()">Member
            function <code class="computeroutput"><span class="identifier">wait_for</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
<span class="identifier">future_status</span> <span class="identifier">wait_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time specified by <code class="computeroutput"><span class="identifier">wait_duration</span></code>
                    has elapsed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    if the shared state contains a deferred function. (Not implemented
                    yet)
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">ready</span></code>
                    if the shared state is ready.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">timeout</span></code>
                    if the function is returning because the relative timeout specified
                    by <code class="computeroutput"><span class="identifier">rel_time</span></code> has
                    expired.
                  </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>. <code class="computeroutput"><span class="identifier">Duration</span></code> must be a type that
                    meets the Boost.DateTime time duration requirements.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.wait_until"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.wait_until" title="Member function wait_until()">Member
            function <code class="computeroutput"><span class="identifier">wait_until</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
<span class="identifier">future_status</span> <span class="identifier">wait_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready, or the time point specified by <code class="computeroutput"><span class="identifier">wait_timeout</span></code>
                    has passed. If the result is not ready on entry, and the result
                    has a <span class="emphasis"><em>wait callback</em></span> set, that callback is
                    invoked prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    if the shared state contains a deferred function. (Not implemented
                    yet)
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">ready</span></code>
                    if the shared state is ready.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">future_status</span><span class="special">::</span><span class="identifier">timeout</span></code>
                    if the function is returning because the absolute timeout specified
                    by <code class="computeroutput"><span class="identifier">absl_time</span></code>
                    has reached.
                  </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_uninitialized</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the result
                    associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is not ready at the point
                    of the call, and the current thread is interrupted.
                  </p>
<p>
                    - Any exception thrown by the <span class="emphasis"><em>wait callback</em></span>
                    if such a callback is called.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    If this call returned <code class="computeroutput"><span class="keyword">true</span></code>,
                    then <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">is_ready</span><span class="special">()</span></code></a>
                    returns <code class="computeroutput"><span class="keyword">true</span></code> and
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION"><code class="computeroutput"><span class="keyword">this</span><span class="special">-&gt;</span><span class="identifier">get_state</span><span class="special">()</span></code></a>
                    returns <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a>.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">timed_wait</span><span class="special">()</span></code>
                    is an <span class="emphasis"><em>interruption point</em></span>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.valid"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.valid" title="Member function valid()">Member
            function <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">valid</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.is_ready"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.is_ready" title="Member function is_ready() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">is_ready</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">is_ready</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, and that result is ready for
                    retrieval, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Whatever <code class="computeroutput"><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">lock</span><span class="special">()/</span><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">unlock</span><span class="special">()</span></code> can throw.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.has_value"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.has_value" title="Member function has_value() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">has_value</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">has_value</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, that result is ready for retrieval,
                    and the result is a stored value, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Whatever <code class="computeroutput"><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">lock</span><span class="special">()/</span><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">unlock</span><span class="special">()</span></code> can throw.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.has_exception"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.has_exception" title="Member function has_exception() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">has_exception</span><span class="special">()</span></code> EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">has_exception</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, that result is ready for retrieval,
                    and the result is a stored exception, <code class="computeroutput"><span class="keyword">false</span></code>
                    otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Whatever <code class="computeroutput"><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">lock</span><span class="special">()/</span><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">unlock</span><span class="special">()</span></code> can throw.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.get_exception_ptr"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_exception_ptr" title="Member function get_exception_ptr() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">get_exception_ptr</span><span class="special">()</span></code> EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">exception_ptr</span> <span class="identifier">get_exception_ptr</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is associated with a shared state, waits until the result is
                    ready. If the result is not ready on entry, and the result has
                    a <span class="emphasis"><em>wait callback</em></span> set, that callback is invoked
                    prior to waiting.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    an exception_ptr, storing or not an exception.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Whatever <code class="computeroutput"><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">lock</span><span class="special">()/</span><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">unlock</span><span class="special">()</span></code> can throw.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.get_state"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.get_state" title="Member function get_state() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">get_state</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">state</span> <span class="identifier">get_state</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Determine the state of the shared state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    if any.
                  </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">uninitialized</span></code></a> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    is not associated with a shared state. <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">ready</span></code></a> if the shared
                    state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is ready for retrieval,
                    <a class="link" href="futures.html#thread.synchronization.futures.reference.future_state" title="Enumeration state"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_state</span><span class="special">::</span><span class="identifier">waiting</span></code></a> otherwise.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Whatever <code class="computeroutput"><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">lock</span><span class="special">()/</span><span class="identifier">mutex</span><span class="special">::</span><span class="identifier">unlock</span><span class="special">()</span></code> can throw.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.shared_future.then"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.then" title="Member function then() EXTENSION">Member
            function <code class="computeroutput"><span class="identifier">then</span><span class="special">()</span></code>
            EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="identifier">then</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">S</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="identifier">then</span><span class="special">(</span><span class="identifier">Ex</span><span class="special">&amp;</span> <span class="identifier">executor</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
 <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="identifier">then</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">func</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span> <span class="comment">// EXTENSION</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are experimental and subject to change in future
                versions. There are not too much tests yet, so it is possible that
                you can find out some trivial bugs :(
              </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
                These functions are based on the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3634.pdf" target="_top"><span class="bold"><strong>N3634 - Improvements to std::future&lt;T&gt; and related
                APIs</strong></span></a> C++1y proposal by N. Gustafsson, A. Laksberg,
                H. Sutter, S. Mithani.
              </p></td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    The three functions differ only by input parameters. The first
                    only takes a callable object which accepts a shared_future object
                    as a parameter. The second function takes an executor as the
                    first parameter and a callable object as the second parameter.
                    The third function takes a launch policy as the first parameter
                    and a callable object as the second parameter.
                  </p></dd>
<dt><span class="term">Requires:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">INVOKE</span><span class="special">(</span><span class="identifier">DECAY_COPY</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">func</span><span class="special">)),</span>
                    <span class="special">*</span><span class="keyword">this</span><span class="special">)</span></code> shall be a valid expression.
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                    All the functions create a shared state that is associated with
                    the returned future object. Additionally,
                  </p>
<p>
                    - When the object's shared state is ready, the continuation
                    <code class="computeroutput"><span class="identifier">INVOKE</span><span class="special">(</span><span class="identifier">DECAY_COPY</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">func</span><span class="special">)),</span>
                    <span class="special">*</span><span class="keyword">this</span><span class="special">)</span></code> is called depending on the overload
                    (see below) with the call to DECAY_COPY() being evaluated in
                    the thread that called then.
                  </p>
<p>
                    - Any value returned from the continuation is stored as the result
                    in the shared state of the resulting <code class="computeroutput"><span class="identifier">future</span></code>.
                    Any exception propagated from the execution of the continuation
                    is stored as the exceptional result in the shared state of the
                    resulting <code class="computeroutput"><span class="identifier">future</span></code>.
                  </p>
<p>
                    The continuation launches according to the specified policy or
                    executor or noting.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">none</span></code>
                    the continuation is called on an unspecified thread of execution.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                    the continuation is called on a new thread of execution.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    the continuation is called on demand.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">executor</span></code>
                    the continuation is called on one of the thread of execution
                    of the executor.
                  </p>
<p>
                    - When the launch policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">inherit</span></code>
                    the continuation inherits the parent's launch policy or executor.
                  </p>
<p>
                    - When the executor or launch policy is not provided (first overload)
                    is if as if launch::none was specified.
                  </p>
<p>
                    - When the executor is provided (second overload) the continuation
                    is called on one of the thread of execution of the executor.
                  </p>
<p>
                    - If the parent has a policy of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>
                    and the continuation does not have a specified launch policy
                    executor, then the parent is filled by immediately calling <code class="computeroutput"><span class="special">.</span><span class="identifier">wait</span><span class="special">()</span></code>, and the policy of the antecedent
                    is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>.
                  </p>
</dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                    An object of type <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">result_of</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">(</span><span class="identifier">shared_future</span><span class="special">)&gt;</span></code> that refers to the shared
                    state created by the continuation.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd>
<p>
                    - Note that nested futures are not implicitly unwrapped yet.
                    This could be subject to change in future versions.
                  </p>
<p>
                    - The returned futures behave as the ones returned from boost::async,
                    the destructor of the future object returned from then will block.
                    This could be subject to change in future versions.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd>
<p>
                    - The future object is moved to the parameter of the continuation
                    function .
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span>
                    <span class="special">==</span> <span class="keyword">true</span></code>
                    on original <code class="computeroutput"><span class="identifier">shared_future</span></code>;
                    <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span>
                    <span class="special">==</span> <span class="keyword">true</span></code>
                    on the <code class="computeroutput"><span class="identifier">future</span></code>
                    returned from then.
                  </p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.promise"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">promise</span></code> class template</a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.default_constructor">Default
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.alloc_constructor">Allocator
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.move_constructor">Move
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.move_assignment">Move
            Assignment Operator</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.destructor">Destructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.get_future">Member
            Function <code class="computeroutput"><span class="identifier">get_future</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.set_value">Member
            Function <code class="computeroutput"><span class="identifier">set_value</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.set_exception">Member
            Function <code class="computeroutput"><span class="identifier">set_exception</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.set_value_at_thread_exit">Member
            Function <code class="computeroutput"><span class="identifier">set_value_at_thread_exit</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.set_exception_at_thread_exit">Member
            Function <code class="computeroutput"><span class="identifier">set_exception_at_thread_exit</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.promise.set_wait_callback">Member
            Function <code class="computeroutput"><span class="identifier">set_wait_callback</span><span class="special">()</span></code> EXTENSION</a></span></dt>
</dl></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">promise</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="keyword">typedef</span> <span class="identifier">R</span> <span class="identifier">value_type</span><span class="special">;</span>  <span class="comment">// EXTENSION</span>

  <span class="identifier">promise</span><span class="special">();</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
  <span class="identifier">promise</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="identifier">Allocator</span> <span class="identifier">a</span><span class="special">);</span>
  <span class="identifier">promise</span> <span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">promise</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">rhs</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <span class="identifier">promise</span><span class="special">(</span><span class="identifier">promise</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">rhs</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <span class="special">~</span><span class="identifier">promise</span><span class="special">();</span>

  <span class="comment">// Move support</span>
  <span class="identifier">promise</span><span class="special">(</span><span class="identifier">promise</span> <span class="special">&amp;&amp;</span> <span class="identifier">rhs</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;;</span>
  <span class="identifier">promise</span> <span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">promise</span><span class="special">&amp;&amp;</span> <span class="identifier">rhs</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;;</span>

  <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">promise</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="comment">// Result retrieval</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">get_future</span><span class="special">();</span>

  <span class="comment">// Set the value</span>
  <span class="keyword">void</span> <span class="identifier">set_value</span><span class="special">(</span><span class="identifier">see</span> <span class="identifier">below</span><span class="special">);</span>
  <span class="keyword">void</span> <span class="identifier">set_exception</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">exception_ptr</span> <span class="identifier">e</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">set_exception</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">e</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

  <span class="comment">// setting the result with deferred notification</span>
  <span class="keyword">void</span> <span class="identifier">set_value_at_thread_exit</span><span class="special">(</span><span class="identifier">see</span> <span class="identifier">below</span><span class="special">);</span>
  <span class="keyword">void</span> <span class="identifier">set_exception_at_thread_exit</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">p</span><span class="special">);</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">set_exception_at_thread_exit</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">p</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">set_wait_callback</span><span class="special">(</span><span class="identifier">F</span> <span class="identifier">f</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
<span class="special">};</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.default_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.default_constructor" title="Default Constructor">Default
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">promise</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> with no associated
                    result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.alloc_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.alloc_constructor" title="Allocator Constructor">Allocator
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
<span class="identifier">promise</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="identifier">Allocator</span> <span class="identifier">a</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> with no associated
                    result using the allocator <code class="computeroutput"><span class="identifier">a</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    Available only if BOOST_THREAD_FUTURE_USES_ALLOCATORS is defined.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.move_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.move_constructor" title="Move Constructor">Move
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">promise</span><span class="special">(</span><span class="identifier">promise</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a>, and transfers
                    ownership of the result associated with <code class="computeroutput"><span class="identifier">other</span></code>
                    to <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    leaving <code class="computeroutput"><span class="identifier">other</span></code>
                    with no associated result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.move_assignment"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.move_assignment" title="Move Assignment Operator">Move
            Assignment Operator</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">promise</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">promise</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Transfers ownership of the result associated with <code class="computeroutput"><span class="identifier">other</span></code> to <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, leaving <code class="computeroutput"><span class="identifier">other</span></code>
                    with no associated result. If there was already a result associated
                    with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    and that result was not <span class="emphasis"><em>ready</em></span>, sets any
                    futures associated with that result to <span class="emphasis"><em>ready</em></span>
                    with a <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code>
                    exception as the result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.destructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.destructor" title="Destructor">Destructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="special">~</span><span class="identifier">promise</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Destroys <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                    If there was a result associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, and that result is not
                    <span class="emphasis"><em>ready</em></span>, sets any futures associated with
                    that task to <span class="emphasis"><em>ready</em></span> with a <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code> exception as
                    the result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.get_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.get_future" title="Member Function get_future()">Member
            Function <code class="computeroutput"><span class="identifier">get_future</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">get_future</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    was not associated with a result, allocate storage for a new
                    shared state and associate it with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>. Returns a <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> associated with
                    the result associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_already_retrieved</span></code> if
                    the future associated with the task has already been retrieved.
                    <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if any memory necessary
                    could not be allocated.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.set_value"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.set_value" title="Member Function set_value()">Member
            Function <code class="computeroutput"><span class="identifier">set_value</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">set_value</span><span class="special">(</span><span class="identifier">R</span><span class="special">&amp;&amp;</span> <span class="identifier">r</span><span class="special">);</span>
<span class="keyword">void</span> <span class="identifier">set_value</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">r</span><span class="special">);</span>
<span class="keyword">void</span> <span class="identifier">promise</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">set_value</span><span class="special">(</span><span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">r</span><span class="special">);</span>
<span class="keyword">void</span> <span class="identifier">promise</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">set_value</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                    - If BOOST_THREAD_PROVIDES_PROMISE_LAZY is defined and if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    was not associated with a result, allocate storage for a new
                    shared state and associate it with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p>
<p>
                    - Store the value <code class="computeroutput"><span class="identifier">r</span></code>
                    in the shared state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>. Any threads blocked waiting
                    for the asynchronous result are woken.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    All futures waiting on the shared state are <span class="emphasis"><em>ready</em></span>
                    and <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.has_value" title="Member function has_value() EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">has_value</span><span class="special">()</span></code></a>
                    or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.has_value" title="Member function has_value() EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">has_value</span><span class="special">()</span></code></a>
                    for those futures shall return <code class="computeroutput"><span class="keyword">true</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise_already_satisfied</span></code> if
                    the result associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is already <span class="emphasis"><em>ready</em></span>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    has no shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if the memory required
                    for storage of the result cannot be allocated.
                  </p>
<p>
                    - Any exception thrown by the copy or move-constructor of <code class="computeroutput"><span class="identifier">R</span></code>.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.set_exception"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.set_exception" title="Member Function set_exception()">Member
            Function <code class="computeroutput"><span class="identifier">set_exception</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">set_exception</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">exception_ptr</span> <span class="identifier">e</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">set_exception</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">e</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                    - If BOOST_THREAD_PROVIDES_PROMISE_LAZY is defined and if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    was not associated with a result, allocate storage for a new
                    shared state and associate it with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p>
<p>
                    - Store the exception <code class="computeroutput"><span class="identifier">e</span></code>
                    in the shared state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>. Any threads blocked waiting
                    for the asynchronous result are woken.
                  </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    All futures waiting on the shared state are <span class="emphasis"><em>ready</em></span>
                    and <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.has_exception" title="Member function has_exception() EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">has_exception</span><span class="special">()</span></code></a>
                    or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.has_exception" title="Member function has_exception() EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">has_exception</span><span class="special">()</span></code></a>
                    for those futures shall return <code class="computeroutput"><span class="keyword">true</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise_already_satisfied</span></code> if
                    the result associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is already <span class="emphasis"><em>ready</em></span>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    has no shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if the memory required
                    for storage of the result cannot be allocated.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.set_value_at_thread_exit"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.set_value_at_thread_exit" title="Member Function set_value_at_thread_exit()">Member
            Function <code class="computeroutput"><span class="identifier">set_value_at_thread_exit</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">set_value_at_thread_exit</span><span class="special">(</span><span class="identifier">R</span><span class="special">&amp;&amp;</span> <span class="identifier">r</span><span class="special">);</span>
<span class="keyword">void</span> <span class="identifier">set_value_at_thread_exit</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">r</span><span class="special">);</span>
<span class="keyword">void</span> <span class="identifier">promise</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&amp;&gt;::</span><span class="identifier">set_value_at_thread_exit</span><span class="special">(</span><span class="identifier">R</span><span class="special">&amp;</span> <span class="identifier">r</span><span class="special">);</span>
<span class="keyword">void</span> <span class="identifier">promise</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;::</span><span class="identifier">set_value_at_thread_exit</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Stores the value r in the shared state without making that state
                    ready immediately. Schedules that state to be made ready when
                    the current thread exits, after all objects of thread storage
                    duration associated with the current thread have been destroyed.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise_already_satisfied</span></code> if
                    the result associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is already <span class="emphasis"><em>ready</em></span>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    has no shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if the memory required
                    for storage of the result cannot be allocated.
                  </p>
<p>
                    - Any exception thrown by the copy or move-constructor of <code class="computeroutput"><span class="identifier">R</span></code>.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.set_exception_at_thread_exit"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.set_exception_at_thread_exit" title="Member Function set_exception_at_thread_exit()">Member
            Function <code class="computeroutput"><span class="identifier">set_exception_at_thread_exit</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">set_exception_at_thread_exit</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">exception_ptr</span> <span class="identifier">e</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">set_exception_at_thread_exit</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">p</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Stores the exception pointer p in the shared state without making
                    that state ready immediately. Schedules that state to be made
                    ready when the current thread exits, after all objects of thread
                    storage duration associated with the current thread have been
                    destroyed.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    All futures waiting on the shared state are <span class="emphasis"><em>ready</em></span>
                    and <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future.has_exception" title="Member function has_exception() EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">has_exception</span><span class="special">()</span></code></a>
                    or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future.has_exception" title="Member function has_exception() EXTENSION"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;::</span><span class="identifier">has_exception</span><span class="special">()</span></code></a>
                    for those futures shall return <code class="computeroutput"><span class="keyword">true</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise_already_satisfied</span></code> if
                    the result associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is already <span class="emphasis"><em>ready</em></span>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code> if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
                    has no shared state.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if the memory required
                    for storage of the result cannot be allocated.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.promise.set_wait_callback"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.promise.set_wait_callback" title="Member Function set_wait_callback() EXTENSION">Member
            Function <code class="computeroutput"><span class="identifier">set_wait_callback</span><span class="special">()</span></code> EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">set_wait_callback</span><span class="special">(</span><span class="identifier">F</span> <span class="identifier">f</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Preconditions:</span></dt>
<dd><p>
                    The expression <code class="computeroutput"><span class="identifier">f</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code> where <code class="computeroutput"><span class="identifier">t</span></code>
                    is a lvalue of type <a class="link" href="futures.html#thread.synchronization.futures.reference.promise" title="promise class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">promise</span></code></a> shall be well-formed.
                    Invoking a copy of <code class="computeroutput"><span class="identifier">f</span></code>
                    shall have the same effect as invoking <code class="computeroutput"><span class="identifier">f</span></code>
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Store a copy of <code class="computeroutput"><span class="identifier">f</span></code>
                    with the shared state associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> as a <span class="emphasis"><em>wait callback</em></span>.
                    This will replace any existing wait callback store alongside
                    that result. If a thread subsequently calls one of the wait functions
                    on a <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a> associated
                    with this result, and the result is not <span class="emphasis"><em>ready</em></span>,
                    <code class="computeroutput"><span class="identifier">f</span><span class="special">(*</span><span class="keyword">this</span><span class="special">)</span></code>
                    shall be invoked.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if memory cannot
                    be allocated for the required storage.
                  </p></dd>
</dl>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.packaged_task"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">packaged_task</span></code> class template</a>
</h5></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.task_constructor">Task
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.alloc_constructor">Allocator
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.move_constructor">Move
            Constructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.move_assignment">Move
            Assignment Operator</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.destructor">Destructor</a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.get_future">Member
            Function <code class="computeroutput"><span class="identifier">get_future</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.call_operator">Member
            Function <code class="computeroutput"><span class="keyword">operator</span><span class="special">()()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.make_ready_at_thread_exit">Member
            Function <code class="computeroutput"><span class="identifier">make_ready_at_thread_exit</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.reset">Member
            Function <code class="computeroutput"><span class="identifier">reset</span><span class="special">()</span></code></a></span></dt>
<dt><span class="section"><a href="futures.html#thread.synchronization.futures.reference.packaged_task.set_wait_callback">Member
            Function <code class="computeroutput"><span class="identifier">set_wait_callback</span><span class="special">()</span></code> EXTENSION</a></span></dt>
</dl></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">S</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">packaged_task</span><span class="special">;</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">R</span>
  <span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">ArgTypes</span>
<span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">ArgTypes</span><span class="special">)&gt;</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">packaged_task</span> <span class="keyword">const</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
  <span class="identifier">packaged_task</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">packaged_task</span> <span class="keyword">const</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

  <span class="comment">// construction and destruction</span>
  <span class="identifier">packaged_task</span><span class="special">()</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="keyword">explicit</span> <span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">R</span><span class="special">(*</span><span class="identifier">f</span><span class="special">)(</span><span class="identifier">ArgTypes</span><span class="special">...));</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">&gt;</span>
  <span class="keyword">explicit</span> <span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">);</span>

  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
  <span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="identifier">Allocator</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">R</span><span class="special">(*</span><span class="identifier">f</span><span class="special">)(</span><span class="identifier">ArgTypes</span><span class="special">...));</span>
  <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
  <span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="identifier">Allocator</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">);</span>

  <span class="special">~</span><span class="identifier">packaged_task</span><span class="special">()</span>
  <span class="special">{}</span>

  <span class="comment">// move support</span>
  <span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">packaged_task</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="identifier">packaged_task</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">packaged_task</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">packaged_task</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="keyword">noexcept</span><span class="special">;</span>

  <span class="keyword">bool</span> <span class="identifier">valid</span><span class="special">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span><span class="special">;</span>
  <span class="comment">// result retrieval</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">get_future</span><span class="special">();</span>

  <span class="comment">// execution</span>
  <span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()(</span><span class="identifier">ArgTypes</span><span class="special">...</span> <span class="special">);</span>
  <span class="keyword">void</span> <span class="identifier">make_ready_at_thread_exit</span><span class="special">(</span><span class="identifier">ArgTypes</span><span class="special">...);</span>

  <span class="keyword">void</span> <span class="identifier">reset</span><span class="special">();</span>
  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">set_wait_callback</span><span class="special">(</span><span class="identifier">F</span> <span class="identifier">f</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
<span class="special">};</span>
</pre>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.task_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.task_constructor" title="Task Constructor">Task
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">R</span><span class="special">(*</span><span class="identifier">f</span><span class="special">)(</span><span class="identifier">ArgTypes</span><span class="special">...));</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
<span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span><span class="identifier">f</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Preconditions:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">f</span><span class="special">()</span></code>
                    is a valid expression with a return type convertible to <code class="computeroutput"><span class="identifier">R</span></code>. Invoking a copy of <code class="computeroutput"><span class="identifier">f</span></code> must behave the same as invoking
                    <code class="computeroutput"><span class="identifier">f</span></code>.
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> with
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">)</span></code>
                    stored as the associated task.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - Any exceptions thrown by the copy (or move) constructor of
                    <code class="computeroutput"><span class="identifier">f</span></code>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if memory for the
                    internal data structures could not be allocated.
                  </p>
</dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    The R(*f)(ArgTypes...)) overload to allow passing a function
                    without needing to use <code class="computeroutput"><span class="special">&amp;</span></code>.
                  </p></dd>
<dt><span class="term">Remark:</span></dt>
<dd><p>
                    This constructor doesn't participate in overload resolution if
                    decay&lt;F&gt;::type is the same type as boost::packaged_task&lt;R&gt;.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.alloc_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.alloc_constructor" title="Allocator Constructor">Allocator
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
<span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="identifier">Allocator</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">R</span><span class="special">(*</span><span class="identifier">f</span><span class="special">)(</span><span class="identifier">ArgTypes</span><span class="special">...));</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
<span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="identifier">Allocator</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Preconditions:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">f</span><span class="special">()</span></code>
                    is a valid expression with a return type convertible to <code class="computeroutput"><span class="identifier">R</span></code>. Invoking a copy of <code class="computeroutput"><span class="identifier">f</span></code> shall behave the same as
                    invoking <code class="computeroutput"><span class="identifier">f</span></code>.
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> with
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">)</span></code>
                    stored as the associated task using the allocator <code class="computeroutput"><span class="identifier">a</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Any exceptions thrown by the copy (or move) constructor of <code class="computeroutput"><span class="identifier">f</span></code>. <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code>
                    if memory for the internal data structures could not be allocated.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    Available only if BOOST_THREAD_FUTURE_USES_ALLOCATORS is defined.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    The R(*f)(ArgTypes...)) overload to allow passing a function
                    without needing to use <code class="computeroutput"><span class="special">&amp;</span></code>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.move_constructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.move_constructor" title="Move Constructor">Move
            Constructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">packaged_task</span><span class="special">(</span><span class="identifier">packaged_task</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Constructs a new <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>, and transfers
                    ownership of the task associated with <code class="computeroutput"><span class="identifier">other</span></code>
                    to <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    leaving <code class="computeroutput"><span class="identifier">other</span></code>
                    with no associated task.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.move_assignment"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.move_assignment" title="Move Assignment Operator">Move
            Assignment Operator</a>
</h6></div></div></div>
<pre class="programlisting"><span class="identifier">packaged_task</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">packaged_task</span> <span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Transfers ownership of the task associated with <code class="computeroutput"><span class="identifier">other</span></code> to <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, leaving <code class="computeroutput"><span class="identifier">other</span></code>
                    with no associated task. If there was already a task associated
                    with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
                    and that task has not been invoked, sets any futures associated
                    with that task to <span class="emphasis"><em>ready</em></span> with a <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code> exception as
                    the result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                    If the compiler does not support rvalue-references, this is implemented
                    using the boost.thread move emulation.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.destructor"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.destructor" title="Destructor">Destructor</a>
</h6></div></div></div>
<pre class="programlisting"><span class="special">~</span><span class="identifier">packaged_task</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Destroys <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                    If there was a task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, and that task has not been
                    invoked, sets any futures associated with that task to <span class="emphasis"><em>ready</em></span>
                    with a <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">broken_promise</span></code>
                    exception as the result.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    Nothing.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.get_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.get_future" title="Member Function get_future()">Member
            Function <code class="computeroutput"><span class="identifier">get_future</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">get_future</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Returns a <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> associated with
                    the result of the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_moved</span></code> if ownership of
                    the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has been moved to another
                    instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>. <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">future_already_retrieved</span></code> if
                    the future associated with the task has already been retrieved.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.call_operator"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.call_operator" title="Member Function operator()()">Member
            Function <code class="computeroutput"><span class="keyword">operator</span><span class="special">()()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="keyword">operator</span><span class="special">()();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Invoke the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> and store the result in the
                    corresponding future. If the task returns normally, the return
                    value is stored as the shared state, otherwise the exception
                    thrown is stored. Any threads blocked waiting for the shared
                    state associated with this task are woken.
                  </p></dd>
<dt><span class="term">Postconditions:</span></dt>
<dd><p>
                    All futures waiting on the shared state are <span class="emphasis"><em>ready</em></span>
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_moved</span></code> if ownership of
                    the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has been moved to another
                    instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_already_started</span></code> if the
                    task has already been invoked.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.make_ready_at_thread_exit"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.make_ready_at_thread_exit" title="Member Function make_ready_at_thread_exit()">Member
            Function <code class="computeroutput"><span class="identifier">make_ready_at_thread_exit</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">make_ready_at_thread_exit</span><span class="special">(</span><span class="identifier">ArgTypes</span><span class="special">...);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Invoke the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> and store the result in the
                    corresponding future. If the task returns normally, the return
                    value is stored as the shared state, otherwise the exception
                    thrown is stored. In either case, this is done without making
                    that state ready immediately. Schedules the shared state to be
                    made ready when the current thread exits, after all objects of
                    thread storage duration associated with the current thread have
                    been destroyed.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_moved</span></code> if ownership of
                    the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has been moved to another
                    instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>.
                  </p>
<p>
                    - <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_already_started</span></code> if the
                    task has already been invoked.
                  </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.reset"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.reset" title="Member Function reset()">Member
            Function <code class="computeroutput"><span class="identifier">reset</span><span class="special">()</span></code></a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">reset</span><span class="special">();</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Reset the state of the packaged_task so that it can be called
                    again.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_moved</span></code> if ownership of
                    the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has been moved to another
                    instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>.
                  </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h6 class="title">
<a name="thread.synchronization.futures.reference.packaged_task.set_wait_callback"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task.set_wait_callback" title="Member Function set_wait_callback() EXTENSION">Member
            Function <code class="computeroutput"><span class="identifier">set_wait_callback</span><span class="special">()</span></code> EXTENSION</a>
</h6></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">set_wait_callback</span><span class="special">(</span><span class="identifier">F</span> <span class="identifier">f</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Preconditions:</span></dt>
<dd><p>
                    The expression <code class="computeroutput"><span class="identifier">f</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code> where <code class="computeroutput"><span class="identifier">t</span></code>
                    is a lvalue of type <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a> shall
                    be well-formed. Invoking a copy of <code class="computeroutput"><span class="identifier">f</span></code>
                    shall have the same effect as invoking <code class="computeroutput"><span class="identifier">f</span></code>
                  </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                    Store a copy of <code class="computeroutput"><span class="identifier">f</span></code>
                    with the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> as a <span class="emphasis"><em>wait callback</em></span>.
                    This will replace any existing wait callback store alongside
                    that task. If a thread subsequently calls one of the wait functions
                    on a <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a> associated
                    with this task, and the result of the task is not <span class="emphasis"><em>ready</em></span>,
                    <code class="computeroutput"><span class="identifier">f</span><span class="special">(*</span><span class="keyword">this</span><span class="special">)</span></code>
                    shall be invoked.
                  </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                    <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">task_moved</span></code> if ownership of
                    the task associated with <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has been moved to another
                    instance of <a class="link" href="futures.html#thread.synchronization.futures.reference.packaged_task" title="packaged_task class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">packaged_task</span></code></a>.
                  </p></dd>
</dl>
</div>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.decay_copy"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.decay_copy" title="Non-member function decay_copy()">Non-member
          function <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">()</span></code></a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span> <span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">v</span><span class="special">)</span>
<span class="special">{</span>
  <span class="keyword">return</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;(</span><span class="identifier">v</span><span class="special">);</span>
<span class="special">}</span>
</pre>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.async"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.async" title="Non-member function async()">Non-member
          function <code class="computeroutput"><span class="identifier">async</span><span class="special">()</span></code></a>
</h5></div></div></div>
<p>
            The function template async provides a mechanism to launch a function
            potentially in a new thread and provides the result of the function in
            a future object with which it shares a shared state.
          </p>
<h6>
<a name="thread.synchronization.futures.reference.async.h0"></a>
            <span><a name="thread.synchronization.futures.reference.async.non_variadic_variant"></a></span><a class="link" href="futures.html#thread.synchronization.futures.reference.async.non_variadic_variant">Non-Variadic
            variant</a>
          </h6>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">()&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">async</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">()&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">async</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">F</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">async</span><span class="special">(</span><span class="identifier">Executor</span> <span class="special">&amp;</span><span class="identifier">ex</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Requires:</span></dt>
<dd>
<p>
</p>
<pre class="programlisting"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span>
</pre>
<p>
                </p>
<p>
                  shall be a valid expression.
                </p>
</dd>
<dt><span class="term">Effects</span></dt>
<dd>
<p>
                  The first function behaves the same as a call to the second function
                  with a policy argument of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span>
                  <span class="special">|</span> <span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>
                  and the same arguments for <code class="computeroutput"><span class="identifier">F</span></code>.
                </p>
<p>
                  The second and third functions create a shared state that is associated
                  with the returned future object.
                </p>
<p>
                  The further behavior of the second function depends on the policy
                  argument as follows (if more than one of these conditions applies,
                  the implementation may choose any of the corresponding policies):
                </p>
<p>
                  - if <code class="computeroutput"><span class="identifier">policy</span> <span class="special">&amp;</span>
                  <span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code> is non-zero - calls <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code>
                  as if in a new thread of execution represented by a thread object
                  with the calls to <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">()</span></code> being evaluated in the thread
                  that called <code class="computeroutput"><span class="identifier">async</span></code>.
                  Any return value is stored as the result in the shared state. Any
                  exception propagated from the execution of <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> is stored as the exceptional
                  result in the shared state. The thread object is stored in the
                  shared state and affects the behavior of any asynchronous return
                  objects that reference that state.
                </p>
<p>
                  - if <code class="computeroutput"><span class="identifier">policy</span> <span class="special">&amp;</span>
                  <span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code> is non-zero - Stores
                  <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))</span></code>
                  in the shared state. This copy of <code class="computeroutput"><span class="identifier">f</span></code>
                  constitute a deferred function. Invocation of the deferred function
                  evaluates <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">g</span><span class="special">)()</span></code> where <code class="computeroutput"><span class="identifier">g</span></code>
                  is the stored value of <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))</span></code>. The shared state is not made
                  ready until the function has completed. The first call to a non-timed
                  waiting function on an asynchronous return object referring to
                  this shared state shall invoke the deferred function in the thread
                  that called the waiting function. Once evaluation of <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">g</span><span class="special">)()</span></code>
                  begins, the function is no longer considered deferred. (Note: If
                  this policy is specified together with other policies, such as
                  when using a policy value of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span>
                  <span class="special">|</span> <span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>,
                  implementations should defer invocation or the selection of the
                  policy when no more concurrency can be effectively exploited.)
                </p>
<p>
                  - if no valid launch policy is provided the behavior is undefined.
                </p>
<p>
                  The further behavior of the third function is as follows:
                </p>
<p>
                  - The Executor::submit() function is given a function&lt;void ()&gt;
                  which calls `INVOKE (DECAY_COPY (std::forward&lt;F&gt;(f)), DECAY_COPY
                  (std::forward&lt;Args&gt;(args))...). The implementation of the
                  executor is decided by the programmer.
                </p>
</dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  An object of type <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span>
                  <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">()&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span></code>
                  that refers to the shared state created by this call to <code class="computeroutput"><span class="identifier">async</span></code>.
                </p></dd>
<dt><span class="term">Synchronization:</span></dt>
<dd>
<p>
                  Regardless of the provided policy argument,
                </p>
<p>
                  - the invocation of <code class="computeroutput"><span class="identifier">async</span></code>
                  synchronizes with the invocation of <code class="computeroutput"><span class="identifier">f</span></code>.
                  (Note: This statement applies even when the corresponding future
                  object is moved to another thread.); and
                </p>
<p>
                  - the completion of the function <code class="computeroutput"><span class="identifier">f</span></code>
                  is sequenced before the shared state is made ready. (Note: <code class="computeroutput"><span class="identifier">f</span></code> might not be called at all,
                  so its completion might never happen.)
                </p>
<p>
                  If the implementation chooses the <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                  policy,
                </p>
<p>
                  - a call to a non-timed waiting function on an asynchronous return
                  object that shares the shared state created by this async call
                  shall block until the associated thread has completed, as if joined,
                  or else time out;
                </p>
<p>
                  - the associated thread completion synchronizes with the return
                  from the first function that successfully detects the ready status
                  of the shared state or with the return from the last function that
                  releases the shared state, whichever happens first.
                </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">system_error</span></code> if
                  policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                  and the implementation is unable to start a new thread.
                </p></dd>
<dt><span class="term">Error conditions:</span></dt>
<dd><p>
                  - <code class="computeroutput"><span class="identifier">resource_unavailable_try_again</span></code>
                  - if policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                  and the system is unable to start a new thread.
                </p></dd>
<dt><span class="term">Remarks::</span></dt>
<dd><p>
                  The first signature shall not participate in overload resolution
                  if <code class="computeroutput"><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;</span>
                  <span class="identifier">is</span> </code>boost:: launch<code class="computeroutput">
                  <span class="keyword">or</span> </code>boost::is_executor&lt;F&gt;<code class="computeroutput">
                  <span class="identifier">is</span> </code>true_type`.
                </p></dd>
</dl>
</div>
<h6>
<a name="thread.synchronization.futures.reference.async.h1"></a>
            <span><a name="thread.synchronization.futures.reference.async.variadic_variant"></a></span><a class="link" href="futures.html#thread.synchronization.futures.reference.async.variadic_variant">Variadic
            variant</a>
          </h6>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">async</span><span class="special">(</span><span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">async</span><span class="special">(</span><span class="identifier">launch</span> <span class="identifier">policy</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
   <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span>
  <span class="identifier">async</span><span class="special">(</span><span class="identifier">Executor</span> <span class="special">&amp;</span><span class="identifier">ex</span><span class="special">,</span> <span class="identifier">F</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
</pre>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../../../doc/src/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
              the variadic prototype is provided only on C++11 compilers supporting
              rvalue references, variadic templates, decltype and a standard library
              providing &lt;tuple&gt; (waiting for a boost::tuple that is move aware),
              and BOOST_THREAD_PROVIDES_SIGNATURE_PACKAGED_TASK is defined.
            </p></td></tr>
</table></div>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Requires:</span></dt>
<dd>
<p>
                  <code class="computeroutput"><span class="identifier">F</span></code> and each <code class="computeroutput"><span class="identifier">Ti</span></code> in <code class="computeroutput"><span class="identifier">Args</span></code>
                  shall satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
                  requirements.
                </p>
<p>
                  invoke (decay_copy (boost::forward&lt;F&gt;(f)), decay_copy (boost::forward&lt;Args&gt;(args))...)
                </p>
<p>
                  shall be a valid expression.
                </p>
</dd>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                  - The first function behaves the same as a call to the second function
                  with a policy argument of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span>
                  <span class="special">|</span> <span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>
                  and the same arguments for <code class="computeroutput"><span class="identifier">F</span></code>
                  and <code class="computeroutput"><span class="identifier">Args</span></code>.
                </p>
<p>
                  - The second function creates a shared state that is associated
                  with the returned future object. The further behavior of the second
                  function depends on the policy argument as follows (if more than
                  one of these conditions applies, the implementation may choose
                  any of the corresponding policies):
                </p>
<p>
                  - if <code class="computeroutput"><span class="identifier">policy</span> <span class="special">&amp;</span>
                  <span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code> is non-zero - calls <code class="computeroutput"><span class="identifier">invoke</span><span class="special">(</span><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">)),</span>
                  <span class="identifier">decay_copy</span> <span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;(</span><span class="identifier">args</span><span class="special">))...)</span></code>
                  as if in a new thread of execution represented by a thread object
                  with the calls to <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">()</span></code> being evaluated in the thread
                  that called <code class="computeroutput"><span class="identifier">async</span></code>.
                  Any return value is stored as the result in the shared state. Any
                  exception propagated from the execution of <code class="computeroutput"><span class="identifier">invoke</span><span class="special">(</span><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">)),</span> <span class="identifier">decay_copy</span>
                  <span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;(</span><span class="identifier">args</span><span class="special">))...)</span></code> is stored as the exceptional
                  result in the shared state. The thread object is stored in the
                  shared state and affects the behavior of any asynchronous return
                  objects that reference that state.
                </p>
<p>
                  - if <code class="computeroutput"><span class="identifier">policy</span> <span class="special">&amp;</span>
                  <span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code> is non-zero - Stores
                  <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))</span></code>
                  and <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;(</span><span class="identifier">args</span><span class="special">))...</span></code> in the shared state. These
                  copies of <code class="computeroutput"><span class="identifier">f</span></code> and
                  <code class="computeroutput"><span class="identifier">args</span></code> constitute
                  a deferred function. Invocation of the deferred function evaluates
                  <code class="computeroutput"><span class="identifier">invoke</span><span class="special">(</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">g</span><span class="special">),</span>
                  <span class="identifier">move</span><span class="special">(</span><span class="identifier">xyz</span><span class="special">))</span></code>
                  where <code class="computeroutput"><span class="identifier">g</span></code> is the
                  stored value of <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))</span></code> and <code class="computeroutput"><span class="identifier">xyz</span></code>
                  is the stored copy of <code class="computeroutput"><span class="identifier">decay_copy</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;(</span><span class="identifier">args</span><span class="special">))...</span></code>. The shared state is not made
                  ready until the function has completed. The first call to a non-timed
                  waiting function on an asynchronous return object referring to
                  this shared state shall invoke the deferred function in the thread
                  that called the waiting function. Once evaluation of <code class="computeroutput"><span class="identifier">invoke</span><span class="special">(</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">g</span><span class="special">),</span>
                  <span class="identifier">move</span><span class="special">(</span><span class="identifier">xyz</span><span class="special">))</span></code>
                  begins, the function is no longer considered deferred.
                </p>
<p>
                  - if no valid launch policy is provided the behaviour is undefined.
                </p>
</dd>
<dt><span class="term">Note:</span></dt>
<dd><p>
                  If this policy is specified together with other policies, such
                  as when using a policy value of <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span>
                  <span class="special">|</span> <span class="identifier">launch</span><span class="special">::</span><span class="identifier">deferred</span></code>,
                  implementations should defer invocation or the selection of the
                  policy when no more concurrency can be effectively exploited.
                </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  An object of type <code class="computeroutput"> <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">result_of</span><span class="special">&lt;</span><span class="keyword">typename</span>
                  <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">F</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">(</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">...)&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span></code> that refers to the shared state
                  created by this call to <code class="computeroutput"><span class="identifier">async</span></code>.
                </p></dd>
<dt><span class="term">Synchronization:</span></dt>
<dd>
<p>
                  Regardless of the provided policy argument,
                </p>
<p>
                  - the invocation of async synchronizes with the invocation of
                  <code class="computeroutput"><span class="identifier">f</span></code>. (Note: This
                  statement applies even when the corresponding future object is
                  moved to another thread.); and
                </p>
<p>
                  - the completion of the function <code class="computeroutput"><span class="identifier">f</span></code>
                  is sequenced before the shared state is made ready. (Note: f might
                  not be called at all, so its completion might never happen.)
                </p>
<p>
                  If the implementation chooses the <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                  policy,
                </p>
<p>
                  - a call to a waiting function on an asynchronous return object
                  that shares the shared state created by this async call shall block
                  until the associated thread has completed, as if joined, or else
                  time out;
                </p>
<p>
                  - the associated thread completion synchronizes with the return
                  from the first function that successfully detects the ready status
                  of the shared state or with the return from the last function that
                  releases the shared state, whichever happens first.
                </p>
</dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">system_error</span></code> if
                  policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                  and the implementation is unable to start a new thread.
                </p></dd>
<dt><span class="term">Error conditions:</span></dt>
<dd><p>
                  - <code class="computeroutput"><span class="identifier">resource_unavailable_try_again</span></code>
                  - if policy is <code class="computeroutput"><span class="identifier">launch</span><span class="special">::</span><span class="identifier">async</span></code>
                  and the system is unable to start a new thread.
                </p></dd>
<dt><span class="term">Remarks:</span></dt>
<dd><p>
                  The first signature shall not participate in overload resolution
                  if decay&lt;F&gt;::type is boost::launch.
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.wait_for_any"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.wait_for_any" title="Non-member function wait_for_any() - EXTENSION">Non-member
          function <code class="computeroutput"><span class="identifier">wait_for_any</span><span class="special">()</span></code>
          - EXTENSION</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iterator</span><span class="special">&gt;</span>
  <span class="identifier">Iterator</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">Iterator</span> <span class="identifier">begin</span><span class="special">,</span><span class="identifier">Iterator</span> <span class="identifier">end</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">&gt;</span>
  <span class="keyword">unsigned</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F3</span><span class="special">&gt;</span>
  <span class="keyword">unsigned</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">,</span><span class="identifier">F3</span><span class="special">&amp;</span> <span class="identifier">f3</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F3</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F4</span><span class="special">&gt;</span>
  <span class="keyword">unsigned</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">,</span><span class="identifier">F3</span><span class="special">&amp;</span> <span class="identifier">f3</span><span class="special">,</span><span class="identifier">F4</span><span class="special">&amp;</span> <span class="identifier">f4</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F3</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F4</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F5</span><span class="special">&gt;</span>
  <span class="keyword">unsigned</span> <span class="identifier">wait_for_any</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">,</span><span class="identifier">F3</span><span class="special">&amp;</span> <span class="identifier">f3</span><span class="special">,</span><span class="identifier">F4</span><span class="special">&amp;</span> <span class="identifier">f4</span><span class="special">,</span><span class="identifier">F5</span><span class="special">&amp;</span> <span class="identifier">f5</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Preconditions:</span></dt>
<dd><p>
                  The types <code class="computeroutput"><span class="identifier">Fn</span></code> shall
                  be specializations of <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a>, and <code class="computeroutput"><span class="identifier">Iterator</span></code> shall be a forward iterator
                  with a <code class="computeroutput"><span class="identifier">value_type</span></code>
                  which is a specialization of <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a>.
                </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                  Waits until at least one of the specified futures is <span class="emphasis"><em>ready</em></span>.
                </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  The range-based overload returns an <code class="computeroutput"><span class="identifier">Iterator</span></code>
                  identifying the first future in the range that was detected as
                  <span class="emphasis"><em>ready</em></span>. The remaining overloads return the
                  zero-based index of the first future that was detected as <span class="emphasis"><em>ready</em></span>
                  (first parameter =&gt; 0, second parameter =&gt; 1, etc.).
                </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">thread_interrupted</span></code> if the current
                  thread is interrupted. Any exception thrown by the <span class="emphasis"><em>wait
                  callback</em></span> associated with any of the futures being waited
                  for. <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">bad_alloc</span></code> if memory could not
                  be allocated for the internal wait structures.
                </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">wait_for_any</span><span class="special">()</span></code>
                  is an <span class="emphasis"><em>interruption point</em></span>.
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.wait_for_all"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.wait_for_all" title="Non-member function wait_for_all() - EXTENSION">Non-member
          function <code class="computeroutput"><span class="identifier">wait_for_all</span><span class="special">()</span></code>
          - EXTENSION</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iterator</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">Iterator</span> <span class="identifier">begin</span><span class="special">,</span><span class="identifier">Iterator</span> <span class="identifier">end</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F3</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">,</span><span class="identifier">F3</span><span class="special">&amp;</span> <span class="identifier">f3</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F3</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F4</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">,</span><span class="identifier">F3</span><span class="special">&amp;</span> <span class="identifier">f3</span><span class="special">,</span><span class="identifier">F4</span><span class="special">&amp;</span> <span class="identifier">f4</span><span class="special">);</span> <span class="comment">// EXTENSION</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F1</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F2</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F3</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F4</span><span class="special">,</span><span class="keyword">typename</span> <span class="identifier">F5</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">wait_for_all</span><span class="special">(</span><span class="identifier">F1</span><span class="special">&amp;</span> <span class="identifier">f1</span><span class="special">,</span><span class="identifier">F2</span><span class="special">&amp;</span> <span class="identifier">f2</span><span class="special">,</span><span class="identifier">F3</span><span class="special">&amp;</span> <span class="identifier">f3</span><span class="special">,</span><span class="identifier">F4</span><span class="special">&amp;</span> <span class="identifier">f4</span><span class="special">,</span><span class="identifier">F5</span><span class="special">&amp;</span> <span class="identifier">f5</span><span class="special">);</span> <span class="comment">// EXTENSION</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Preconditions:</span></dt>
<dd><p>
                  The types <code class="computeroutput"><span class="identifier">Fn</span></code> shall
                  be specializations of <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a>, and <code class="computeroutput"><span class="identifier">Iterator</span></code> shall be a forward iterator
                  with a <code class="computeroutput"><span class="identifier">value_type</span></code>
                  which is a specialization of <a class="link" href="futures.html#thread.synchronization.futures.reference.unique_future" title="future class template"><code class="computeroutput"><span class="identifier">future</span></code></a> or <a class="link" href="futures.html#thread.synchronization.futures.reference.shared_future" title="shared_future class template"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">shared_future</span></code></a>.
                </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                  Waits until all of the specified futures are <span class="emphasis"><em>ready</em></span>.
                </p></dd>
<dt><span class="term">Throws:</span></dt>
<dd><p>
                  Any exceptions thrown by a call to <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code> on the specified futures.
                </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">wait_for_all</span><span class="special">()</span></code>
                  is an <span class="emphasis"><em>interruption point</em></span>.
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.when_all"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.when_all" title="Non-member function when_all() - EXTENSION">Non-member
          function <code class="computeroutput"><span class="identifier">when_all</span><span class="special">()</span></code>
          - EXTENSION</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">InputIterator</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">InputIterator</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">&gt;&gt;</span>
  <span class="identifier">when_all</span><span class="special">(</span><span class="identifier">InputIterator</span> <span class="identifier">first</span><span class="special">,</span> <span class="identifier">InputIterator</span> <span class="identifier">last</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">FutTypes</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">FutTypes</span><span class="special">&gt;...&gt;</span> <span class="identifier">when_all</span><span class="special">(</span><span class="identifier">FutTypes</span><span class="special">&amp;&amp;...</span> <span class="identifier">futures</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Requires:</span></dt>
<dd><p>
                  - For the first overload, <code class="computeroutput"><span class="identifier">InputIterator</span></code>'s
                  value type shall be convertible to <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. All <code class="computeroutput"><span class="identifier">R</span></code>
                  types must be the same. If any of the <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code> objects are in invalid state
                  (i.e. <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span>
                  <span class="special">==</span> <span class="keyword">false</span></code>),
                  the behavior is undefined. - For the second overload, <code class="computeroutput"><span class="identifier">FutTypes</span></code> is of type <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>
                  or <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. The effect of calling <code class="computeroutput"><span class="identifier">when_all</span></code> on a <code class="computeroutput"><span class="identifier">future</span></code>
                  or a <code class="computeroutput"><span class="identifier">shared_future</span></code>
                  object for which <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span> <span class="special">==</span>
                  <span class="keyword">false</span></code> is undefined.
                </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd>
<p>
                  - There are two variations of <code class="computeroutput"><span class="identifier">when_all</span></code>.
                  The first version takes a pair of <code class="computeroutput"><span class="identifier">InputIterators</span></code>.
                  The second takes any arbitrary number of <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R0</span><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R1</span><span class="special">&gt;</span></code> objects, where <code class="computeroutput"><span class="identifier">R0</span></code> and <code class="computeroutput"><span class="identifier">R1</span></code>
                  need not be the same type.
                </p>
<p>
                  - Calling the first signature of <code class="computeroutput"><span class="identifier">when_all</span></code>
                  where <code class="computeroutput"><span class="identifier">InputIterator</span></code>
                  first equals last, returns a future with an empty <code class="computeroutput"><span class="identifier">vector</span></code> that is immediately ready.
                </p>
<p>
                  - Calling the second signature of <code class="computeroutput"><span class="identifier">when_all</span></code>
                  with no arguments returns a future&lt;tuple&lt;&gt;&gt; that is
                  immediately ready.
                </p>
</dd>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                  - If any of the futures supplied to a call to <code class="computeroutput"><span class="identifier">when_all</span></code>
                  refer to deferred tasks that have not started execution, those
                  tasks are executed before the call to <code class="computeroutput"><span class="identifier">when_all</span></code>
                  returns. Once all such tasks have been executed, the call to <code class="computeroutput"><span class="identifier">when_all</span></code> returns immediately.
                </p>
<p>
                  - The call to <code class="computeroutput"><span class="identifier">when_all</span></code>
                  does not wait for non-deferred tasks, or deferred tasks that have
                  already started executing elsewhere, to complete before returning.
                </p>
<p>
                  - Once all the <code class="computeroutput"><span class="identifier">future</span></code>s/<code class="computeroutput"><span class="identifier">shared_future</span></code>s supplied to the
                  call to <code class="computeroutput"><span class="identifier">when_all</span></code>
                  are ready, the <code class="computeroutput"><span class="identifier">future</span></code>s/<code class="computeroutput"><span class="identifier">shared_future</span></code>s are moved/copied
                  into the associated state of the future returned from the call
                  to <code class="computeroutput"><span class="identifier">when_all</span></code>, preserving
                  the order of the futures supplied to <code class="computeroutput"><span class="identifier">when_all</span></code>.
                </p>
<p>
                  - The collection is then stored as the result in a newly created
                  shared state.
                </p>
<p>
                  - A new future object that refers to the shared state is created.
                  The exact type of the future is further described below.
                </p>
<p>
                  - The <code class="computeroutput"><span class="identifier">future</span></code> returned
                  by <code class="computeroutput"><span class="identifier">when_all</span></code> will
                  not throw an exception when calling <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code> or <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>, but the futures held in the
                  output collection may.
                </p>
</dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">tuple</span><span class="special">&lt;&gt;&gt;</span></code>
                  if <code class="computeroutput"><span class="identifier">when_all</span></code> is
                  called with zero arguments.
                </p>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&gt;&gt;</span></code>
                  if the input cardinality is unknown at compile and the iterator
                  pair yields <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. The order of the futures in
                  the output vector will be the same as given by the input iterator.
                </p>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&gt;&gt;</span></code>
                  if the input cardinality is unknown at compile time and the iterator
                  pair yields <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. The order of the futures in
                  the output vector will be the same as given by the input iterator.
                </p>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">FutTypes</span><span class="special">&gt;...&gt;&gt;</span></code>
                  if inputs are fixed in number.
                </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd>
<p>
                  - All input futures valid() == false.
                </p>
<p>
                  - All input shared future valid() == true.
                </p>
<p>
                  - valid() == true.
                </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.when_any"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.when_any" title="Non-member function when_any() - EXTENSION">Non-member
          function <code class="computeroutput"><span class="identifier">when_any</span><span class="special">()</span></code>
          - EXTENSION</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">InputIterator</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">InputIterator</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">&gt;&gt;</span>
  <span class="identifier">when_any</span><span class="special">(</span><span class="identifier">InputIterator</span> <span class="identifier">first</span><span class="special">,</span> <span class="identifier">InputIterator</span> <span class="identifier">last</span><span class="special">);</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span><span class="special">...</span> <span class="identifier">FutTypes</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">FutTypes</span><span class="special">&gt;...&gt;</span>
  <span class="identifier">when_any</span><span class="special">(</span><span class="identifier">FutTypes</span><span class="special">&amp;&amp;...</span> <span class="identifier">futures</span><span class="special">);</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Requires:</span></dt>
<dd><p>
                  - For the first overload, <code class="computeroutput"><span class="identifier">InputIterator</span></code>'s
                  value type shall be convertible to <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. All <code class="computeroutput"><span class="identifier">R</span></code>
                  types must be the same. If any of the <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code> or <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code> objects are in invalid state
                  (i.e. <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span>
                  <span class="special">==</span> <span class="keyword">false</span></code>),
                  the behavior is undefined. - For the second overload, <code class="computeroutput"><span class="identifier">FutTypes</span></code> is of type <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>
                  or <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. The effect of calling <code class="computeroutput"><span class="identifier">when_any</span></code> on a <code class="computeroutput"><span class="identifier">future</span></code>
                  or a <code class="computeroutput"><span class="identifier">shared_future</span></code>
                  object for which <code class="computeroutput"><span class="identifier">valid</span><span class="special">()</span> <span class="special">==</span>
                  <span class="keyword">false</span> <span class="identifier">is</span>
                  <span class="identifier">undefined</span></code>.
                </p></dd>
<dt><span class="term">Notes:</span></dt>
<dd>
<p>
                  - There are two variations of <code class="computeroutput"><span class="identifier">when_any</span>
                  </code>. The first version takes a pair of <code class="computeroutput"><span class="identifier">InputIterators</span></code>.
                  The second takes any arbitrary number of <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R0</span><span class="special">&gt;</span></code> and <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R1</span><span class="special">&gt;</span></code> objects, where <code class="computeroutput"><span class="identifier">R0</span></code> and <code class="computeroutput"><span class="identifier">R1</span></code>
                  need not be the same type.
                </p>
<p>
                  - Calling the first signature of <code class="computeroutput"><span class="identifier">when_any</span>
                  </code> where <code class="computeroutput"><span class="identifier">InputIterator</span></code>
                  first equals last, returns a future with an empty <code class="computeroutput"><span class="identifier">vector</span></code> that is immediately ready.
                </p>
<p>
                  - Calling the second signature of <code class="computeroutput"><span class="identifier">when_any</span></code>
                  with no arguments returns a future&lt;tuple&lt;&gt;&gt; that is
                  immediately ready.
                </p>
</dd>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                  - Each of the futures supplied to <code class="computeroutput"><span class="identifier">when_any</span></code>
                  is checked in the order supplied. If a given future is ready, then
                  no further futures are checked, and the call to <code class="computeroutput"><span class="identifier">when_any</span></code>
                  returns immediately. If a given future refers to a deferred task
                  that has not yet started execution, then no further futures are
                  checked, that task is executed, and the call to <code class="computeroutput"><span class="identifier">when_any</span></code>
                  then returns immediately.
                </p>
<p>
                  - The call to <code class="computeroutput"><span class="identifier">when_any</span></code>
                  does not wait for non-deferred tasks, or deferred tasks that have
                  already started executing elsewhere, to complete before returning.
                </p>
<p>
                  - Once at least one of the futures supplied to the call to <code class="computeroutput"><span class="identifier">when_any</span></code> are ready, the futures
                  are moved into the associated state of the future returned from
                  the call to <code class="computeroutput"><span class="identifier">when_any</span></code>,
                  preserving the order of the futures supplied to <code class="computeroutput"><span class="identifier">when_any</span></code>.
                  That future is then ready.
                </p>
<p>
                  - The collection is then stored as the result in a newly created
                  shared state.
                </p>
<p>
                  - A new future object that refers to the shared state is created.
                  The exact type of the future is further described below.
                </p>
<p>
                  - The future returned by <code class="computeroutput"><span class="identifier">when_any</span></code>
                  will not throw an exception when calling <code class="computeroutput"><span class="identifier">wait</span><span class="special">()</span></code> or <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>, but the futures held in the
                  output collection may.
                </p>
</dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">tuple</span><span class="special">&lt;&gt;&gt;</span></code>
                  if <code class="computeroutput"><span class="identifier">when_any</span> </code> is
                  called with zero arguments.
                </p>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&gt;&gt;</span></code>
                  if the input cardinality is unknown at compile and the iterator
                  pair yields <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. The order of the futures in
                  the output vector will be the same as given by the input iterator.
                </p>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;&gt;&gt;</span></code>
                  if the input cardinality is unknown at compile time and the iterator
                  pair yields <code class="computeroutput"><span class="identifier">shared_future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span></code>. The order of the futures in
                  the output vector will be the same as given by the input iterator.
                </p>
<p>
                  - <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">tuple</span><span class="special">&lt;</span><span class="identifier">decat_t</span><span class="special">&lt;</span><span class="identifier">FutTypes</span><span class="special">&gt;...&gt;&gt;</span></code>
                  if inputs are fixed in number.
                </p>
</dd>
<dt><span class="term">Postconditions:</span></dt>
<dd>
<p>
                  - All input futures valid() == false.
                </p>
<p>
                  - All input shared_futures valid() == true.
                </p>
<p>
                  - valid() == true.
                </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.make_ready_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.make_ready_future" title="Non-member function make_ready_future() EXTENSION">Non-member
          function <code class="computeroutput"><span class="identifier">make_ready_future</span><span class="special">()</span></code> EXTENSION</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">V</span><span class="special">&gt;</span> <span class="identifier">make_ready_future</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">value</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
<span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;</span> <span class="identifier">make_ready_future</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">make_ready_future</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">ex</span><span class="special">);</span>  <span class="comment">// DEPRECATED</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">make_ready_future</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">ex</span><span class="special">);</span>  <span class="comment">// DEPRECATED</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Remark:</span></dt>
<dd><p>
                  where <code class="computeroutput"><span class="identifier">V</span></code> is determined
                  as follows: Let <code class="computeroutput"><span class="identifier">U</span></code>
                  be <code class="computeroutput"><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span></code>.
                  Then <code class="computeroutput"><span class="identifier">V</span></code> is <code class="computeroutput"><span class="identifier">X</span><span class="special">&amp;</span></code>
                  if <code class="computeroutput"><span class="identifier">U</span></code> equals <code class="computeroutput"><span class="identifier">reference_wrapper</span><span class="special">&lt;</span><span class="identifier">X</span><span class="special">&gt;</span></code>,
                  otherwise <code class="computeroutput"><span class="identifier">V</span></code> is
                  <code class="computeroutput"><span class="identifier">U</span></code>.
                </p></dd>
<dt><span class="term">Effects:</span></dt>
<dd>
<p>
                  - value prototype: The value that is passed into the function is
                  moved to the shared state of the returned future if it is an rvalue.
                  Otherwise the value is copied to the shared state of the returned
                  future.
                </p>
<p>
                  - exception: The exception that is passed into the function is
                  copied to the shared state of the returned future.
                </p>
<p>
                  .
                </p>
</dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                  - a ready future with the value set with <code class="computeroutput"><span class="identifier">value</span></code>
                </p>
<p>
                  - a ready future with the exception set with <code class="computeroutput"><span class="identifier">ex</span></code>
                </p>
<p>
                  - a ready future&lt;void&gt; with the value set (void).
                </p>
</dd>
<dt><span class="term">Postcondition:</span></dt>
<dd>
<p>
                  - Returned future, valid() == true
                </p>
<p>
                  - Returned future, is_ready() = true
                </p>
<p>
                  - Returned future, has_value() = true or has_exception() depending
                  on the prototype.
                </p>
</dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.make_exceptional"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.make_exceptional" title="Non-member function make_exceptional() EXTENSION">Non-member
          function <code class="computeroutput"><span class="identifier">make_exceptional</span><span class="special">()</span></code> EXTENSION</a>
</h5></div></div></div>
<pre class="programlisting"><span class="identifier">exceptional_ptr</span> <span class="identifier">make_exceptional</span><span class="special">(</span><span class="identifier">exception_ptr</span> <span class="identifier">ex</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">E</span><span class="special">&gt;</span>
  <span class="identifier">exceptional_ptr</span> <span class="identifier">make_exceptional</span><span class="special">(</span><span class="identifier">E</span> <span class="identifier">ex</span><span class="special">);</span>  <span class="comment">// EXTENSION</span>
<span class="identifier">exceptional_ptr</span> <span class="identifier">make_exceptional</span><span class="special">();</span>  <span class="comment">// EXTENSION</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                  The exception that is passed in to the function or the current
                  exception if no parameter is given is moved into the returned
                  <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code>
                  if it is an rvalue. Otherwise the exception is copied into the
                  returned <code class="computeroutput"><span class="identifier">exceptional_ptr</span></code>.
                </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd><p>
                  An exceptional_ptr instance implicitly convertible to a future&lt;T&gt;
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.make_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.make_future" title="Non-member function make_future() DEPRECATED">Non-member
          function <code class="computeroutput"><span class="identifier">make_future</span><span class="special">()</span></code>
          DEPRECATED</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span> <span class="identifier">make_future</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">value</span><span class="special">);</span>  <span class="comment">// DEPRECATED</span>
<span class="identifier">future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;</span> <span class="identifier">make_future</span><span class="special">();</span>  <span class="comment">// DEPRECATED</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                  The value that is passed into the function is moved to the shared
                  state of the returned function if it is an rvalue. Otherwise the
                  value is copied to the shared state of the returned function. .
                </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                  - future&lt;T&gt;, if function is given a value of type T
                </p>
<p>
                  - future&lt;void&gt;, if the function is not given any inputs.
                </p>
</dd>
<dt><span class="term">Postcondition:</span></dt>
<dd>
<p>
                  - Returned future&lt;T&gt;, valid() == true
                </p>
<p>
                  - Returned future&lt;T&gt;, is_ready() = true
                </p>
</dd>
<dt><span class="term">See:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">make_ready_future</span><span class="special">()</span></code>
                </p></dd>
</dl>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="thread.synchronization.futures.reference.make_shared_future"></a><a class="link" href="futures.html#thread.synchronization.futures.reference.make_shared_future" title="Non-member function make_shared_future() DEPRECATED">Non-member
          function <code class="computeroutput"><span class="identifier">make_shared_future</span><span class="special">()</span></code> DEPRECATED</a>
</h5></div></div></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">shared_future</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">decay</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">&gt;</span> <span class="identifier">make_shared_future</span><span class="special">(</span><span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">value</span><span class="special">);</span>  <span class="comment">// DEPRECATED</span>
<span class="identifier">shared_future</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;</span> <span class="identifier">make_shared_future</span><span class="special">();</span>  <span class="comment">// DEPRECATED</span>
</pre>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">Effects:</span></dt>
<dd><p>
                  The value that is passed in to the function is moved to the shared
                  state of the returned function if it is an rvalue. Otherwise the
                  value is copied to the shared state of the returned function. .
                </p></dd>
<dt><span class="term">Returns:</span></dt>
<dd>
<p>
                  - shared_future&lt;T&gt;, if function is given a value of type
                  T
                </p>
<p>
                  - shared_future&lt;void&gt;, if the function is not given any inputs.
                </p>
</dd>
<dt><span class="term">Postcondition:</span></dt>
<dd>
<p>
                  - Returned shared_future&lt;T&gt;, valid() == true
                </p>
<p>
                  - Returned shared_future&lt;T&gt;, is_ready() = true
                </p>
</dd>
<dt><span class="term">See:</span></dt>
<dd><p>
                  <code class="computeroutput"><span class="identifier">make_ready_future</span><span class="special">()</span></code> and <code class="computeroutput"><span class="identifier">future</span><span class="special">&lt;&gt;::</span><span class="identifier">share</span><span class="special">()</span></code>
                </p></dd>
</dl>
</div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2007 -11 Anthony Williams<br>Copyright &#169; 2011 -15 Vicente J. Botet Escriba<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="executors.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../synchronization.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../thread_local_storage.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
