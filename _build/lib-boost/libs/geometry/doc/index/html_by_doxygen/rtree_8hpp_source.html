<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Boost.Geometry.Index: /home/travis/build/boostorg/boost/boost/geometry/index/rtree.hpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Boost.Geometry.Index
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/travis/build/boostorg/boost/boost/geometry/index/rtree.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Boost.Geometry Index</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// R-tree implementation</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">// Copyright (c) 2008 Federico J. Fernandez.</span>
<a name="l00006"></a>00006 <span class="comment">// Copyright (c) 2011-2015 Adam Wulkiewicz, Lodz, Poland.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// Use, modification and distribution is subject to the Boost Software License,</span>
<a name="l00009"></a>00009 <span class="comment">// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at</span>
<a name="l00010"></a>00010 <span class="comment">// http://www.boost.org/LICENSE_1_0.txt)</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#ifndef BOOST_GEOMETRY_INDEX_RTREE_HPP</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#define BOOST_GEOMETRY_INDEX_RTREE_HPP</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="comment">// STD</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="comment">// Boost</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;boost/tuple/tuple.hpp&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;boost/move/move.hpp&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment">// Boost.Geometry</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;boost/geometry/algorithms/detail/comparable_distance/interface.hpp&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;boost/geometry/algorithms/centroid.hpp&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;boost/geometry/algorithms/covered_by.hpp&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;boost/geometry/algorithms/disjoint.hpp&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;boost/geometry/algorithms/equals.hpp&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;boost/geometry/algorithms/intersects.hpp&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;boost/geometry/algorithms/overlaps.hpp&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;boost/geometry/algorithms/touches.hpp&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;boost/geometry/algorithms/within.hpp&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;boost/geometry/geometries/point.hpp&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;boost/geometry/geometries/box.hpp&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;boost/geometry/strategies/strategies.hpp&gt;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">// Boost.Geometry.Index</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;boost/geometry/index/detail/config_begin.hpp&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;boost/geometry/index/detail/assert.hpp&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;boost/geometry/index/detail/exception.hpp&gt;</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/options.hpp&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#include &lt;boost/geometry/index/indexable.hpp&gt;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;boost/geometry/index/equal_to.hpp&gt;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;boost/geometry/index/detail/translator.hpp&gt;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;boost/geometry/index/predicates.hpp&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;boost/geometry/index/distance_predicates.hpp&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/adaptors.hpp&gt;</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;boost/geometry/index/detail/meta.hpp&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &lt;boost/geometry/index/detail/utilities.hpp&gt;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/node/node.hpp&gt;</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;boost/geometry/index/detail/algorithms/is_valid.hpp&gt;</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/insert.hpp&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/iterator.hpp&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/remove.hpp&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/copy.hpp&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/destroy.hpp&gt;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/spatial_query.hpp&gt;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/distance_query.hpp&gt;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/count.hpp&gt;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/visitors/children_box.hpp&gt;</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/linear/linear.hpp&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/quadratic/quadratic.hpp&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/rstar/rstar.hpp&gt;</span>
<a name="l00074"></a>00074 <span class="comment">//#include &lt;boost/geometry/extensions/index/detail/rtree/kmeans/kmeans.hpp&gt;</span>
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/pack_create.hpp&gt;</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="preprocessor">#include &lt;boost/geometry/index/inserter.hpp&gt;</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/utilities/view.hpp&gt;</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/iterators.hpp&gt;</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &lt;boost/geometry/index/detail/rtree/query_iterators.hpp&gt;</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="preprocessor">#ifdef BOOST_GEOMETRY_INDEX_DETAIL_EXPERIMENTAL</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="comment">// serialization</span>
<a name="l00087"></a>00087 <span class="preprocessor">#include &lt;boost/geometry/index/detail/serialization.hpp&gt;</span>
<a name="l00088"></a>00088 <span class="preprocessor">#endif</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>
<a name="l00090"></a>00090 <span class="comment">// TODO change the name to bounding_tree</span>
<a name="l00091"></a>00091 
<a name="l00096"></a>00096 <span class="keyword">namespace </span>boost { <span class="keyword">namespace </span>geometry { <span class="keyword">namespace </span>index {
<a name="l00097"></a>00097 
<a name="l00148"></a>00148 <span class="keyword">template</span> &lt;
<a name="l00149"></a>00149     <span class="keyword">typename</span> Value,
<a name="l00150"></a>00150     <span class="keyword">typename</span> Parameters,
<a name="l00151"></a>00151     <span class="keyword">typename</span> IndexableGetter = index::indexable&lt;Value&gt;,
<a name="l00152"></a>00152     <span class="keyword">typename</span> EqualTo = index::equal_to&lt;Value&gt;,
<a name="l00153"></a>00153     <span class="keyword">typename</span> Allocator = std::allocator&lt;Value&gt;
<a name="l00154"></a>00154 &gt;
<a name="l00155"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html">00155</a> <span class="keyword">class </span><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>
<a name="l00156"></a>00156 {
<a name="l00157"></a>00157     BOOST_COPYABLE_AND_MOVABLE(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>)
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="keyword">public</span>:
<a name="l00161"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757">00161</a>     <span class="keyword">typedef</span> Value <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>;
<a name="l00163"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17">00163</a>     <span class="keyword">typedef</span> Parameters <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a>;
<a name="l00165"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5">00165</a>     <span class="keyword">typedef</span> IndexableGetter <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>;
<a name="l00167"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b">00167</a>     <span class="keyword">typedef</span> EqualTo <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a>;
<a name="l00169"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e">00169</a>     <span class="keyword">typedef</span> Allocator <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a>;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="comment">// TODO: SHOULD THIS TYPE BE REMOVED?</span>
<a name="l00173"></a>00173 <span class="comment"></span>    <span class="keyword">typedef</span> <span class="keyword">typename</span> index::detail::indexable_type&lt;
<a name="l00174"></a>00174         detail::translator&lt;IndexableGetter, EqualTo&gt;
<a name="l00175"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a28e88e55d260a454688fe1bd5e5af96b">00175</a>     &gt;::type <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a28e88e55d260a454688fe1bd5e5af96b" title="The Indexable type to which Value is translated.">indexable_type</a>;
<a name="l00176"></a>00176 
<a name="l00178"></a>00178     <span class="keyword">typedef</span> geometry::model::box&lt;
<a name="l00179"></a>00179                 geometry::model::point&lt;
<a name="l00180"></a>00180                     <span class="keyword">typename</span> coordinate_type&lt;indexable_type&gt;::type,
<a name="l00181"></a>00181                     dimension&lt;indexable_type&gt;::value,
<a name="l00182"></a>00182                     <span class="keyword">typename</span> coordinate_system&lt;indexable_type&gt;::type
<a name="l00183"></a>00183                 &gt;
<a name="l00184"></a>00184             &gt;
<a name="l00185"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a12e80f9da4c68e0e687f1c2012321147">00185</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a12e80f9da4c68e0e687f1c2012321147" title="The Box type used by the R-tree.">bounds_type</a>;
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="keyword">private</span>:
<a name="l00188"></a>00188 
<a name="l00189"></a>00189     <span class="keyword">typedef</span> detail::translator&lt;IndexableGetter, EqualTo&gt; translator_type;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <span class="keyword">typedef</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a12e80f9da4c68e0e687f1c2012321147" title="The Box type used by the R-tree.">bounds_type</a> box_type;
<a name="l00192"></a>00192     <span class="keyword">typedef</span> <span class="keyword">typename</span> detail::rtree::options_type&lt;Parameters&gt;::type options_type;
<a name="l00193"></a>00193     <span class="keyword">typedef</span> <span class="keyword">typename</span> options_type::node_tag node_tag;
<a name="l00194"></a>00194     <span class="keyword">typedef</span> detail::rtree::allocators&lt;allocator_type, value_type, typename options_type::parameters_type, box_type, node_tag&gt; allocators_type;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="keyword">typedef</span> <span class="keyword">typename</span> detail::rtree::node&lt;value_type, typename options_type::parameters_type, box_type, allocators_type, node_tag&gt;::type node;
<a name="l00197"></a>00197     <span class="keyword">typedef</span> <span class="keyword">typename</span> detail::rtree::internal_node&lt;value_type, typename options_type::parameters_type, box_type, allocators_type, node_tag&gt;::type internal_node;
<a name="l00198"></a>00198     <span class="keyword">typedef</span> <span class="keyword">typename</span> detail::rtree::leaf&lt;value_type, typename options_type::parameters_type, box_type, allocators_type, node_tag&gt;::type leaf;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::node_pointer node_pointer;
<a name="l00201"></a>00201     typedef ::boost::container::allocator_traits&lt;Allocator&gt; allocator_traits_type;
<a name="l00202"></a>00202     <span class="keyword">typedef</span> detail::rtree::subtree_destroyer&lt;value_type, options_type, translator_type, box_type, allocators_type&gt; subtree_destroyer;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keyword">friend</span> <span class="keyword">class </span>detail::rtree::utilities::view&lt;<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>&gt;;
<a name="l00205"></a>00205 <span class="preprocessor">#ifdef BOOST_GEOMETRY_INDEX_DETAIL_EXPERIMENTAL</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>    <span class="keyword">friend</span> <span class="keyword">class </span>detail::rtree::private_view&lt;<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>&gt;;
<a name="l00207"></a>00207     <span class="keyword">friend</span> <span class="keyword">class </span>detail::rtree::const_private_view&lt;<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>&gt;;
<a name="l00208"></a>00208 <span class="preprocessor">#endif</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>
<a name="l00210"></a>00210 <span class="keyword">public</span>:
<a name="l00211"></a>00211 
<a name="l00213"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5301c3d7ee3589751579e0573a9e8165">00213</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::reference <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5301c3d7ee3589751579e0573a9e8165" title="Type of reference to Value.">reference</a>;
<a name="l00215"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a615e622930be97ab1f3b8ceee641feaf">00215</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::const_reference <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a615e622930be97ab1f3b8ceee641feaf" title="Type of reference to const Value.">const_reference</a>;
<a name="l00217"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a762ced6b98d2cc6503e2b00549c6a89a">00217</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::pointer <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a762ced6b98d2cc6503e2b00549c6a89a" title="Type of pointer to Value.">pointer</a>;
<a name="l00219"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#abad30462044d5d8fb607c24a05e8c9c2">00219</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::const_pointer <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#abad30462044d5d8fb607c24a05e8c9c2" title="Type of pointer to const Value.">const_pointer</a>;
<a name="l00221"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ac256168e9371a070515fc61f29c691ed">00221</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::difference_type <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ac256168e9371a070515fc61f29c691ed" title="Type of difference type.">difference_type</a>;
<a name="l00223"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5">00223</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> allocators_type::size_type <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a>;
<a name="l00224"></a>00224 
<a name="l00226"></a>00226     <span class="keyword">typedef</span> index::detail::rtree::iterators::iterator
<a name="l00227"></a>00227         &lt;
<a name="l00228"></a>00228             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type
<a name="l00229"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde">00229</a>         &gt; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde" title="Type of const iterator, category ForwardIterator.">const_iterator</a>;
<a name="l00230"></a>00230 
<a name="l00232"></a>00232     <span class="keyword">typedef</span> index::detail::rtree::iterators::query_iterator
<a name="l00233"></a>00233         &lt;
<a name="l00234"></a>00234             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, allocators_type
<a name="l00235"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad144a7704ad878caaa84cda79b140855">00235</a>         &gt; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad144a7704ad878caaa84cda79b140855" title="Type of const query iterator, category ForwardIterator.">const_query_iterator</a>;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 <span class="keyword">public</span>:
<a name="l00238"></a>00238 
<a name="l00249"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c">00249</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a> <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a> = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a>(),
<a name="l00250"></a>00250                           <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a> <span class="keyword">const</span>&amp; getter = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00251"></a>00251                           <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a> <span class="keyword">const</span>&amp; equal = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a>())
<a name="l00252"></a>00252         : m_members(getter, equal, <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>)
<a name="l00253"></a>00253     {}
<a name="l00254"></a>00254 
<a name="l00266"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a1a6b696d4855cbf1866196fe058c3a87">00266</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a> <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>,
<a name="l00267"></a>00267                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a> <span class="keyword">const</span>&amp; getter,
<a name="l00268"></a>00268                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a> <span class="keyword">const</span>&amp; equal,
<a name="l00269"></a>00269                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a> <span class="keyword">const</span>&amp; allocator)
<a name="l00270"></a>00270         : m_members(getter, equal, parameters, allocator)
<a name="l00271"></a>00271     {}
<a name="l00272"></a>00272 
<a name="l00290"></a>00290     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Iterator&gt;
<a name="l00291"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a037f17d8a1dfa4a818ff471dec61c912">00291</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(Iterator first, Iterator last,
<a name="l00292"></a>00292                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a> <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a> = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a>(),
<a name="l00293"></a>00293                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a> <span class="keyword">const</span>&amp; getter = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00294"></a>00294                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a> <span class="keyword">const</span>&amp; equal = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a>(),
<a name="l00295"></a>00295                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a> <span class="keyword">const</span>&amp; allocator = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a>())
<a name="l00296"></a>00296         : m_members(getter, equal, <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>, allocator)
<a name="l00297"></a>00297     {
<a name="l00298"></a>00298         <span class="keyword">typedef</span> detail::rtree::pack&lt;value_type, options_type, translator_type, box_type, allocators_type&gt; pack;
<a name="l00299"></a>00299         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> vc = 0, ll = 0;
<a name="l00300"></a>00300         m_members.root = pack::apply(first, last, vc, ll,
<a name="l00301"></a>00301                                      m_members.parameters(), m_members.translator(), m_members.allocators());
<a name="l00302"></a>00302         m_members.values_count = vc;
<a name="l00303"></a>00303         m_members.leafs_level = ll;
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305 
<a name="l00322"></a>00322     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Range&gt;
<a name="l00323"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a7b96b715c52ddc13d7a81db344825848">00323</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(Range <span class="keyword">const</span>&amp; rng,
<a name="l00324"></a>00324                           <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a> <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a> = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a>(),
<a name="l00325"></a>00325                           <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a> <span class="keyword">const</span>&amp; getter = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00326"></a>00326                           <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a> <span class="keyword">const</span>&amp; equal = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a>(),
<a name="l00327"></a>00327                           <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a> <span class="keyword">const</span>&amp; allocator = <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a>())
<a name="l00328"></a>00328         : m_members(getter, equal, <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>, allocator)
<a name="l00329"></a>00329     {
<a name="l00330"></a>00330         <span class="keyword">typedef</span> detail::rtree::pack&lt;value_type, options_type, translator_type, box_type, allocators_type&gt; pack;
<a name="l00331"></a>00331         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> vc = 0, ll = 0;
<a name="l00332"></a>00332         m_members.root = pack::apply(::<a class="code" href="group__rtree__functions.html#ga2467dc6ac90303496abd6ebd136eba18" title="Returns the iterator pointing at the begin of the rtree values range.">boost::begin</a>(rng), ::<a class="code" href="group__rtree__functions.html#ga8fd1e53d8492643cbc9840ff715bb736" title="Returns the iterator pointing at the end of the rtree values range.">boost::end</a>(rng), vc, ll,
<a name="l00333"></a>00333                                      m_members.parameters(), m_members.translator(), m_members.allocators());
<a name="l00334"></a>00334         m_members.values_count = vc;
<a name="l00335"></a>00335         m_members.leafs_level = ll;
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337 
<a name="l00344"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af8db72811d2be53c409240204e63fb5a">00344</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af8db72811d2be53c409240204e63fb5a" title="The destructor.">~rtree</a>()
<a name="l00345"></a>00345     {
<a name="l00346"></a>00346         this-&gt;raw_destroy(*<span class="keyword">this</span>);
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348 
<a name="l00361"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a826fc3236e181ad718d5283e95d7866f">00361</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a> <span class="keyword">const</span>&amp; src)
<a name="l00362"></a>00362         : m_members(src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00363"></a>00363                     src.m_members.<a class="code" href="structboost_1_1geometry_1_1index_1_1equal__to.html" title="The function object comparing Values.">equal_to</a>(),
<a name="l00364"></a>00364                     src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>(),
<a name="l00365"></a>00365                     allocator_traits_type::select_on_container_copy_construction(src.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a17d9cef211feb7f674a5b4602f4cc81e" title="Returns allocator used by the rtree.">get_allocator</a>()))
<a name="l00366"></a>00366     {
<a name="l00367"></a>00367         this-&gt;raw_copy(src, *<span class="keyword">this</span>, <span class="keyword">false</span>);
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369 
<a name="l00383"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a72b6b75e083eea2ed26f54d4a2265375">00383</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a> <span class="keyword">const</span>&amp; src, <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a> <span class="keyword">const</span>&amp; allocator)
<a name="l00384"></a>00384         : m_members(src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00385"></a>00385                     src.m_members.<a class="code" href="structboost_1_1geometry_1_1index_1_1equal__to.html" title="The function object comparing Values.">equal_to</a>(),
<a name="l00386"></a>00386                     src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>(), allocator)
<a name="l00387"></a>00387     {
<a name="l00388"></a>00388         this-&gt;raw_copy(src, *<span class="keyword">this</span>, <span class="keyword">false</span>);
<a name="l00389"></a>00389     }
<a name="l00390"></a>00390 
<a name="l00401"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aa8b27db8cb783282ab5274e6769da26a">00401</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(BOOST_RV_REF(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>) src)
<a name="l00402"></a>00402         : m_members(src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00403"></a>00403                     src.m_members.<a class="code" href="structboost_1_1geometry_1_1index_1_1equal__to.html" title="The function object comparing Values.">equal_to</a>(),
<a name="l00404"></a>00404                     src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>(),
<a name="l00405"></a>00405                     boost::move(src.m_members.allocators()))
<a name="l00406"></a>00406     {
<a name="l00407"></a>00407         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.values_count, src.m_members.values_count);
<a name="l00408"></a>00408         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.leafs_level, src.m_members.leafs_level);
<a name="l00409"></a>00409         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.root, src.m_members.root);
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411 
<a name="l00425"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a8508c4236d17ff39a1caef058aac8486">00425</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a>(BOOST_RV_REF(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>) src, <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a> <span class="keyword">const</span>&amp; allocator)
<a name="l00426"></a>00426         : m_members(src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>(),
<a name="l00427"></a>00427                     src.m_members.<a class="code" href="structboost_1_1geometry_1_1index_1_1equal__to.html" title="The function object comparing Values.">equal_to</a>(),
<a name="l00428"></a>00428                     src.m_members.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>(),
<a name="l00429"></a>00429                     allocator)
<a name="l00430"></a>00430     {
<a name="l00431"></a>00431         <span class="keywordflow">if</span> ( src.m_members.allocators() == allocator )
<a name="l00432"></a>00432         {
<a name="l00433"></a>00433             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.values_count, src.m_members.values_count);
<a name="l00434"></a>00434             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.leafs_level, src.m_members.leafs_level);
<a name="l00435"></a>00435             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.root, src.m_members.root);
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437         <span class="keywordflow">else</span>
<a name="l00438"></a>00438         {
<a name="l00439"></a>00439             this-&gt;raw_copy(src, *<span class="keyword">this</span>, <span class="keyword">false</span>);
<a name="l00440"></a>00440         }
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442 
<a name="l00455"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad0db5e9e41e1553f944b7e740dbbb883">00455</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a> &amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad0db5e9e41e1553f944b7e740dbbb883" title="The assignment operator.">operator=</a>(BOOST_COPY_ASSIGN_REF(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>) src)
<a name="l00456"></a>00456     {
<a name="l00457"></a>00457         <span class="keywordflow">if</span> ( &amp;src != <span class="keyword">this</span> )
<a name="l00458"></a>00458         {
<a name="l00459"></a>00459             allocators_type &amp; this_allocs = m_members.allocators();
<a name="l00460"></a>00460             allocators_type <span class="keyword">const</span>&amp; src_allocs = src.m_members.allocators();
<a name="l00461"></a>00461 
<a name="l00462"></a>00462             <span class="comment">// NOTE: if propagate is true for std allocators on darwin 4.2.1, glibc++</span>
<a name="l00463"></a>00463             <span class="comment">// (allocators stored as base classes of members_holder)</span>
<a name="l00464"></a>00464             <span class="comment">// copying them changes values_count, in this case it doesn&#39;t cause errors since data must be copied</span>
<a name="l00465"></a>00465             
<a name="l00466"></a>00466             <span class="keyword">typedef</span> boost::mpl::bool_&lt;
<a name="l00467"></a>00467                 allocator_traits_type::propagate_on_container_copy_assignment::value
<a name="l00468"></a>00468             &gt; propagate;
<a name="l00469"></a>00469             
<a name="l00470"></a>00470             <span class="keywordflow">if</span> ( propagate::value &amp;&amp; !(this_allocs == src_allocs) )
<a name="l00471"></a>00471                 this-&gt;raw_destroy(*<span class="keyword">this</span>);
<a name="l00472"></a>00472             detail::assign_cond(this_allocs, src_allocs, propagate());
<a name="l00473"></a>00473 
<a name="l00474"></a>00474             <span class="comment">// It uses m_allocators</span>
<a name="l00475"></a>00475             this-&gt;raw_copy(src, *<span class="keyword">this</span>, <span class="keyword">true</span>);
<a name="l00476"></a>00476         }
<a name="l00477"></a>00477 
<a name="l00478"></a>00478         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00479"></a>00479     }
<a name="l00480"></a>00480 
<a name="l00493"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af0bf9622ed3e901580b73ed39b746fb7">00493</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a> &amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad0db5e9e41e1553f944b7e740dbbb883" title="The assignment operator.">operator=</a>(BOOST_RV_REF(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a>) src)
<a name="l00494"></a>00494     {
<a name="l00495"></a>00495         <span class="keywordflow">if</span> ( &amp;src != <span class="keyword">this</span> )
<a name="l00496"></a>00496         {
<a name="l00497"></a>00497             allocators_type &amp; this_allocs = m_members.allocators();
<a name="l00498"></a>00498             allocators_type &amp; src_allocs = src.m_members.allocators();
<a name="l00499"></a>00499             
<a name="l00500"></a>00500             <span class="keywordflow">if</span> ( this_allocs == src_allocs )
<a name="l00501"></a>00501             {
<a name="l00502"></a>00502                 this-&gt;raw_destroy(*<span class="keyword">this</span>);
<a name="l00503"></a>00503 
<a name="l00504"></a>00504                 m_members.indexable_getter() = src.m_members.indexable_getter();
<a name="l00505"></a>00505                 m_members.equal_to() = src.m_members.equal_to();
<a name="l00506"></a>00506                 m_members.parameters() = src.m_members.parameters();
<a name="l00507"></a>00507 
<a name="l00508"></a>00508                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.values_count, src.m_members.values_count);
<a name="l00509"></a>00509                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.leafs_level, src.m_members.leafs_level);
<a name="l00510"></a>00510                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.root, src.m_members.root);
<a name="l00511"></a>00511 
<a name="l00512"></a>00512                 <span class="comment">// NOTE: if propagate is true for std allocators on darwin 4.2.1, glibc++</span>
<a name="l00513"></a>00513                 <span class="comment">// (allocators stored as base classes of members_holder)</span>
<a name="l00514"></a>00514                 <span class="comment">// moving them changes values_count</span>
<a name="l00515"></a>00515                 
<a name="l00516"></a>00516                 <span class="keyword">typedef</span> boost::mpl::bool_&lt;
<a name="l00517"></a>00517                     allocator_traits_type::propagate_on_container_move_assignment::value
<a name="l00518"></a>00518                 &gt; propagate;
<a name="l00519"></a>00519                 detail::move_cond(this_allocs, src_allocs, propagate());
<a name="l00520"></a>00520             }
<a name="l00521"></a>00521             <span class="keywordflow">else</span>
<a name="l00522"></a>00522             {
<a name="l00523"></a>00523 <span class="comment">// TODO - shouldn&#39;t here propagate_on_container_copy_assignment be checked like in operator=(const&amp;)?</span>
<a name="l00524"></a>00524 
<a name="l00525"></a>00525                 <span class="comment">// It uses m_allocators</span>
<a name="l00526"></a>00526                 this-&gt;raw_copy(src, *<span class="keyword">this</span>, <span class="keyword">true</span>);
<a name="l00527"></a>00527             }
<a name="l00528"></a>00528         }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 
<a name="l00543"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b">00543</a>     <span class="keywordtype">void</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">swap</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree</a> &amp; other)
<a name="l00544"></a>00544     {
<a name="l00545"></a>00545         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.indexable_getter(), other.m_members.indexable_getter());
<a name="l00546"></a>00546         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.equal_to(), other.m_members.equal_to());
<a name="l00547"></a>00547         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.parameters(), other.m_members.parameters());
<a name="l00548"></a>00548         
<a name="l00549"></a>00549         <span class="comment">// NOTE: if propagate is true for std allocators on darwin 4.2.1, glibc++</span>
<a name="l00550"></a>00550         <span class="comment">// (allocators stored as base classes of members_holder)</span>
<a name="l00551"></a>00551         <span class="comment">// swapping them changes values_count</span>
<a name="l00552"></a>00552         
<a name="l00553"></a>00553         <span class="keyword">typedef</span> boost::mpl::bool_&lt;
<a name="l00554"></a>00554             allocator_traits_type::propagate_on_container_swap::value
<a name="l00555"></a>00555         &gt; propagate;
<a name="l00556"></a>00556         detail::swap_cond(m_members.allocators(), other.m_members.allocators(), propagate());
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.values_count, other.m_members.values_count);
<a name="l00559"></a>00559         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.leafs_level, other.m_members.leafs_level);
<a name="l00560"></a>00560         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">boost::swap</a>(m_members.root, other.m_members.root);
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 
<a name="l00578"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86">00578</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86" title="Insert a value to the index.">insert</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a> <span class="keyword">const</span>&amp; value)
<a name="l00579"></a>00579     {
<a name="l00580"></a>00580         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00581"></a>00581             this-&gt;raw_create();
<a name="l00582"></a>00582 
<a name="l00583"></a>00583         this-&gt;raw_insert(value);
<a name="l00584"></a>00584     }
<a name="l00585"></a>00585 
<a name="l00602"></a>00602     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator&gt;
<a name="l00603"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a60d4c8790fd8810ff8b57f049e6bed8d">00603</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86" title="Insert a value to the index.">insert</a>(Iterator first, Iterator last)
<a name="l00604"></a>00604     {
<a name="l00605"></a>00605         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00606"></a>00606             this-&gt;raw_create();
<a name="l00607"></a>00607 
<a name="l00608"></a>00608         <span class="keywordflow">for</span> ( ; first != last ; ++first )
<a name="l00609"></a>00609             this-&gt;raw_insert(*first);
<a name="l00610"></a>00610     }
<a name="l00611"></a>00611 
<a name="l00627"></a>00627     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ConvertibleOrRange&gt;
<a name="l00628"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5db294b14ebf1319edcfc92e78c8167e">00628</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86" title="Insert a value to the index.">insert</a>(ConvertibleOrRange <span class="keyword">const</span>&amp; conv_or_rng)
<a name="l00629"></a>00629     {
<a name="l00630"></a>00630         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00631"></a>00631             this-&gt;raw_create();
<a name="l00632"></a>00632 
<a name="l00633"></a>00633         <span class="keyword">typedef</span> boost::mpl::bool_
<a name="l00634"></a>00634             &lt;
<a name="l00635"></a>00635                 boost::is_convertible&lt;ConvertibleOrRange, value_type&gt;::value
<a name="l00636"></a>00636             &gt; is_conv_t;
<a name="l00637"></a>00637 
<a name="l00638"></a>00638         this-&gt;insert_dispatch(conv_or_rng, is_conv_t());
<a name="l00639"></a>00639     }
<a name="l00640"></a>00640 
<a name="l00661"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a1ce933b0b833faec5349bfc27bde15d4">00661</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> <span class="keyword">remove</span>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a> <span class="keyword">const</span>&amp; value)
<a name="l00662"></a>00662     {
<a name="l00663"></a>00663         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00664"></a>00664             <span class="keywordflow">return</span> 0;
<a name="l00665"></a>00665 
<a name="l00666"></a>00666         <span class="keywordflow">return</span> this-&gt;raw_remove(value);
<a name="l00667"></a>00667     }
<a name="l00668"></a>00668 
<a name="l00692"></a>00692     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator&gt;
<a name="l00693"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aa97084231d17564a94f0142d095cecaa">00693</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> <span class="keyword">remove</span>(Iterator first, Iterator last)
<a name="l00694"></a>00694     {
<a name="l00695"></a>00695         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> result = 0;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00698"></a>00698             <span class="keywordflow">return</span> result;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700         <span class="keywordflow">for</span> ( ; first != last ; ++first )
<a name="l00701"></a>00701             result += this-&gt;raw_remove(*first);
<a name="l00702"></a>00702         <span class="keywordflow">return</span> result;
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704 
<a name="l00726"></a>00726     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ConvertibleOrRange&gt;
<a name="l00727"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a320cd1861ba7b43364ed53e1f93a4411">00727</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> <span class="keyword">remove</span>(ConvertibleOrRange <span class="keyword">const</span>&amp; conv_or_rng)
<a name="l00728"></a>00728     {
<a name="l00729"></a>00729         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00730"></a>00730             <span class="keywordflow">return</span> 0;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732         <span class="keyword">typedef</span> boost::mpl::bool_
<a name="l00733"></a>00733             &lt;
<a name="l00734"></a>00734                 boost::is_convertible&lt;ConvertibleOrRange, value_type&gt;::value
<a name="l00735"></a>00735             &gt; is_conv_t;
<a name="l00736"></a>00736 
<a name="l00737"></a>00737         <span class="keywordflow">return</span> this-&gt;remove_dispatch(conv_or_rng, is_conv_t());
<a name="l00738"></a>00738     }
<a name="l00739"></a>00739 
<a name="l00828"></a>00828     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Predicates, <span class="keyword">typename</span> OutIter&gt;
<a name="l00829"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a7baa88eb4e7a5c640ab847513de45b3e">00829</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a7baa88eb4e7a5c640ab847513de45b3e" title="Finds values meeting passed predicates e.g. nearest to some Point and/or intersecting some Box...">query</a>(Predicates <span class="keyword">const</span>&amp; predicates, OutIter out_it)<span class="keyword"> const</span>
<a name="l00830"></a>00830 <span class="keyword">    </span>{
<a name="l00831"></a>00831         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l00832"></a>00832             <span class="keywordflow">return</span> 0;
<a name="l00833"></a>00833 
<a name="l00834"></a>00834         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> distance_predicates_count = detail::predicates_count_distance&lt;Predicates&gt;::value;
<a name="l00835"></a>00835         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> is_distance_predicate = 0 &lt; distance_predicates_count;
<a name="l00836"></a>00836         BOOST_MPL_ASSERT_MSG((distance_predicates_count &lt;= 1), PASS_ONLY_ONE_DISTANCE_PREDICATE, (Predicates));
<a name="l00837"></a>00837 
<a name="l00838"></a>00838         <span class="keywordflow">return</span> query_dispatch(predicates, out_it, boost::mpl::bool_&lt;is_distance_predicate&gt;());
<a name="l00839"></a>00839     }
<a name="l00840"></a>00840 
<a name="l00883"></a>00883     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Predicates&gt;
<a name="l00884"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a63d15f3b5b157a47045fcac3fec3b7a0">00884</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad144a7704ad878caaa84cda79b140855" title="Type of const query iterator, category ForwardIterator.">const_query_iterator</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a63d15f3b5b157a47045fcac3fec3b7a0" title="Returns a query iterator pointing at the begin of the query range.">qbegin</a>(Predicates <span class="keyword">const</span>&amp; predicates)<span class="keyword"> const</span>
<a name="l00885"></a>00885 <span class="keyword">    </span>{
<a name="l00886"></a>00886         <span class="keywordflow">return</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad144a7704ad878caaa84cda79b140855" title="Type of const query iterator, category ForwardIterator.">const_query_iterator</a>(qbegin_(predicates));
<a name="l00887"></a>00887     }
<a name="l00888"></a>00888 
<a name="l00927"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af3b16f4732fa8113c0b2187005182513">00927</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad144a7704ad878caaa84cda79b140855" title="Type of const query iterator, category ForwardIterator.">const_query_iterator</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af3b16f4732fa8113c0b2187005182513" title="Returns a query iterator pointing at the end of the query range.">qend</a>()<span class="keyword"> const</span>
<a name="l00928"></a>00928 <span class="keyword">    </span>{
<a name="l00929"></a>00929         <span class="keywordflow">return</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad144a7704ad878caaa84cda79b140855" title="Type of const query iterator, category ForwardIterator.">const_query_iterator</a>();
<a name="l00930"></a>00930     }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 <span class="preprocessor">#ifndef BOOST_GEOMETRY_INDEX_DETAIL_EXPERIMENTAL</span>
<a name="l00933"></a>00933 <span class="preprocessor"></span><span class="keyword">private</span>:
<a name="l00934"></a>00934 <span class="preprocessor">#endif</span>
<a name="l00935"></a>00935 <span class="preprocessor"></span>
<a name="l00988"></a>00988     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Predicates&gt;
<a name="l00989"></a>00989     <span class="keyword">typename</span> boost::mpl::if_c&lt;
<a name="l00990"></a>00990         detail::predicates_count_distance&lt;Predicates&gt;::value == 0,
<a name="l00991"></a>00991         detail::rtree::iterators::spatial_query_iterator&lt;value_type, options_type, translator_type, box_type, allocators_type, Predicates&gt;,
<a name="l00992"></a>00992         detail::rtree::iterators::distance_query_iterator&lt;
<a name="l00993"></a>00993             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type, Predicates,
<a name="l00994"></a>00994             detail::predicates_find_distance&lt;Predicates&gt;::value
<a name="l00995"></a>00995         &gt;
<a name="l00996"></a>00996     &gt;::type
<a name="l00997"></a>00997     qbegin_(Predicates <span class="keyword">const</span>&amp; predicates)<span class="keyword"> const</span>
<a name="l00998"></a>00998 <span class="keyword">    </span>{
<a name="l00999"></a>00999         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> distance_predicates_count = detail::predicates_count_distance&lt;Predicates&gt;::value;
<a name="l01000"></a>01000         BOOST_MPL_ASSERT_MSG((distance_predicates_count &lt;= 1), PASS_ONLY_ONE_DISTANCE_PREDICATE, (Predicates));
<a name="l01001"></a>01001 
<a name="l01002"></a>01002         <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::mpl::if_c&lt;
<a name="l01003"></a>01003             detail::predicates_count_distance&lt;Predicates&gt;::value == 0,
<a name="l01004"></a>01004             detail::rtree::iterators::spatial_query_iterator&lt;value_type, options_type, translator_type, box_type, allocators_type, Predicates&gt;,
<a name="l01005"></a>01005             detail::rtree::iterators::distance_query_iterator&lt;
<a name="l01006"></a>01006                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type, Predicates,
<a name="l01007"></a>01007                 detail::predicates_find_distance&lt;Predicates&gt;::value
<a name="l01008"></a>01008             &gt;
<a name="l01009"></a>01009         &gt;::type iterator_type;
<a name="l01010"></a>01010 
<a name="l01011"></a>01011         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l01012"></a>01012             <span class="keywordflow">return</span> iterator_type(m_members.translator(), predicates);
<a name="l01013"></a>01013 
<a name="l01014"></a>01014         <span class="keywordflow">return</span> iterator_type(m_members.root, m_members.translator(), predicates);
<a name="l01015"></a>01015     }
<a name="l01016"></a>01016 
<a name="l01049"></a>01049     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Predicates&gt;
<a name="l01050"></a>01050     <span class="keyword">typename</span> boost::mpl::if_c&lt;
<a name="l01051"></a>01051         detail::predicates_count_distance&lt;Predicates&gt;::value == 0,
<a name="l01052"></a>01052         detail::rtree::iterators::spatial_query_iterator&lt;value_type, options_type, translator_type, box_type, allocators_type, Predicates&gt;,
<a name="l01053"></a>01053         detail::rtree::iterators::distance_query_iterator&lt;
<a name="l01054"></a>01054             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type, Predicates,
<a name="l01055"></a>01055             detail::predicates_find_distance&lt;Predicates&gt;::value
<a name="l01056"></a>01056         &gt;
<a name="l01057"></a>01057     &gt;::type
<a name="l01058"></a>01058     qend_(Predicates <span class="keyword">const</span>&amp; predicates)<span class="keyword"> const</span>
<a name="l01059"></a>01059 <span class="keyword">    </span>{
<a name="l01060"></a>01060         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> distance_predicates_count = detail::predicates_count_distance&lt;Predicates&gt;::value;
<a name="l01061"></a>01061         BOOST_MPL_ASSERT_MSG((distance_predicates_count &lt;= 1), PASS_ONLY_ONE_DISTANCE_PREDICATE, (Predicates));
<a name="l01062"></a>01062 
<a name="l01063"></a>01063         <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::mpl::if_c&lt;
<a name="l01064"></a>01064             detail::predicates_count_distance&lt;Predicates&gt;::value == 0,
<a name="l01065"></a>01065             detail::rtree::iterators::spatial_query_iterator&lt;value_type, options_type, translator_type, box_type, allocators_type, Predicates&gt;,
<a name="l01066"></a>01066             detail::rtree::iterators::distance_query_iterator&lt;
<a name="l01067"></a>01067                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type, Predicates,
<a name="l01068"></a>01068                 detail::predicates_find_distance&lt;Predicates&gt;::value
<a name="l01069"></a>01069             &gt;
<a name="l01070"></a>01070         &gt;::type iterator_type;
<a name="l01071"></a>01071 
<a name="l01072"></a>01072         <span class="keywordflow">return</span> iterator_type(m_members.translator(), predicates);
<a name="l01073"></a>01073     }
<a name="l01074"></a>01074 
<a name="l01124"></a>01124     detail::rtree::iterators::end_query_iterator&lt;value_type, allocators_type&gt;
<a name="l01125"></a>01125     qend_()<span class="keyword"> const</span>
<a name="l01126"></a>01126 <span class="keyword">    </span>{
<a name="l01127"></a>01127         <span class="keywordflow">return</span> detail::rtree::iterators::end_query_iterator&lt;value_type, allocators_type&gt;();
<a name="l01128"></a>01128     }
<a name="l01129"></a>01129 
<a name="l01130"></a>01130 <span class="keyword">public</span>:
<a name="l01131"></a>01131 
<a name="l01171"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a23219a7705ac491862c67be8baa34f0d">01171</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde" title="Type of const iterator, category ForwardIterator.">const_iterator</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a23219a7705ac491862c67be8baa34f0d" title="Returns the iterator pointing at the begin of the rtree values range.">begin</a>()<span class="keyword"> const</span>
<a name="l01172"></a>01172 <span class="keyword">    </span>{
<a name="l01173"></a>01173         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l01174"></a>01174             <span class="keywordflow">return</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde" title="Type of const iterator, category ForwardIterator.">const_iterator</a>();
<a name="l01175"></a>01175 
<a name="l01176"></a>01176         <span class="keywordflow">return</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde" title="Type of const iterator, category ForwardIterator.">const_iterator</a>(m_members.root);
<a name="l01177"></a>01177     }
<a name="l01178"></a>01178 
<a name="l01209"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a513f1bd9dfcd022acb208e62115b29b1">01209</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde" title="Type of const iterator, category ForwardIterator.">const_iterator</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a513f1bd9dfcd022acb208e62115b29b1" title="Returns the iterator pointing at the end of the rtree values range.">end</a>()<span class="keyword"> const</span>
<a name="l01210"></a>01210 <span class="keyword">    </span>{
<a name="l01211"></a>01211         <span class="keywordflow">return</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a701f65f0d6cf2e8b7be7f1c4b8fb7fde" title="Type of const iterator, category ForwardIterator.">const_iterator</a>();
<a name="l01212"></a>01212     }
<a name="l01213"></a>01213 
<a name="l01222"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ac9f152c8c96525e3735b81635d8171b1">01222</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ac9f152c8c96525e3735b81635d8171b1" title="Returns the number of stored values.">size</a>()<span class="keyword"> const</span>
<a name="l01223"></a>01223 <span class="keyword">    </span>{
<a name="l01224"></a>01224         <span class="keywordflow">return</span> m_members.values_count;
<a name="l01225"></a>01225     }
<a name="l01226"></a>01226 
<a name="l01235"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aa5302ce1c26105d722aac20793e83f0e">01235</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aa5302ce1c26105d722aac20793e83f0e" title="Query if the container is empty.">empty</a>()<span class="keyword"> const</span>
<a name="l01236"></a>01236 <span class="keyword">    </span>{
<a name="l01237"></a>01237         <span class="keywordflow">return</span> 0 == m_members.values_count;
<a name="l01238"></a>01238     }
<a name="l01239"></a>01239 
<a name="l01246"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a1bec40977c175983f585c4488cf8fe3c">01246</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a1bec40977c175983f585c4488cf8fe3c" title="Removes all values stored in the container.">clear</a>()
<a name="l01247"></a>01247     {
<a name="l01248"></a>01248         this-&gt;raw_destroy(*<span class="keyword">this</span>);
<a name="l01249"></a>01249     }
<a name="l01250"></a>01250 
<a name="l01263"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a0dad06d0f117f45ed54b5c123cb41d6e">01263</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a12e80f9da4c68e0e687f1c2012321147" title="The Box type used by the R-tree.">bounds_type</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a0dad06d0f117f45ed54b5c123cb41d6e" title="Returns the box able to contain all values stored in the container.">bounds</a>()<span class="keyword"> const</span>
<a name="l01264"></a>01264 <span class="keyword">    </span>{
<a name="l01265"></a>01265         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a12e80f9da4c68e0e687f1c2012321147" title="The Box type used by the R-tree.">bounds_type</a> result;
<a name="l01266"></a>01266         <span class="comment">// in order to suppress the uninitialized variable warnings</span>
<a name="l01267"></a>01267         geometry::assign_inverse(result);
<a name="l01268"></a>01268 
<a name="l01269"></a>01269         <span class="keywordflow">if</span> ( m_members.root )
<a name="l01270"></a>01270         {
<a name="l01271"></a>01271             detail::rtree::visitors::children_box&lt;value_type, options_type, translator_type, box_type, allocators_type&gt;
<a name="l01272"></a>01272                 box_v(result, m_members.translator());
<a name="l01273"></a>01273             detail::rtree::apply_visitor(box_v, *m_members.root);
<a name="l01274"></a>01274         }
<a name="l01275"></a>01275 
<a name="l01276"></a>01276         <span class="keywordflow">return</span> result;
<a name="l01277"></a>01277     }
<a name="l01278"></a>01278 
<a name="l01292"></a>01292     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueOrIndexable&gt;
<a name="l01293"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aaa834c241c191ac9de67f134564f36fa">01293</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aaa834c241c191ac9de67f134564f36fa" title="Count Values or Indexables stored in the container.">count</a>(ValueOrIndexable <span class="keyword">const</span>&amp; vori)<span class="keyword"> const</span>
<a name="l01294"></a>01294 <span class="keyword">    </span>{
<a name="l01295"></a>01295         <span class="keywordflow">if</span> ( !m_members.root )
<a name="l01296"></a>01296             <span class="keywordflow">return</span> 0;
<a name="l01297"></a>01297 
<a name="l01298"></a>01298         <span class="comment">// the input should be convertible to Value or Indexable type</span>
<a name="l01299"></a>01299 
<a name="l01300"></a>01300         <span class="keyword">enum</span> { as_val = 0, as_ind, dont_know };
<a name="l01301"></a>01301         <span class="keyword">typedef</span> boost::mpl::int_
<a name="l01302"></a>01302             &lt;
<a name="l01303"></a>01303                 boost::is_same&lt;ValueOrIndexable, value_type&gt;::value ?
<a name="l01304"></a>01304                     as_val :
<a name="l01305"></a>01305                     boost::is_same&lt;ValueOrIndexable, indexable_type&gt;::value ?
<a name="l01306"></a>01306                         as_ind :
<a name="l01307"></a>01307                         boost::is_convertible&lt;ValueOrIndexable, indexable_type&gt;::value ?
<a name="l01308"></a>01308                             as_ind :
<a name="l01309"></a>01309                             boost::is_convertible&lt;ValueOrIndexable, value_type&gt;::value ?
<a name="l01310"></a>01310                                 as_val :
<a name="l01311"></a>01311                                 dont_know
<a name="l01312"></a>01312             &gt; variant;
<a name="l01313"></a>01313 
<a name="l01314"></a>01314         BOOST_MPL_ASSERT_MSG((variant::value != dont_know),
<a name="l01315"></a>01315                              PASSED_OBJECT_NOT_CONVERTIBLE_TO_VALUE_NOR_INDEXABLE_TYPE,
<a name="l01316"></a>01316                              (ValueOrIndexable));
<a name="l01317"></a>01317 
<a name="l01318"></a>01318         <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::mpl::if_c
<a name="l01319"></a>01319             &lt;
<a name="l01320"></a>01320                 variant::value == as_val,
<a name="l01321"></a>01321                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>,
<a name="l01322"></a>01322                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a28e88e55d260a454688fe1bd5e5af96b" title="The Indexable type to which Value is translated.">indexable_type</a>
<a name="l01323"></a>01323             &gt;::type value_or_indexable;
<a name="l01324"></a>01324 
<a name="l01325"></a>01325         <span class="comment">// NOTE: If an object of convertible but not the same type is passed</span>
<a name="l01326"></a>01326         <span class="comment">// into the function, here a temporary will be created.</span>
<a name="l01327"></a>01327         <span class="keywordflow">return</span> this-&gt;<span class="keyword">template</span> raw_count&lt;value_or_indexable&gt;(vori);
<a name="l01328"></a>01328     }
<a name="l01329"></a>01329 
<a name="l01338"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73">01338</a>     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a80db5532eb59f7a809bd44ded265eb17" title="R-tree parameters type.">parameters_type</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>()<span class="keyword"> const</span>
<a name="l01339"></a>01339 <span class="keyword">    </span>{
<a name="l01340"></a>01340         <span class="keywordflow">return</span> m_members.parameters();
<a name="l01341"></a>01341     }
<a name="l01342"></a>01342 
<a name="l01351"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af391fd642a218c5fb10fc68d643a62b5">01351</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af391fd642a218c5fb10fc68d643a62b5" title="Returns function retrieving Indexable from Value.">indexable_get</a>()<span class="keyword"> const</span>
<a name="l01352"></a>01352 <span class="keyword">    </span>{
<a name="l01353"></a>01353         <span class="keywordflow">return</span> m_members.indexable_getter();
<a name="l01354"></a>01354     }
<a name="l01355"></a>01355 
<a name="l01364"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a16424563d0973960ac01f7a1969eeebe">01364</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad8fe544de514014a1bd87ea1b881ff9b" title="The function object comparing objects of type Value.">value_equal</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a16424563d0973960ac01f7a1969eeebe" title="Returns function comparing Values.">value_eq</a>()<span class="keyword"> const</span>
<a name="l01365"></a>01365 <span class="keyword">    </span>{
<a name="l01366"></a>01366         <span class="keywordflow">return</span> m_members.equal_to();
<a name="l01367"></a>01367     }
<a name="l01368"></a>01368 
<a name="l01377"></a><a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a17d9cef211feb7f674a5b4602f4cc81e">01377</a>     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ab6618b5c7e88ed70533233fbac0f5b2e" title="The type of allocator used by the container.">allocator_type</a> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a17d9cef211feb7f674a5b4602f4cc81e" title="Returns allocator used by the rtree.">get_allocator</a>()<span class="keyword"> const</span>
<a name="l01378"></a>01378 <span class="keyword">    </span>{
<a name="l01379"></a>01379         <span class="keywordflow">return</span> m_members.allocators().allocator();
<a name="l01380"></a>01380     }
<a name="l01381"></a>01381 
<a name="l01382"></a>01382 <span class="keyword">private</span>:
<a name="l01383"></a>01383 
<a name="l01392"></a>01392     <span class="keyword">inline</span> translator_type translator()<span class="keyword"> const</span>
<a name="l01393"></a>01393 <span class="keyword">    </span>{
<a name="l01394"></a>01394         <span class="keywordflow">return</span> m_members.translator();
<a name="l01395"></a>01395     }
<a name="l01396"></a>01396 
<a name="l01408"></a>01408     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Visitor&gt;
<a name="l01409"></a>01409     <span class="keyword">inline</span> <span class="keywordtype">void</span> apply_visitor(Visitor &amp; visitor)<span class="keyword"> const</span>
<a name="l01410"></a>01410 <span class="keyword">    </span>{
<a name="l01411"></a>01411         <span class="keywordflow">if</span> ( m_members.root )
<a name="l01412"></a>01412             detail::rtree::apply_visitor(visitor, *m_members.root);
<a name="l01413"></a>01413     }
<a name="l01414"></a>01414 
<a name="l01425"></a>01425     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> depth()<span class="keyword"> const</span>
<a name="l01426"></a>01426 <span class="keyword">    </span>{
<a name="l01427"></a>01427         <span class="keywordflow">return</span> m_members.leafs_level;
<a name="l01428"></a>01428     }
<a name="l01429"></a>01429 
<a name="l01430"></a>01430 <span class="keyword">private</span>:
<a name="l01431"></a>01431 
<a name="l01442"></a>01442     <span class="keyword">inline</span> <span class="keywordtype">void</span> raw_insert(value_type <span class="keyword">const</span>&amp; value)
<a name="l01443"></a>01443     {
<a name="l01444"></a>01444         BOOST_GEOMETRY_INDEX_ASSERT(m_members.root, <span class="stringliteral">&quot;The root must exist&quot;</span>);
<a name="l01445"></a>01445         <span class="comment">// CONSIDER: alternative - ignore invalid indexable or throw an exception</span>
<a name="l01446"></a>01446         BOOST_GEOMETRY_INDEX_ASSERT(detail::is_valid(m_members.translator()(value)), <span class="stringliteral">&quot;Indexable is invalid&quot;</span>);
<a name="l01447"></a>01447 
<a name="l01448"></a>01448         <a class="code" href="group__rtree__functions.html#gada4f62111ed22eb2860ea30995c1ce60" title="Insert a value to the index.">detail::rtree::visitors::insert</a>&lt;
<a name="l01449"></a>01449             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>,
<a name="l01450"></a>01450             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type,
<a name="l01451"></a>01451             <span class="keyword">typename</span> options_type::insert_tag
<a name="l01452"></a>01452         &gt; insert_v(m_members.root, m_members.leafs_level, value,
<a name="l01453"></a>01453                    m_members.parameters(), m_members.translator(), m_members.allocators());
<a name="l01454"></a>01454 
<a name="l01455"></a>01455         detail::rtree::apply_visitor(insert_v, *m_members.root);
<a name="l01456"></a>01456 
<a name="l01457"></a>01457 <span class="comment">// TODO</span>
<a name="l01458"></a>01458 <span class="comment">// Think about this: If exception is thrown, may the root be removed?</span>
<a name="l01459"></a>01459 <span class="comment">// Or it is just cleared?</span>
<a name="l01460"></a>01460 
<a name="l01461"></a>01461 <span class="comment">// TODO</span>
<a name="l01462"></a>01462 <span class="comment">// If exception is thrown, m_values_count may be invalid</span>
<a name="l01463"></a>01463         ++m_members.values_count;
<a name="l01464"></a>01464     }
<a name="l01465"></a>01465 
<a name="l01474"></a>01474     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> raw_remove(value_type <span class="keyword">const</span>&amp; value)
<a name="l01475"></a>01475     {
<a name="l01476"></a>01476         <span class="comment">// TODO: awulkiew - assert for correct value (indexable) ?</span>
<a name="l01477"></a>01477         BOOST_GEOMETRY_INDEX_ASSERT(m_members.root, <span class="stringliteral">&quot;The root must exist&quot;</span>);
<a name="l01478"></a>01478 
<a name="l01479"></a>01479         <a class="code" href="group__rtree__functions.html#gaf353d90fd933e6110b031f63166fb45a" title="Remove a value from the container.">detail::rtree::visitors::remove</a>&lt;
<a name="l01480"></a>01480             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>, options_type, translator_type, box_type, allocators_type
<a name="l01481"></a>01481         &gt; remove_v(m_members.root, m_members.leafs_level, value,
<a name="l01482"></a>01482                    m_members.parameters(), m_members.translator(), m_members.allocators());
<a name="l01483"></a>01483 
<a name="l01484"></a>01484         detail::rtree::apply_visitor(remove_v, *m_members.root);
<a name="l01485"></a>01485 
<a name="l01486"></a>01486         <span class="comment">// If exception is thrown, m_values_count may be invalid</span>
<a name="l01487"></a>01487 
<a name="l01488"></a>01488         <span class="keywordflow">if</span> ( remove_v.is_value_removed() )
<a name="l01489"></a>01489         {
<a name="l01490"></a>01490             BOOST_GEOMETRY_INDEX_ASSERT(0 &lt; m_members.values_count, <span class="stringliteral">&quot;unexpected state&quot;</span>);
<a name="l01491"></a>01491 
<a name="l01492"></a>01492             --m_members.values_count;
<a name="l01493"></a>01493 
<a name="l01494"></a>01494             <span class="keywordflow">return</span> 1;
<a name="l01495"></a>01495         }
<a name="l01496"></a>01496 
<a name="l01497"></a>01497         <span class="keywordflow">return</span> 0;
<a name="l01498"></a>01498     }
<a name="l01499"></a>01499 
<a name="l01506"></a>01506     <span class="keyword">inline</span> <span class="keywordtype">void</span> raw_create()
<a name="l01507"></a>01507     {
<a name="l01508"></a>01508         BOOST_GEOMETRY_INDEX_ASSERT(0 == m_members.root, <span class="stringliteral">&quot;the tree is already created&quot;</span>);
<a name="l01509"></a>01509 
<a name="l01510"></a>01510         m_members.root = detail::rtree::create_node&lt;allocators_type, leaf&gt;::apply(m_members.allocators()); <span class="comment">// MAY THROW (N: alloc)</span>
<a name="l01511"></a>01511         m_members.values_count = 0;
<a name="l01512"></a>01512         m_members.leafs_level = 0;
<a name="l01513"></a>01513     }
<a name="l01514"></a>01514 
<a name="l01523"></a>01523     <span class="keyword">inline</span> <span class="keywordtype">void</span> raw_destroy(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a> &amp; t)
<a name="l01524"></a>01524     {
<a name="l01525"></a>01525         <span class="keywordflow">if</span> ( t.m_members.root )
<a name="l01526"></a>01526         {
<a name="l01527"></a>01527             detail::rtree::visitors::destroy&lt;value_type, options_type, translator_type, box_type, allocators_type&gt;
<a name="l01528"></a>01528                 del_v(t.m_members.root, t.m_members.allocators());
<a name="l01529"></a>01529             detail::rtree::apply_visitor(del_v, *t.m_members.root);
<a name="l01530"></a>01530 
<a name="l01531"></a>01531             t.m_members.root = 0;
<a name="l01532"></a>01532         }
<a name="l01533"></a>01533         t.m_members.values_count = 0;
<a name="l01534"></a>01534         t.m_members.leafs_level = 0;
<a name="l01535"></a>01535     }
<a name="l01536"></a>01536 
<a name="l01548"></a>01548     <span class="keyword">inline</span> <span class="keywordtype">void</span> raw_copy(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a> <span class="keyword">const</span>&amp; src, <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a55d5fd5d205df08db5267253689ccf0c" title="The constructor.">rtree</a> &amp; dst, <span class="keywordtype">bool</span> copy_tr_and_params)<span class="keyword"> const</span>
<a name="l01549"></a>01549 <span class="keyword">    </span>{
<a name="l01550"></a>01550         detail::rtree::visitors::copy&lt;value_type, options_type, translator_type, box_type, allocators_type&gt;
<a name="l01551"></a>01551             copy_v(dst.m_members.allocators());
<a name="l01552"></a>01552 
<a name="l01553"></a>01553         <span class="keywordflow">if</span> ( src.m_members.root )
<a name="l01554"></a>01554             detail::rtree::apply_visitor(copy_v, *src.m_members.root);                      <span class="comment">// MAY THROW (V, E: alloc, copy, N: alloc)</span>
<a name="l01555"></a>01555 
<a name="l01556"></a>01556         <span class="keywordflow">if</span> ( copy_tr_and_params )
<a name="l01557"></a>01557         {
<a name="l01558"></a>01558             dst.m_members.indexable_getter() = src.m_members.indexable_getter();
<a name="l01559"></a>01559             dst.m_members.equal_to() = src.m_members.equal_to();
<a name="l01560"></a>01560             dst.m_members.parameters() = src.m_members.parameters();
<a name="l01561"></a>01561         }
<a name="l01562"></a>01562 
<a name="l01563"></a>01563         <span class="comment">// TODO use subtree_destroyer</span>
<a name="l01564"></a>01564         <span class="keywordflow">if</span> ( dst.m_members.root )
<a name="l01565"></a>01565         {
<a name="l01566"></a>01566             detail::rtree::visitors::destroy&lt;value_type, options_type, translator_type, box_type, allocators_type&gt;
<a name="l01567"></a>01567                 del_v(dst.m_members.root, dst.m_members.allocators());
<a name="l01568"></a>01568             detail::rtree::apply_visitor(del_v, *dst.m_members.root);
<a name="l01569"></a>01569             dst.m_members.root = 0;
<a name="l01570"></a>01570         }
<a name="l01571"></a>01571 
<a name="l01572"></a>01572         dst.m_members.root = copy_v.result;
<a name="l01573"></a>01573         dst.m_members.values_count = src.m_members.values_count;
<a name="l01574"></a>01574         dst.m_members.leafs_level = src.m_members.leafs_level;
<a name="l01575"></a>01575     }
<a name="l01576"></a>01576 
<a name="l01585"></a>01585     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueConvertible&gt;
<a name="l01586"></a>01586     <span class="keyword">inline</span> <span class="keywordtype">void</span> insert_dispatch(ValueConvertible <span class="keyword">const</span>&amp; val_conv,
<a name="l01587"></a>01587                                 boost::mpl::bool_&lt;true&gt; <span class="keyword">const</span>&amp; <span class="comment">/*is_convertible*/</span>)
<a name="l01588"></a>01588     {
<a name="l01589"></a>01589         this-&gt;raw_insert(val_conv);
<a name="l01590"></a>01590     }
<a name="l01591"></a>01591 
<a name="l01600"></a>01600     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Range&gt;
<a name="l01601"></a>01601     <span class="keyword">inline</span> <span class="keywordtype">void</span> insert_dispatch(Range <span class="keyword">const</span>&amp; rng,
<a name="l01602"></a>01602                                 boost::mpl::bool_&lt;false&gt; <span class="keyword">const</span>&amp; <span class="comment">/*is_convertible*/</span>)
<a name="l01603"></a>01603     {
<a name="l01604"></a>01604         BOOST_MPL_ASSERT_MSG((detail::is_range&lt;Range&gt;::value),
<a name="l01605"></a>01605                              PASSED_OBJECT_IS_NOT_CONVERTIBLE_TO_VALUE_NOR_A_RANGE,
<a name="l01606"></a>01606                              (Range));
<a name="l01607"></a>01607 
<a name="l01608"></a>01608         <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Range&gt;::type It;
<a name="l01609"></a>01609         <span class="keywordflow">for</span> ( It it = boost::const_begin(rng); it != boost::const_end(rng) ; ++it )
<a name="l01610"></a>01610             this-&gt;raw_insert(*it);
<a name="l01611"></a>01611     }
<a name="l01612"></a>01612 
<a name="l01621"></a>01621     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueConvertible&gt;
<a name="l01622"></a>01622     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> remove_dispatch(ValueConvertible <span class="keyword">const</span>&amp; val_conv,
<a name="l01623"></a>01623                                      boost::mpl::bool_&lt;true&gt; <span class="keyword">const</span>&amp; <span class="comment">/*is_convertible*/</span>)
<a name="l01624"></a>01624     {
<a name="l01625"></a>01625         <span class="keywordflow">return</span> this-&gt;raw_remove(val_conv);
<a name="l01626"></a>01626     }
<a name="l01627"></a>01627 
<a name="l01636"></a>01636     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Range&gt;
<a name="l01637"></a>01637     <span class="keyword">inline</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> remove_dispatch(Range <span class="keyword">const</span>&amp; rng,
<a name="l01638"></a>01638                                      boost::mpl::bool_&lt;false&gt; <span class="keyword">const</span>&amp; <span class="comment">/*is_convertible*/</span>)
<a name="l01639"></a>01639     {
<a name="l01640"></a>01640         BOOST_MPL_ASSERT_MSG((detail::is_range&lt;Range&gt;::value),
<a name="l01641"></a>01641                              PASSED_OBJECT_IS_NOT_CONVERTIBLE_TO_VALUE_NOR_A_RANGE,
<a name="l01642"></a>01642                              (Range));
<a name="l01643"></a>01643 
<a name="l01644"></a>01644         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> result = 0;
<a name="l01645"></a>01645         <span class="keyword">typedef</span> <span class="keyword">typename</span> boost::range_const_iterator&lt;Range&gt;::type It;
<a name="l01646"></a>01646         <span class="keywordflow">for</span> ( It it = boost::const_begin(rng); it != boost::const_end(rng) ; ++it )
<a name="l01647"></a>01647             result += this-&gt;raw_remove(*it);
<a name="l01648"></a>01648         <span class="keywordflow">return</span> result;
<a name="l01649"></a>01649     }
<a name="l01650"></a>01650 
<a name="l01657"></a>01657     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Predicates, <span class="keyword">typename</span> OutIter&gt;
<a name="l01658"></a>01658     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> query_dispatch(Predicates <span class="keyword">const</span>&amp; predicates, OutIter out_it, boost::mpl::bool_&lt;false&gt; <span class="keyword">const</span>&amp; <span class="comment">/*is_distance_predicate*/</span>)<span class="keyword"> const</span>
<a name="l01659"></a>01659 <span class="keyword">    </span>{
<a name="l01660"></a>01660         detail::rtree::visitors::spatial_query&lt;value_type, options_type, translator_type, box_type, allocators_type, Predicates, OutIter&gt;
<a name="l01661"></a>01661             find_v(m_members.translator(), predicates, out_it);
<a name="l01662"></a>01662 
<a name="l01663"></a>01663         detail::rtree::apply_visitor(find_v, *m_members.root);
<a name="l01664"></a>01664 
<a name="l01665"></a>01665         <span class="keywordflow">return</span> find_v.found_count;
<a name="l01666"></a>01666     }
<a name="l01667"></a>01667 
<a name="l01674"></a>01674     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Predicates, <span class="keyword">typename</span> OutIter&gt;
<a name="l01675"></a>01675     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> query_dispatch(Predicates <span class="keyword">const</span>&amp; predicates, OutIter out_it, boost::mpl::bool_&lt;true&gt; <span class="keyword">const</span>&amp; <span class="comment">/*is_distance_predicate*/</span>)<span class="keyword"> const</span>
<a name="l01676"></a>01676 <span class="keyword">    </span>{
<a name="l01677"></a>01677         BOOST_GEOMETRY_INDEX_ASSERT(m_members.root, <span class="stringliteral">&quot;The root must exist&quot;</span>);
<a name="l01678"></a>01678 
<a name="l01679"></a>01679         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> distance_predicate_index = detail::predicates_find_distance&lt;Predicates&gt;::value;
<a name="l01680"></a>01680         detail::rtree::visitors::distance_query&lt;
<a name="l01681"></a>01681             <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>,
<a name="l01682"></a>01682             options_type,
<a name="l01683"></a>01683             translator_type,
<a name="l01684"></a>01684             box_type,
<a name="l01685"></a>01685             allocators_type,
<a name="l01686"></a>01686             Predicates,
<a name="l01687"></a>01687             distance_predicate_index,
<a name="l01688"></a>01688             OutIter
<a name="l01689"></a>01689         &gt; distance_v(m_members.parameters(), m_members.translator(), predicates, out_it);
<a name="l01690"></a>01690 
<a name="l01691"></a>01691         detail::rtree::apply_visitor(distance_v, *m_members.root);
<a name="l01692"></a>01692 
<a name="l01693"></a>01693         <span class="keywordflow">return</span> distance_v.finish();
<a name="l01694"></a>01694     }
<a name="l01695"></a>01695     
<a name="l01702"></a>01702     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueOrIndexable&gt;
<a name="l01703"></a>01703     <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> raw_count(ValueOrIndexable <span class="keyword">const</span>&amp; vori)<span class="keyword"> const</span>
<a name="l01704"></a>01704 <span class="keyword">    </span>{
<a name="l01705"></a>01705         BOOST_GEOMETRY_INDEX_ASSERT(m_members.root, <span class="stringliteral">&quot;The root must exist&quot;</span>);
<a name="l01706"></a>01706 
<a name="l01707"></a>01707         detail::rtree::visitors::count
<a name="l01708"></a>01708             &lt;
<a name="l01709"></a>01709                 ValueOrIndexable,
<a name="l01710"></a>01710                 <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a5761a41d87b93d4fd548ecb6600ae757" title="The type of Value stored in the container.">value_type</a>,
<a name="l01711"></a>01711                 options_type,
<a name="l01712"></a>01712                 translator_type,
<a name="l01713"></a>01713                 box_type,
<a name="l01714"></a>01714                 allocators_type
<a name="l01715"></a>01715             &gt; count_v(vori, m_members.translator());
<a name="l01716"></a>01716 
<a name="l01717"></a>01717         detail::rtree::apply_visitor(count_v, *m_members.root);
<a name="l01718"></a>01718 
<a name="l01719"></a>01719         <span class="keywordflow">return</span> count_v.found_count;
<a name="l01720"></a>01720     }
<a name="l01721"></a>01721 
<a name="l01722"></a>01722     <span class="keyword">struct </span>members_holder
<a name="l01723"></a>01723         : <span class="keyword">public</span> translator_type
<a name="l01724"></a>01724         , <span class="keyword">public</span> Parameters
<a name="l01725"></a>01725         , <span class="keyword">public</span> allocators_type
<a name="l01726"></a>01726     {
<a name="l01727"></a>01727     <span class="keyword">private</span>:
<a name="l01728"></a>01728         members_holder(members_holder <span class="keyword">const</span>&amp;);
<a name="l01729"></a>01729         members_holder &amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad0db5e9e41e1553f944b7e740dbbb883" title="The assignment operator.">operator=</a>(members_holder <span class="keyword">const</span>&amp;);
<a name="l01730"></a>01730 
<a name="l01731"></a>01731     <span class="keyword">public</span>:
<a name="l01732"></a>01732         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IndGet, <span class="keyword">typename</span> ValEq, <span class="keyword">typename</span> Alloc&gt;
<a name="l01733"></a>01733         members_holder(IndGet <span class="keyword">const</span>&amp; ind_get,
<a name="l01734"></a>01734                        ValEq <span class="keyword">const</span>&amp; val_eq,
<a name="l01735"></a>01735                        Parameters <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>,
<a name="l01736"></a>01736                        BOOST_FWD_REF(Alloc) alloc)
<a name="l01737"></a>01737             : translator_type(ind_get, val_eq)
<a name="l01738"></a>01738             , Parameters(parameters)
<a name="l01739"></a>01739             , allocators_type(boost::forward&lt;Alloc&gt;(alloc))
<a name="l01740"></a>01740             , values_count(0)
<a name="l01741"></a>01741             , leafs_level(0)
<a name="l01742"></a>01742             , root(0)
<a name="l01743"></a>01743         {}
<a name="l01744"></a>01744 
<a name="l01745"></a>01745         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> IndGet, <span class="keyword">typename</span> ValEq&gt;
<a name="l01746"></a>01746         members_holder(IndGet <span class="keyword">const</span>&amp; ind_get,
<a name="l01747"></a>01747                        ValEq <span class="keyword">const</span>&amp; val_eq,
<a name="l01748"></a>01748                        Parameters <span class="keyword">const</span>&amp; parameters)
<a name="l01749"></a>01749             : translator_type(ind_get, val_eq)
<a name="l01750"></a>01750             , Parameters(parameters)
<a name="l01751"></a>01751             , allocators_type()
<a name="l01752"></a>01752             , values_count(0)
<a name="l01753"></a>01753             , leafs_level(0)
<a name="l01754"></a>01754             , root(0)
<a name="l01755"></a>01755         {}
<a name="l01756"></a>01756 
<a name="l01757"></a>01757         translator_type <span class="keyword">const</span>&amp; translator()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01758"></a>01758 
<a name="l01759"></a>01759         IndexableGetter <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01760"></a>01760         IndexableGetter &amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a43a7adb311cafc08e23010ccb4e97fb5" title="The function object extracting Indexable from Value.">indexable_getter</a>() { <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01761"></a>01761         EqualTo <span class="keyword">const</span>&amp; equal_to()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01762"></a>01762         EqualTo &amp; equal_to() { <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01763"></a>01763         Parameters <span class="keyword">const</span>&amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01764"></a>01764         Parameters &amp; <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a9076baef90a3a9c6018871fa25115a73" title="Returns parameters.">parameters</a>() { <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01765"></a>01765         allocators_type <span class="keyword">const</span>&amp; allocators()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01766"></a>01766         allocators_type &amp; allocators() { <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l01767"></a>01767 
<a name="l01768"></a>01768         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> values_count;
<a name="l01769"></a>01769         <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#acc1f90d7b70afebc58107c523ece5cd5" title="Unsigned integral type used by the container.">size_type</a> leafs_level;
<a name="l01770"></a>01770         node_pointer root;
<a name="l01771"></a>01771     };
<a name="l01772"></a>01772 
<a name="l01773"></a>01773     members_holder m_members;
<a name="l01774"></a>01774 };
<a name="l01775"></a>01775 
<a name="l01786"></a>01786 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l01787"></a><a class="code" href="group__rtree__functions.html#gada4f62111ed22eb2860ea30995c1ce60">01787</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__rtree__functions.html#gada4f62111ed22eb2860ea30995c1ce60" title="Insert a value to the index.">insert</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree,
<a name="l01788"></a>01788                    Value <span class="keyword">const</span>&amp; v)
<a name="l01789"></a>01789 {
<a name="l01790"></a>01790     tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86" title="Insert a value to the index.">insert</a>(v);
<a name="l01791"></a>01791 }
<a name="l01792"></a>01792 
<a name="l01804"></a>01804 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator,
<a name="l01805"></a>01805          <span class="keyword">typename</span> Iterator&gt;
<a name="l01806"></a><a class="code" href="group__rtree__functions.html#ga056469ea699e609e67762fe1b789997f">01806</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__rtree__functions.html#gada4f62111ed22eb2860ea30995c1ce60" title="Insert a value to the index.">insert</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree,
<a name="l01807"></a>01807                    Iterator first, Iterator last)
<a name="l01808"></a>01808 {
<a name="l01809"></a>01809     tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86" title="Insert a value to the index.">insert</a>(first, last);
<a name="l01810"></a>01810 }
<a name="l01811"></a>01811 
<a name="l01822"></a>01822 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator,
<a name="l01823"></a>01823          <span class="keyword">typename</span> ConvertibleOrRange&gt;
<a name="l01824"></a><a class="code" href="group__rtree__functions.html#gab4edad000d63eb103f2dad3813ceb2b3">01824</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__rtree__functions.html#gada4f62111ed22eb2860ea30995c1ce60" title="Insert a value to the index.">insert</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree,
<a name="l01825"></a>01825                    ConvertibleOrRange <span class="keyword">const</span>&amp; conv_or_rng)
<a name="l01826"></a>01826 {
<a name="l01827"></a>01827     tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ad47980467e66b8644df18a480dbf9d86" title="Insert a value to the index.">insert</a>(conv_or_rng);
<a name="l01828"></a>01828 }
<a name="l01829"></a>01829 
<a name="l01845"></a>01845 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l01846"></a>01846 <span class="keyword">inline</span> <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::size_type
<a name="l01847"></a><a class="code" href="group__rtree__functions.html#gaf353d90fd933e6110b031f63166fb45a">01847</a> <span class="keyword">remove</span>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree,
<a name="l01848"></a>01848        Value <span class="keyword">const</span>&amp; v)
<a name="l01849"></a>01849 {
<a name="l01850"></a>01850     <span class="keywordflow">return</span> tree.remove(v);
<a name="l01851"></a>01851 }
<a name="l01852"></a>01852 
<a name="l01871"></a>01871 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator,
<a name="l01872"></a>01872          <span class="keyword">typename</span> Iterator&gt;
<a name="l01873"></a>01873 <span class="keyword">inline</span> <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::size_type
<a name="l01874"></a><a class="code" href="group__rtree__functions.html#gaa460a8985496cf133f63f245527ac6e7">01874</a> <span class="keyword">remove</span>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree,
<a name="l01875"></a>01875        Iterator first, Iterator last)
<a name="l01876"></a>01876 {
<a name="l01877"></a>01877     <span class="keywordflow">return</span> tree.remove(first, last);
<a name="l01878"></a>01878 }
<a name="l01879"></a>01879 
<a name="l01897"></a>01897 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator,
<a name="l01898"></a>01898          <span class="keyword">typename</span> ConvertibleOrRange&gt;
<a name="l01899"></a>01899 <span class="keyword">inline</span> <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::size_type
<a name="l01900"></a><a class="code" href="group__rtree__functions.html#ga700c922f8b4d5ebd073e999e12b55249">01900</a> <span class="keyword">remove</span>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree,
<a name="l01901"></a>01901        ConvertibleOrRange <span class="keyword">const</span>&amp; conv_or_rng)
<a name="l01902"></a>01902 {
<a name="l01903"></a>01903     <span class="keywordflow">return</span> tree.remove(conv_or_rng);
<a name="l01904"></a>01904 }
<a name="l01905"></a>01905 
<a name="l01979"></a>01979 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator,
<a name="l01980"></a>01980           <span class="keyword">typename</span> Predicates, <span class="keyword">typename</span> OutIter&gt; <span class="keyword">inline</span>
<a name="l01981"></a>01981 <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::size_type
<a name="l01982"></a><a class="code" href="group__rtree__functions.html#gadb43b211d5d743ebe2ef256328286e95">01982</a> <a class="code" href="group__rtree__functions.html#gadb43b211d5d743ebe2ef256328286e95" title="Finds values meeting passed predicates e.g. nearest to some Point and/or intersecting some Box...">query</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree,
<a name="l01983"></a>01983       Predicates <span class="keyword">const</span>&amp; predicates,
<a name="l01984"></a>01984       OutIter out_it)
<a name="l01985"></a>01985 {
<a name="l01986"></a>01986     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a7baa88eb4e7a5c640ab847513de45b3e" title="Finds values meeting passed predicates e.g. nearest to some Point and/or intersecting some Box...">query</a>(predicates, out_it);
<a name="l01987"></a>01987 }
<a name="l01988"></a>01988 
<a name="l02017"></a>02017 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator,
<a name="l02018"></a>02018           <span class="keyword">typename</span> Predicates&gt; <span class="keyword">inline</span>
<a name="l02019"></a>02019 <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::const_query_iterator
<a name="l02020"></a><a class="code" href="group__rtree__functions.html#ga45c2b7b112bf730d10367e10df62aa3c">02020</a> <a class="code" href="group__rtree__functions.html#ga45c2b7b112bf730d10367e10df62aa3c" title="Returns the query iterator pointing at the begin of the query range.">qbegin</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree,
<a name="l02021"></a>02021        Predicates <span class="keyword">const</span>&amp; predicates)
<a name="l02022"></a>02022 {
<a name="l02023"></a>02023     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a63d15f3b5b157a47045fcac3fec3b7a0" title="Returns a query iterator pointing at the begin of the query range.">qbegin</a>(predicates);
<a name="l02024"></a>02024 }
<a name="l02025"></a>02025 
<a name="l02049"></a>02049 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt; <span class="keyword">inline</span>
<a name="l02050"></a>02050 <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::const_query_iterator
<a name="l02051"></a><a class="code" href="group__rtree__functions.html#ga5c9a1eb0421bf2c702392247d48143e5">02051</a> <a class="code" href="group__rtree__functions.html#ga5c9a1eb0421bf2c702392247d48143e5" title="Returns the query iterator pointing at the end of the query range.">qend</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree)
<a name="l02052"></a>02052 {
<a name="l02053"></a>02053     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#af3b16f4732fa8113c0b2187005182513" title="Returns a query iterator pointing at the end of the query range.">qend</a>();
<a name="l02054"></a>02054 }
<a name="l02055"></a>02055 
<a name="l02082"></a>02082 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt; <span class="keyword">inline</span>
<a name="l02083"></a>02083 <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::const_iterator
<a name="l02084"></a><a class="code" href="group__rtree__functions.html#ga2467dc6ac90303496abd6ebd136eba18">02084</a> <a class="code" href="group__rtree__functions.html#ga2467dc6ac90303496abd6ebd136eba18" title="Returns the iterator pointing at the begin of the rtree values range.">begin</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree)
<a name="l02085"></a>02085 {
<a name="l02086"></a>02086     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a23219a7705ac491862c67be8baa34f0d" title="Returns the iterator pointing at the begin of the rtree values range.">begin</a>();
<a name="l02087"></a>02087 }
<a name="l02088"></a>02088 
<a name="l02115"></a>02115 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt; <span class="keyword">inline</span>
<a name="l02116"></a>02116 <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::const_iterator
<a name="l02117"></a><a class="code" href="group__rtree__functions.html#ga8fd1e53d8492643cbc9840ff715bb736">02117</a> <a class="code" href="group__rtree__functions.html#ga8fd1e53d8492643cbc9840ff715bb736" title="Returns the iterator pointing at the end of the rtree values range.">end</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree)
<a name="l02118"></a>02118 {
<a name="l02119"></a>02119     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a513f1bd9dfcd022acb208e62115b29b1" title="Returns the iterator pointing at the end of the rtree values range.">end</a>();
<a name="l02120"></a>02120 }
<a name="l02121"></a>02121 
<a name="l02131"></a>02131 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l02132"></a><a class="code" href="group__rtree__functions.html#gabaca6c24c3838a8164aa3700c459e7a4">02132</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__rtree__functions.html#gabaca6c24c3838a8164aa3700c459e7a4" title="Remove all values from the index.">clear</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; tree)
<a name="l02133"></a>02133 {
<a name="l02134"></a>02134     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a1bec40977c175983f585c4488cf8fe3c" title="Removes all values stored in the container.">clear</a>();
<a name="l02135"></a>02135 }
<a name="l02136"></a>02136 
<a name="l02148"></a>02148 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l02149"></a><a class="code" href="group__rtree__functions.html#gaa19a09e7b5f0a86a4b74ef2342de1d68">02149</a> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="group__rtree__functions.html#gaa19a09e7b5f0a86a4b74ef2342de1d68" title="Get the number of values stored in the index.">size</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree)
<a name="l02150"></a>02150 {
<a name="l02151"></a>02151     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#ac9f152c8c96525e3735b81635d8171b1" title="Returns the number of stored values.">size</a>();
<a name="l02152"></a>02152 }
<a name="l02153"></a>02153 
<a name="l02165"></a>02165 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l02166"></a><a class="code" href="group__rtree__functions.html#gaba44e2fb12fdc7b528bfee56a88e0844">02166</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__rtree__functions.html#gaba44e2fb12fdc7b528bfee56a88e0844" title="Query if there are no values stored in the index.">empty</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree)
<a name="l02167"></a>02167 {
<a name="l02168"></a>02168     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a0dad06d0f117f45ed54b5c123cb41d6e" title="Returns the box able to contain all values stored in the container.">bounds</a>();
<a name="l02169"></a>02169 }
<a name="l02170"></a>02170 
<a name="l02182"></a>02182 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l02183"></a>02183 <span class="keyword">inline</span> <span class="keyword">typename</span> rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;::bounds_type
<a name="l02184"></a><a class="code" href="group__rtree__functions.html#ga4e43e7720c66e88959ff511a7462a3ff">02184</a> <a class="code" href="group__rtree__functions.html#ga4e43e7720c66e88959ff511a7462a3ff" title="Get the box containing all stored values or an invalid box if the index has no values.">bounds</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> <span class="keyword">const</span>&amp; tree)
<a name="l02185"></a>02185 {
<a name="l02186"></a>02186     <span class="keywordflow">return</span> tree.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#a0dad06d0f117f45ed54b5c123cb41d6e" title="Returns the box able to contain all values stored in the container.">bounds</a>();
<a name="l02187"></a>02187 }
<a name="l02188"></a>02188 
<a name="l02199"></a>02199 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l02200"></a><a class="code" href="group__rtree__functions.html#gaa1250318a78d7e27ba8f3537eb0ddb3f">02200</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__rtree__functions.html#gaa1250318a78d7e27ba8f3537eb0ddb3f" title="Exchanges the contents of the container with those of other.">swap</a>(<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; l,
<a name="l02201"></a>02201                  <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;</a> &amp; r)
<a name="l02202"></a>02202 {
<a name="l02203"></a>02203     <span class="keywordflow">return</span> l.<a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html#aedb719dfece91d298e9ee56878524c9b" title="Swaps contents of two rtrees.">swap</a>(r);
<a name="l02204"></a>02204 }
<a name="l02205"></a>02205 
<a name="l02206"></a>02206 }}} <span class="comment">// namespace boost::geometry::index</span>
<a name="l02207"></a>02207 
<a name="l02208"></a>02208 <span class="comment">// Boost.Range adaptation</span>
<a name="l02209"></a>02209 <span class="keyword">namespace </span>boost {
<a name="l02210"></a>02210 
<a name="l02211"></a>02211 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value, <span class="keyword">typename</span> Parameters, <span class="keyword">typename</span> IndexableGetter, <span class="keyword">typename</span> EqualTo, <span class="keyword">typename</span> Allocator&gt;
<a name="l02212"></a>02212 <span class="keyword">struct </span>range_mutable_iterator
<a name="l02213"></a>02213     &lt;
<a name="l02214"></a>02214         boost::geometry::index::rtree&lt;Value, Parameters, IndexableGetter, EqualTo, Allocator&gt;
<a name="l02215"></a>02215     &gt;
<a name="l02216"></a>02216 {
<a name="l02217"></a>02217     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classboost_1_1geometry_1_1index_1_1rtree.html" title="The R-tree spatial index.">boost::geometry::index::rtree</a>
<a name="l02218"></a>02218         &lt;
<a name="l02219"></a>02219             Value, Parameters, IndexableGetter, EqualTo, Allocator
<a name="l02220"></a>02220         &gt;::const_iterator type;
<a name="l02221"></a>02221 };
<a name="l02222"></a>02222 
<a name="l02223"></a>02223 } <span class="comment">// namespace boost</span>
<a name="l02224"></a>02224 
<a name="l02225"></a>02225 <span class="comment">// TODO: don&#39;t include the implementation at the end of the file</span>
<a name="l02226"></a>02226 <span class="preprocessor">#include &lt;boost/geometry/algorithms/detail/comparable_distance/implementation.hpp&gt;</span>
<a name="l02227"></a>02227 
<a name="l02228"></a>02228 <span class="preprocessor">#include &lt;boost/geometry/index/detail/config_end.hpp&gt;</span>
<a name="l02229"></a>02229 
<a name="l02230"></a>02230 <span class="preprocessor">#endif // BOOST_GEOMETRY_INDEX_RTREE_HPP</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu May 5 2016 21:18:04 for Boost.Geometry.Index by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
